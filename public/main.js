!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/public/",n(n.s=1)}([function(t,e,n){
/* Riot v3.13.2, @license MIT */
!function(t){"use strict";function e(t,e){return(e||document).querySelector(t)}var n,i,r=[],o={},s="yield",a="__global_mixin",u="riot-",l=["ref","data-ref"],c="data-is",d="if",p="each",f="no-reorder",h="show",m="hide",v="key",g="__riot-events__",b="string",y="object",_="undefined",x="function",w="http://www.w3.org/1999/xlink",k="http://www.w3.org/2000/svg",E=/^xlink:(\w+)/,A=typeof window===_?void 0:window,N=/^on/,C=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g,O={viewbox:"viewBox",preserveaspectratio:"preserveAspectRatio"},S=/^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|selected|sortable|truespeed|typemustmatch)$/,I=0|(A&&A.document||{}).documentMode;function M(t){return"svg"===t?document.createElementNS(k,t):document.createElement(t)}function T(t,e,n){var i=E.exec(e);i&&i[1]?t.setAttributeNS(w,i[1],n):t.setAttribute(e,n)}var L,j,P={},H=!1;A&&(L=M("style"),j=e("style[type=riot]"),T(L,"type","text/css"),j?(j.id&&(L.id=j.id),j.parentNode.replaceChild(L,j)):document.head.appendChild(L),i=(n=L).styleSheet);var R={styleNode:n,add:function(t,e){P[e]=t,H=!0},inject:function(){if(A&&H){H=!1;var t=Object.keys(P).map(function(t){return P[t]}).join("\n");i?i.cssText=t:n.innerHTML=t}},remove:function(t){delete P[t],H=!0}},$=function(){var t="[{(,;:?=|&!^~>%*/",e=["case","default","do","else","in","instanceof","prefix","return","typeof","void","yield"],n=e.reduce(function(t,e){return t+e.slice(-1)},""),i=/^\/(?=[^*>\/])[^[\/\\]*(?:(?:\\.|\[(?:\\.|[^\]\\]*)*\])[^[\\\/]*)*?\/[gimuy]*/,r=/[$\w]/;function o(t,e){for(;--e>=0&&/\s/.test(t[e]););return e}return function(s,a){var u=/.*/g,l=u.lastIndex=a++,c=u.exec(s)[0].match(i);if(c){var d=l+c[0].length;l=o(s,l);var p=s[l];if(l<0||~t.indexOf(p))return d;if("."===p)"."===s[l-1]&&(a=d);else if("+"===p||"-"===p)(s[--l]!==p||(l=o(s,l))<0||!r.test(s[l]))&&(a=d);else if(~n.indexOf(p)){for(var f=l+1;--l>=0&&r.test(s[l]););~e.indexOf(s.slice(l+1,f))&&(a=d)}}return a}}(),V=function(t){var e,n,i="g",r=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'|`[^`\\]*(?:\\[\S\s][^`\\]*)*`/g,o=r.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?([^<]\/)[gim]*/.source,s=RegExp("[\\x00-\\x1F<>a-zA-Z0-9'\",;\\\\]"),a=/(?=[[\]()*+?.^$|])/g,u=r.source+"|"+/(\/)(?![*\/])/.source,l={"(":RegExp("([()])|"+u,i),"[":RegExp("([[\\]])|"+u,i),"{":RegExp("([{}])|"+u,i)},c="{ }",d=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+u,i),c,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/],p=void 0,f=[];function h(t){return t}function m(t,e){return e||(e=f),new RegExp(t.source.replace(/{/g,e[2]).replace(/}/g,e[3]),t.global?i:"")}function v(t){if(t===c)return d;var e=t.split(" ");if(2!==e.length||s.test(t))throw new Error('Unsupported brackets "'+t+'"');return(e=e.concat(t.replace(a,"\\").split(" ")))[4]=m(e[1].length>1?/{[\S\s]*?}/:d[4],e),e[5]=m(t.length>3?/\\({|})/g:d[5],e),e[6]=m(d[6],e),e[7]=RegExp("\\\\("+e[3]+")|([[({])|("+e[3]+")|"+u,i),e[8]=t,e}function g(t){return t instanceof RegExp?e(t):f[t]}function b(t){(t||(t=c))!==f[8]&&(f=v(t),e=t===c?h:m,f[9]=e(d[9])),p=t}return g.split=function(t,e,n){n||(n=f);var i,r,o,s,a,u,c=[],d=n[6],p=[],h="";for(r=o=d.lastIndex=0;i=d.exec(t);){if(u=d.lastIndex,s=i.index,r){if(i[2]){var m=i[2],v=l[m],g=1;for(v.lastIndex=u;i=v.exec(t);)if(i[1]){if(i[1]===m)++g;else if(!--g)break}else v.lastIndex=y(i.index,v.lastIndex,i[2]);d.lastIndex=g?t.length:v.lastIndex;continue}if(!i[3]){d.lastIndex=y(s,u,i[4]);continue}}i[1]||(b(t.slice(o,s)),o=d.lastIndex,(d=n[6+(r^=1)]).lastIndex=o)}return t&&o<t.length&&b(t.slice(o)),c.qblocks=p,c;function b(t){h&&(t=h+t,h=""),e||r?c.push(t&&t.replace(n[5],"$1")):c.push(t)}function y(n,i,r){return r&&(i=$(t,n)),e&&i>n+2&&(a="⁗"+p.length+"~",p.push(t.slice(n,i)),h+=t.slice(o,n)+a,o=i),i}},g.hasExpr=function(t){return f[4].test(t)},g.loopKeys=function(t){var e=t.match(f[9]);return e?{key:e[1],pos:e[2],val:f[0]+e[3].trim()+f[1]}:{val:t.trim()}},g.array=function(t){return t?v(t):f},Object.defineProperty(g,"settings",{set:function(t){var e;e=(t=t||{}).brackets,Object.defineProperty(t,"brackets",{set:b,get:function(){return p},enumerable:!0}),n=t,b(e)},get:function(){return n}}),g.settings="undefined"!=typeof riot&&riot.settings||{},g.set=b,g.skipRegex=$,g.R_STRINGS=r,g.R_MLCOMMS=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,g.S_QBLOCKS=o,g.S_QBLOCK2=u,g}(),F=function(){var t={};function e(r,o){return r?(t[r]||(t[r]=function(t){var e=function(t){var e,r=V.split(t.replace(n,'"'),1),o=r.qblocks;if(r.length>2||r[0]){var a,u,l=[];for(a=u=0;a<r.length;++a)(e=r[a])&&(e=1&a?s(e,1,o):'"'+e.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')&&(l[u++]=e);e=u<2?l[0]:"["+l.join(",")+'].join("")'}else e=s(r[1],0,o);return o.length&&(e=e.replace(i,function(t,e){return o[e].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})),e}(t);return"try{return "!==e.slice(0,11)&&(e="return "+e),new Function("E",e+";")}(r))).call(o,function(t,n){t.riotData={tagName:n&&n.__&&n.__.tagName,_riot_id:n&&n._riot_id},e.errorHandler?e.errorHandler(t):"undefined"!=typeof console&&"function"==typeof console.error&&(console.error(t.message),console.log("<%s> %s",t.riotData.tagName||"Unknown tag",this.tmpl),console.log(this.data))}.bind({data:o,tmpl:r})):r}e.hasExpr=V.hasExpr,e.loopKeys=V.loopKeys,e.clearCache=function(){t={}},e.errorHandler=null;var n=/\u2057/g,i=/\u2057(\d+)~/g,r=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\u2057(\d+)~):/,o={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g};function s(t,e,n){if(t=t.replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1")){for(var i,s=[],a=0;t&&(i=t.match(r))&&!i.index;){var u,l,d=/,|([[{(])|$/g;for(t=RegExp.rightContext,u=i[2]?n[i[2]].slice(1,-1).trim().replace(/\s+/g," "):i[1];l=(i=d.exec(t))[1];)p(l,d);l=t.slice(0,i.index),t=RegExp.rightContext,s[a++]=c(l,1,u)}t=a?a>1?"["+s.join(",")+'].join(" ").trim()':s[0]:c(t,e)}return t;function p(e,n){var i,r=1,s=o[e];for(s.lastIndex=n.lastIndex;i=s.exec(t);)if(i[0]===e)++r;else if(!--r)break;n.lastIndex=r?t.length:s.lastIndex}}var a='"in this?this:'+("object"!=typeof window?"global":"window")+").",u=/[,{][\$\w]+(?=:)|(^ *|[^$\w\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,l=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;function c(t,e,n){var i;return t=t.replace(u,function(t,e,n,r,o){return n&&(r=i?0:r+t.length,"this"!==n&&"global"!==n&&"window"!==n?(t=e+'("'+n+a+n,r&&(i="."===(o=o[r])||"("===o||"["===o)):r&&(i=!l.test(o.slice(r)))),t}),i&&(t="try{return "+t+"}catch(e){E(e,this)}"),n?t=(i?"function(){"+t+"}.call(this)":"("+t+")")+'?"'+n+'":""':e&&(t="function(v){"+(i?t.replace("return ","v="):"v=("+t+")")+';return v||v===0?v:""}.call(this)'),t}return e.version=V.version="v3.0.8",e}(),z=function(t){t=t||{};var e={},n=Array.prototype.slice;return Object.defineProperties(t,{on:{value:function(n,i){return"function"==typeof i&&(e[n]=e[n]||[]).push(i),t},enumerable:!1,writable:!1,configurable:!1},off:{value:function(n,i){if("*"!=n||i)if(i)for(var r,o=e[n],s=0;r=o&&o[s];++s)r==i&&o.splice(s--,1);else delete e[n];else e={};return t},enumerable:!1,writable:!1,configurable:!1},one:{value:function(e,n){return t.on(e,function i(){t.off(e,i),n.apply(t,arguments)})},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(i){var r,o,s,a=arguments,u=arguments.length-1,l=new Array(u);for(s=0;s<u;s++)l[s]=a[s+1];for(r=n.call(e[i]||[],0),s=0;o=r[s];++s)o.apply(t,l);return e["*"]&&"*"!=i&&t.trigger.apply(t,["*",i].concat(l)),t},enumerable:!1,writable:!1,configurable:!1}}),t};function U(t,e){return Object.getOwnPropertyDescriptor(t,e)}function D(t){return typeof t===_}function B(t,e){var n=U(t,e);return D(t[e])||n&&n.writable}function q(t){for(var e,n=1,i=arguments,r=i.length;n<r;n++)if(e=i[n])for(var o in e)B(t,o)&&(t[o]=e[o]);return t}function K(t){return Object.create(t)}var J=q(K(V.settings),{skipAnonymousTags:!0,keepValueAttributes:!1,autoUpdate:!0});function X(t,e){return[].slice.call((e||document).querySelectorAll(t))}function Y(){return document.createTextNode("")}function Z(t,e){t.style.display=e?"":"none",t.hidden=!e}function G(t,e){return t.getAttribute(e)}function Q(t,e){t.removeAttribute(e)}function W(t,e,n){if(n){var i=t.ownerDocument.importNode((new DOMParser).parseFromString('<svg xmlns="'+k+'">'+e+"</svg>","application/xml").documentElement,!0);t.appendChild(i)}else t.innerHTML=e}function tt(t,e){if(t)for(var n;n=C.exec(t);)e(n[1].toLowerCase(),n[2]||n[3]||n[4])}function et(){return document.createDocumentFragment()}function nt(t,e,n){t.insertBefore(e,n.parentNode&&n)}function it(t){return Object.keys(t).reduce(function(e,n){return e+" "+n+": "+t[n]+";"},"")}function rt(t,e,n){if(t){var i,r=e(t,n);if(!1===r)return;for(t=t.firstChild;t;)i=t.nextSibling,rt(t,e,r),t=i}}var ot=Object.freeze({$$:X,$:e,createDOMPlaceholder:Y,mkEl:M,setAttr:T,toggleVisibility:Z,getAttr:G,remAttr:Q,setInnerHTML:W,walkAttrs:tt,createFrag:et,safeInsert:nt,styleObjectToString:it,walkNodes:rt});function st(t){return D(t)||null===t}function at(t){return st(t)||""===t}function ut(t){return typeof t===x}function lt(t){return t&&typeof t===y}function ct(t){var e=t.ownerSVGElement;return!!e||null===e}function dt(t){return Array.isArray(t)||t instanceof Array}function pt(t){return S.test(t)}function ft(t){return typeof t===b}var ht=Object.freeze({isBlank:at,isFunction:ut,isObject:lt,isSvg:ct,isWritable:B,isArray:dt,isBoolAttr:pt,isNil:st,isString:ft,isUndefined:D});function mt(t,e){return-1!==t.indexOf(e)}function vt(t,e){for(var n=t?t.length:0,i=0;i<n;i++)e(t[i],i);return t}function gt(t,e){return t.slice(0,e.length)===e}var bt,yt=(bt=-1,function(){return++bt});function _t(t,e,n,i){return Object.defineProperty(t,e,q({value:n,enumerable:!1,writable:!1,configurable:!0},i)),t}function xt(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})}function wt(t){console&&console.warn&&console.warn(t)}var kt=Object.freeze({contains:mt,each:vt,getPropDescriptor:U,startsWith:gt,uid:yt,defineProperty:_t,objectCreate:K,extend:q,toCamel:xt,warn:wt});function Et(t,e,n,i,r){var o=t[e],s=dt(o),a=!D(r);if(!o||o!==n)if(!o&&i)t[e]=[n];else if(o)if(s){var u=o.indexOf(n);if(u===r)return;-1!==u&&o.splice(u,1),a?o.splice(r,0,n):o.push(n)}else t[e]=[o,n];else t[e]=n}function At(t){return t.tagName&&o[G(t,c)||G(t,c)||t.tagName.toLowerCase()]}function Nt(t,e){var n=At(t),i=!e&&G(t,c);return i&&!F.hasExpr(i)?i:n?n.name:t.tagName.toLowerCase()}function Ct(){return this.parent?q(K(this),this.parent):this}var Ot=/<yield\b/i,St=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>|>)/gi,It=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi,Mt=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,Tt={tr:"tbody",th:"tr",td:"tr",col:"colgroup"},Lt=I&&I<10?/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/:/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/,jt="div",Pt="svg";function Ht(t,n,i){var r=t&&t.match(/^\s*<([-\w]+)/),o=r&&r[1].toLowerCase(),s=M(i?Pt:jt);return t=function(t,e){if(!Ot.test(t))return t;var n={};return e=e&&e.replace(It,function(t,e,i){return n[e]=n[e]||i,""}).trim(),t.replace(Mt,function(t,e,i){return n[e]||i||""}).replace(St,function(t,n){return e||n||""})}(t,n),Lt.test(o)?s=function(t,n,i){var r="o"===i[0],o=r?"select>":"table>";if(t.innerHTML="<"+o+n.trim()+"</"+o,o=t.firstChild,r)o.selectedIndex=-1;else{var s=Tt[i];s&&1===o.childElementCount&&(o=e(s,o))}return o}(s,t,o):W(s,t,i),s}var Rt=/^on/;function $t(t){for(var e=t;e.__.isAnonymous&&e.parent;)e=e.parent;return e}function Vt(t,e,n,i){var r,o=function(t,e,n){var i=this.__.parent,r=this.__.item;if(!r)for(;i&&!r;)r=i.__.item,i=i.__.parent;if(B(n,"currentTarget")&&(n.currentTarget=t),B(n,"target")&&(n.target=n.srcElement),B(n,"which")&&(n.which=n.charCode||n.keyCode),n.item=r,e.call(this,n),J.autoUpdate&&!n.preventUpdate){var o=$t(this);o.isMounted&&o.update()}}.bind(i,n,e);n[t]=null,r=t.replace(N,""),mt(i.__.listeners,n)||i.__.listeners.push(n),n[g]||(n[g]={}),n[g][t]&&n.removeEventListener(r,n[g][t]),n[g][t]=o,n.addEventListener(r,o,!1)}function Ft(t,e,n,i){var r=be(t,e,n),o=e.tagName||Nt(e.root,!0),s=$t(i);return _t(r,"parent",s),r.__.parent=i,Et(s.tags,o,r),s!==i&&Et(i.tags,o,r),r}function zt(t,e,n,i){if(dt(t[e])){var r=t[e].indexOf(n);-1!==r&&t[e].splice(r,1),t[e].length?1!==t[e].length||i||(t[e]=t[e][0]):delete t[e]}else t[e]===n&&delete t[e]}function Ut(t,e){var n,i,r=Y(),o=Y(),s=et();for(this.root.insertBefore(r,this.root.firstChild),this.root.appendChild(o),this.__.head=i=r,this.__.tail=o;i;)n=i.nextSibling,s.appendChild(i),this.__.virts.push(i),i=n;e?t.insertBefore(s,e.__.head):t.appendChild(s)}function Dt(t,e){if(e.parentNode){var n=et();Ut.call(t,n),e.parentNode.replaceChild(n,e)}}function Bt(t){if(!this.root||!G(this.root,"virtualized")){var e,n=t.dom,i=function(t){return t?(t=t.replace(u,""),O[t]&&(t=O[t]),t):null}(t.attr),r=mt([h,m],i),s=t.root&&"VIRTUAL"===t.root.tagName,a=this.__,l=a.isAnonymous,c=n&&(t.parent||n.parentNode),d=J.keepValueAttributes,p="style"===i,f="class"===i,v="value"===i;if(t._riot_id)t.__.wasCreated?t.update():(t.mount(),s&&Dt(t,t.root));else{if(t.update)return t.update();var g=r&&!l?Ct.call(this):this,b=!at(e=F(t.expr,g)),y=lt(e);if(y&&(f?e=F(JSON.stringify(e),this):p&&(e=it(e))),!t.attr||t.wasParsedOnce&&!1!==e&&(b||v&&(!v||d))||Q(n,G(n,t.attr)?t.attr:i),t.bool&&(e=!!e&&i),t.isRtag)return function(t,e,n){var i,r=t.tag||t.dom._tag,s=(r?r.__:{}).head,a="VIRTUAL"===t.dom.tagName;r&&t.tagName===n?r.update():(r&&(a&&(i=Y(),s.parentNode.insertBefore(i,s)),r.unmount(!0)),ft(n)&&(t.impl=o[n],t.impl&&(t.tag=r=Ft(t.impl,{root:t.dom,parent:e,tagName:n},t.dom.innerHTML,e),vt(t.attrs,function(t){return T(r.root,t.name,t.value)}),t.tagName=n,r.mount(),a&&Dt(r,i||r.root),e.__.onUnmount=function(){var t=r.opts.dataIs;zt(r.parent.tags,t,r),zt(r.__.parent.tags,t,r),r.unmount()})))}(t,this,e);if((!t.wasParsedOnce||t.value!==e)&&(t.value=e,t.wasParsedOnce=!0,!y||f||p||r)){if(b||(e=""),!i)return e+="",void(c&&(t.parent=c,"TEXTAREA"===c.tagName?(c.value=e,I||(n.nodeValue=e)):n.nodeValue=e));switch(!0){case ut(e):_=i,Rt.test(_)&&Vt(i,e,n,this);break;case r:Z(n,i===m?!e:e);break;default:t.bool&&(n[i]=e),v&&n.value!==e?n.value=e:b&&!1!==e&&T(n,i,e),p&&n.hidden&&Z(n,!1)}var _}}}}function qt(t){vt(t,Bt.bind(this))}function Kt(t,e,n,i,r){if(!t||!n){var o=t?Ct.call(this):e||this;vt(r,function(t){t.expr&&Bt.call(o,t.expr),i[xt(t.name).replace(u,"")]=t.expr?t.expr.value:t.value})}}function Jt(t){if(!t){var e=Object.keys(o);return e+Jt(e)}return t.filter(function(t){return!/[^-\w]/.test(t)}).reduce(function(t,e){var n=e.trim().toLowerCase();return t+",["+c+'="'+n+'"]'},"")}function Xt(t,e){var n=this.name,i=this.tmpl,r=this.css,s=this.attrs,a=this.onCreate;return o[n]||(Yt(n,i,r,s,a),o[n].class=this.constructor),ye(t,n,e,this),r&&R.inject(),this}function Yt(t,e,n,i,r){return ut(i)&&(r=i,/^[\w-]+\s?=/.test(n)?(i=n,n=""):i=""),n&&(ut(n)?r=n:R.add(n,t)),t=t.toLowerCase(),o[t]={name:t,tmpl:e,attrs:i,fn:r},t}function Zt(t,e,n,i,r){return n&&R.add(n,t),o[t]={name:t,tmpl:e,attrs:i,fn:r},t}function Gt(t,e,n){var i,r,o=[];if(R.inject(),(lt(e)||ut(e))&&(n=e,e=0),ft(t)?(t="*"===t?r=Jt():t+Jt(t.split(/, */)),i=t?X(t):[]):i=t,"*"===e){if(e=r||Jt(),i.tagName)i=X(e,i);else{var s=[];vt(i,function(t){return s.push(X(e,t))}),i=s}e=0}return function t(i){if(i.tagName){var r,s=G(i,c);e&&s!==e&&(s=e,T(i,c,e)),(r=ye(i,s||i.tagName.toLowerCase(),ut(n)?n():n))&&o.push(r)}else i.length&&vt(i,t)}(i),o}var Qt={},Wt=Qt[a]={},te=0;function ee(t,e,n){if(lt(t))ee("__"+te+++"__",t,!0);else{var i=n?Wt:Qt;if(!e){if(D(i[t]))throw new Error("Unregistered mixin: "+t);return i[t]}i[t]=ut(e)?q(e.prototype,i[t]||{})&&e:q(i[t]||{},e)}}function ne(){return vt(r,function(t){return t.update()})}function ie(t){return R.remove(t),delete o[t]}var re=Object.freeze({Tag:Xt,tag:Yt,tag2:Zt,mount:Gt,mixin:ee,update:ne,unregister:ie,version:"v3.13.2"});function oe(t,e){var n,i=this.parent;i&&(dt(n=i.tags[t])?n.splice(e,0,n.splice(n.indexOf(this),1)[0]):Et(i.tags,t,this))}function se(t,e){for(var n,i=this.__.head,r=et();i;)if(n=i.nextSibling,r.appendChild(i),(i=n)===this.__.tail){r.appendChild(i),t.insertBefore(r,e.__.head);break}}function ae(t,e,n){var i={};return i[t.key]=e,t.pos&&(i[t.pos]=n),i}function ue(t,e){t.splice(e,1),this.unmount(),zt(this.parent,this,this.__.tagName,!0)}function le(t,e,n){var i=typeof G(t,f)!==b||Q(t,f),r=G(t,v),s=!!r&&F.hasExpr(r),a=Nt(t),u=o[a],l=t.parentNode,c=Y(),h=At(t),m=G(t,d),g=[],_=t.innerHTML,x=!o[a],w="VIRTUAL"===t.tagName,k=[];return Q(t,p),Q(t,v),(n=F.loopKeys(n)).isLoop=!0,m&&Q(t,d),l.insertBefore(c,t),l.removeChild(t),n.update=function(){n.value=F(n.val,e);var o=n.value,l=et(),d=!dt(o)&&!ft(o),p=c.parentNode,f=[],v=d&&!!o;if(p){d&&(o=o?Object.keys(o).map(function(t){return ae(n,o[t],t)}):[]);var b=0;vt(o,function(c,E){var A=E-b,N=!v&&n.key?ae(n,c,E):c;if(!m||F(m,q(K(e),N))){var C=function(t,e,n,i){return t?i?F(t,n):e[t]:e}(r,c,N,s),O=!d&&i&&typeof c===y||r,S=k.indexOf(C),I=-1===S,M=!I&&O?S:A,T=g[M],L=A>=k.length,j=O&&I||!O&&!T||!g[A];j?((T=be(u,{parent:e,isLoop:!0,isAnonymous:x,tagName:a,root:t.cloneNode(x),item:N,index:A},_)).mount(),L?function(t,e){e?Ut.call(this,t):t.appendChild(this.root)}.apply(T,[l||p,w]):function(t,e,n){n?Ut.apply(this,[t,e]):nt(t,this.root,e.root)}.apply(T,[p,g[A],w]),L||k.splice(A,0,N),g.splice(A,0,T),h&&Et(e.tags,a,T,!0)):M!==A&&O&&((r||mt(o,k[M]))&&(function(t,e,n){n?se.apply(this,[t,e]):nt(t,this.root,e.root)}.apply(T,[p,g[A],w]),g.splice(A,0,g.splice(M,1)[0]),k.splice(A,0,k.splice(M,1)[0])),n.pos&&(T[n.pos]=A),!h&&T.tags&&function(t){var e=this;vt(Object.keys(this.tags),function(n){oe.apply(e.tags[n],[n,t])})}.call(T,A)),q(T.__,{item:N,index:A,parent:e}),f[A]=C,j||T.update(N)}else b++}),function(t,e,n){for(var i=e.length,r=t.length-n;i>r;)i--,ue.apply(e[i],[e,i])}(o,g,b),k=f.slice(),p.insertBefore(l,c)}},n.unmount=function(){vt(g,function(t){t.unmount()})},n}var ce={init:function(t,e,n,i){return this.dom=t,this.attr=n,this.rawValue=i,this.parent=e,this.hasExp=F.hasExpr(i),this},update:function(){var t=this.value,e=this.parent&&$t(this.parent),n=this.dom.__ref||this.tag||this.dom;this.value=this.hasExp?F(this.rawValue,this.parent):this.rawValue,!at(t)&&e&&zt(e.refs,t,n),!at(this.value)&&ft(this.value)?(e&&Et(e.refs,this.value,n,null,this.parent.__.index),this.value!==t&&T(this.dom,this.attr,this.value)):Q(this.dom,this.attr),this.dom.__ref||(this.dom.__ref=n)},unmount:function(){var t=this.tag||this.dom,e=this.parent&&$t(this.parent);!at(this.value)&&e&&zt(e.refs,this.value,t)}};function de(t,e,n,i){return K(ce).init(t,e,n,i)}function pe(t){vt(t,function(t){t.unmount?t.unmount(!0):t.tagName?t.tag.unmount(!0):t.unmount&&t.unmount()})}var fe={init:function(t,e,n){Q(t,d),q(this,{tag:e,expr:n,stub:Y(),pristine:t});var i=t.parentNode;return i.insertBefore(this.stub,t),i.removeChild(t),this},update:function(){this.value=F(this.expr,this.tag),this.stub.parentNode&&(this.value&&!this.current?(this.current=this.pristine.cloneNode(!0),this.stub.parentNode.insertBefore(this.current,this.stub),this.expressions=me.apply(this.tag,[this.current,!0])):!this.value&&this.current&&(this.unmount(),this.current=null,this.expressions=[]),this.value&&qt.call(this.tag,this.expressions))},unmount:function(){this.current&&(this.current._tag?this.current._tag.unmount():this.current.parentNode&&this.current.parentNode.removeChild(this.current)),pe(this.expressions||[])}};function he(t,e,n){return K(fe).init(t,e,n)}function me(t,e){var n=this,i=[];return rt(t,function(r){var o,s,a=r.nodeType;if((e||r!==t)&&(3===a&&"STYLE"!==r.parentNode.tagName&&F.hasExpr(r.nodeValue)&&i.push({dom:r,expr:r.nodeValue}),1===a)){var u="VIRTUAL"===r.tagName;if(o=G(r,p))return u&&T(r,"loopVirtual",!0),i.push(le(r,n,o)),!1;if(o=G(r,d))return i.push(he(r,n,o)),!1;if((o=G(r,c))&&F.hasExpr(o))return i.push({isRtag:!0,expr:o,dom:r,attrs:[].slice.call(r.attributes)}),!1;if(s=At(r),u&&(G(r,"virtualized")&&r.parentElement.removeChild(r),s||G(r,"virtualized")||G(r,"loopVirtual")||(s={tmpl:r.outerHTML})),s&&(r!==t||e)){var l=G(r,c);if(!u||l)return l&&u&&wt("Virtual tags shouldn't be used together with the \""+c+'" attribute - https://github.com/riot/riot/issues/2511'),i.push(Ft(s,{root:r,parent:n},r.innerHTML,n)),!1;T(r,"virtualized",!0);var f=be({tmpl:r.outerHTML},{root:r,parent:n},r.innerHTML);i.push(f)}ve.apply(n,[r,r.attributes,function(t,e){e&&i.push(e)}])}}),i}function ve(t,e,n){var i=this;vt(e,function(e){if(!e)return!1;var r,o=e.name,a=pt(o);mt(l,o)&&t.tagName.toLowerCase()!==s?r=de(t,i,o,e.value):F.hasExpr(e.value)&&(r={dom:t,expr:e.value,attr:o,bool:a}),n(e,r)})}function ge(t){var e=this.__,n=e.isAnonymous,i=e.skipAnonymous;_t(this,"isMounted",t),n&&i||(t?this.trigger("mount"):(this.trigger("unmount"),this.off("*"),this.__.wasCreated=!1))}function be(t,e,n){void 0===t&&(t={}),void 0===e&&(e={});var i,o=e.context||{},s=e.opts||{},l=e.parent,c=e.isLoop,d=!!e.isAnonymous,p=J.skipAnonymousTags&&d,f=e.item,h=e.index,m=t.tmpl,v=[],b=e.root,y=e.tagName||Nt(b),_="virtual"===y,x=!_&&!m;return x||c&&d?i=b:(_||(b.innerHTML=""),i=Ht(m,n,ct(b))),p||z(o),t.name&&b._tag&&b._tag.unmount(!0),_t(o,"__",{impl:t,root:b,skipAnonymous:p,implAttrs:[],isAnonymous:d,instAttrs:[],innerHTML:n,tagName:y,index:h,isLoop:c,isInline:x,item:f,parent:l,listeners:[],virts:[],wasCreated:!1,tail:null,head:null}),[["isMounted",!1],["_riot_id",yt()],["root",b],["opts",s,{writable:!0,enumerable:!0}],["parent",l||null],["tags",{}],["refs",{}],["update",function(t){return function(t,e,n){var i=t.__,r={},o=t.isMounted&&!i.skipAnonymous;return i.isAnonymous&&i.parent&&q(t,i.parent),q(t,e),Kt.apply(t,[i.isLoop,i.parent,i.isAnonymous,r,i.instAttrs]),o&&t.isMounted&&ut(t.shouldUpdate)&&!t.shouldUpdate(e,r)?t:(q(t.opts,r),o&&t.trigger("update",e),qt.call(t,n),o&&t.trigger("updated"),t)}(o,t,v)}],["mixin",function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return vt(e,function(e){var n,i,r=[],o=["init","__proto__"];e=ft(e)?ee(e):e,n=ut(e)?new e:e;var s=Object.getPrototypeOf(n);do{r=r.concat(Object.getOwnPropertyNames(i||n))}while(i=Object.getPrototypeOf(i||n));vt(r,function(e){if(!mt(o,e)){var i=U(n,e)||U(s,e),r=i&&(i.get||i.set);!t.hasOwnProperty(e)&&r?Object.defineProperty(t,e,i):t[e]=ut(n[e])?n[e].bind(t):n[e]}}),n.init&&n.init.bind(t)(t.opts)}),t}.apply(void 0,[o].concat(t))}],["mount",function(){return function(t,e,n,i){var r=t.__,o=r.root;o._tag=t,ve.apply(r.parent,[o,o.attributes,function(e,n){!r.isAnonymous&&ce.isPrototypeOf(n)&&(n.tag=t),e.expr=n,r.instAttrs.push(e)}]),tt(r.impl.attrs,function(t,e){r.implAttrs.push({name:t,value:e})}),ve.apply(t,[o,r.implAttrs,function(t,e){e?n.push(e):T(o,t.name,t.value)}]),Kt.apply(t,[r.isLoop,r.parent,r.isAnonymous,i,r.instAttrs]);var s=ee(a);if(s&&!r.skipAnonymous)for(var u in s)s.hasOwnProperty(u)&&t.mixin(s[u]);if(r.impl.fn&&r.impl.fn.call(t,i),r.skipAnonymous||t.trigger("before-mount"),vt(me.apply(t,[e,r.isAnonymous]),function(t){return n.push(t)}),t.update(r.item),!r.isAnonymous&&!r.isInline)for(;e.firstChild;)o.appendChild(e.firstChild);if(_t(t,"root",o),!r.skipAnonymous&&t.parent){var l=$t(t.parent);l.one(l.isMounted?"updated":"mount",function(){ge.call(t,!0)})}else ge.call(t,!0);return t.__.wasCreated=!0,t}(o,i,v,s)}],["unmount",function(t){return function(t,e,n){var i=t.__,o=i.root,s=r.indexOf(t),a=o.parentNode;if(i.skipAnonymous||t.trigger("before-unmount"),tt(i.impl.attrs,function(t){gt(t,u)&&(t=t.slice(u.length)),Q(o,t)}),t.__.listeners.forEach(function(t){Object.keys(t[g]).forEach(function(e){t.removeEventListener(e,t[g][e])})}),-1!==s&&r.splice(s,1),i.parent&&!i.isAnonymous){var l=$t(i.parent);i.isVirtual?Object.keys(t.tags).forEach(function(e){return zt(l.tags,e,t.tags[e])}):zt(l.tags,i.tagName,t)}return t.__.virts&&vt(t.__.virts,function(t){t.parentNode&&t.parentNode.removeChild(t)}),pe(n),vt(i.instAttrs,function(t){return t.expr&&t.expr.unmount&&t.expr.unmount()}),e?W(o,""):a&&a.removeChild(o),i.onUnmount&&i.onUnmount(),t.isMounted||ge.call(t,!0),ge.call(t,!1),delete o._tag,t}(o,t,v)}]].reduce(function(t,e){var n=e[0],i=e[1],r=e[2];return _t(o,n,i,r),t},q(o,f))}function ye(t,e,n,i){var s,a=o[e],u=o[e].class,l=i||(u?K(u.prototype):{}),c=t._innerHTML=t._innerHTML||t.innerHTML,d=q({root:t,opts:n,context:l},{parent:n?n.parent:null});return a&&t&&(s=be(a,d,c)),s&&s.mount&&(s.mount(!0),mt(r,s)||r.push(s)),s}var _e=Object.freeze({arrayishAdd:Et,getTagName:Nt,inheritParentProps:Ct,mountTo:ye,selectTags:Jt,arrayishRemove:zt,getTag:At,initChildTag:Ft,moveChildTag:oe,makeReplaceVirtual:Dt,getImmediateCustomParentTag:$t,makeVirtual:Ut,moveVirtual:se,unmountAll:pe,createIfDirective:he,createRefDirective:de}),xe=J,we={tmpl:F,brackets:V,styleManager:R,vdom:r,styleNode:R.styleNode,dom:ot,check:ht,misc:kt,tags:_e},ke=Xt,Ee=Yt,Ae=Zt,Ne=Gt,Ce=ee,Oe=ne,Se=ie,Ie=z,Me=q({},re,{observable:z,settings:xe,util:we});t.settings=xe,t.util=we,t.Tag=ke,t.tag=Ee,t.tag2=Ae,t.mount=Ne,t.mixin=Ce,t.update=Oe,t.unregister=Se,t.version="v3.13.2",t.observable=Ie,t.default=Me,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){"use strict";n.r(e);var i=n(0),r=n.n(i),o=(n(2),n(3),n(4),n(5),{init:function(t){},getIndexFromEvent:function(t){var e=t.target.closest("li");return Array.from(e.closest("ul").children).indexOf(e)},touchHandler:function(t){var e=t.changedTouches[0],n="";switch(t.type){case"touchstart":n="mousedown";break;case"touchmove":n="mousemove";break;case"touchend":n="mouseup";break;default:return}var i=document.createEvent("MouseEvent");i.initMouseEvent(n,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}});r.a.mixin("utils",o),r.a.mount("app")},function(t,e,n){!function(t,e){"use strict";var n="isMounted opts".split(" ");function i(t){e.util.styleManager.inject();for(var r=document.querySelectorAll(t+", [data-is="+t+"]"),o=[],s=0;s<r.length;s++){var a,u=r[s],l=u._tag;i.trigger("before-unmount",l),l.unmount(!0),u.innerHTML=l.__.innerHTML,(l.__.instAttrs||[]).map(function(t){u.setAttribute(t.name,t.value)});var c={};for(p in l.opts)c[p]=l.opts[p];c.parent=l.parent,i.trigger("before-mount",c,l);var d=e.mount(u,c)[0];for(var p in l)a=l[p],~n.indexOf(p)||(d[p]=a);d.update(),o.push(d),i.trigger("after-mount",d,l)}return o}e.observable(i),e.reload=i,e.default&&(e.default.reload=i),t.reload=i,t.default=i,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(0))},function(t,e,n){n(0).tag2("app",'<header class="z-depth-1"> <input-form visible="{true}" onlostfocus="{todo.remove}" save_cb="{todo.add}"></input-form> <div class="switch"> <label> Edit <input type="checkbox" onclick="{todo.toggleEdit}" checked="{this.state.editMode}"><span class="lever"></span> </label> </div> <div class="switch"> <label> Show finished <input type="checkbox" onclick="{todo.toggleShowCompleted}" checked="{this.state.showCompleted}"><span class="lever"></span> </label> </div> </header> <main> <item-list items="{state.items}" toggle_complete_cb="{todo.toggleComplete}" remove_item_cb="{todo.remove}" move_item_cb="{todo.move}" update_item_cb="{todo.update}" edit_mode="{this.state.editMode}" show_completed="{this.state.showCompleted}"></item-list> </main>','app .switch,[data-is="app"] .switch{ display: inline-block; margin-left: 1em; padding-bottom: 0.5em; background-color: white; } app .switch label .lever,[data-is="app"] .switch label .lever{ margin-left: 3px; } app header,[data-is="app"] header{ z-index: 100; width: 100vw; height: 18vh; background-color: white; } app main,[data-is="app"] main{ height: 82vh; overflow: scroll; -webkit-overflow-scrolling: touch; } app footer.page-foter,[data-is="app"] footer.page-foter{ background-color: black; }',"",function(t){this.mixin("utils"),this.state={items:[],editMode:!1,showCompleted:!0},this.restoreState=(()=>{let t=JSON.parse(window.localStorage.getItem("riotToDo"));t&&(this.state=t)}),this.persistState=(()=>{window.localStorage.setItem("riotToDo",JSON.stringify(this.state))}),this.on("before-mount",this.restoreState),todoControler={toggleEdit:()=>{this.state.editMode=!this.state.editMode,this.persistState()},toggleShowCompleted:()=>{this.state.showCompleted=!this.state.showCompleted,this.persistState()},toggleComplete:t=>{let e=this.getIndexFromEvent(t);this.state.items[e].done=!this.state.items[e].done,this.persistState()},add:t=>{this.state.items.unshift({text:t,done:!1}),this.persistState(),this.update()},update:(t,e)=>{this.state.items[e].text=t,this.persistState(),this.update()},remove:t=>{let e=t.target.closest("li"),n=this.getIndexFromEvent(t);e.classList.add("scale-out"),setTimeout(()=>{e.classList.remove("scale-out"),this.state.items.splice(n,1),this.persistState(),this.update()},200)},move:(t,e)=>{this.state.items.splice(e,0,this.state.items.splice(t,1)[0]),this.persistState(),this.update()}},this.todo=todoControler})},function(t,e,n){n(0).tag2("input-form",'<form class="cyan lighten-5" onsubmit="{add}"> <div class="inputarea"> <div class="input-field inline"> <input ref="inputField" id="newItem" type="text" onkeyup="{edit}"> <label for="newItem">Add new Item...</label> </div><a class="btn-floating {disabled: !this.text}" onclick="{add}"><i class="material-icons">add</i></a> </div> </form>','input-form form,[data-is="input-form"] form{ padding-top: 1em; display: flex; justify-content: center; } input-form #newItem,[data-is="input-form"] #newItem{ font-size: 1.4rem; margin-right: 1em; width: 70vw; }',"",function(t){this.text="",this.edit=(t=>{this.text=t.target.value}),this.add=(t=>{this.text&&(this.opts.save_cb(this.text),this.text="",this.refs.inputField.value="",this.refs.inputField.focus()),t.preventDefault()})})},function(t,e,n){n(0).tag2("item-list",'<div class="todolist"> <ul class="collection" id="todolist"> <li class="collection-item scale-transition" each="{item in this.opts.items}" if="{this.opts.show_completed &amp;&amp; item.done || !item.done}"> <label> <div if="{!this.opts.edit_mode}"> <input type="checkbox" checked="{item.done}" onclick="{this.opts.toggle_complete_cb}"><span class="{done: item.done}" onclick="{edit}">{item.text}</span> </div> <div if="{this.opts.edit_mode}"><a class="waves-effect waves-light btn-flat" onclick="{this.opts.remove_item_cb}"><i class="material-icons">remove_circle</i></a><span class="{done: item.done}" onclick="{edit}">{item.text}</span><a class="secondary-content drag_handle"><i class="material-icons">drag_handle</i></a></div> </label> </li> </ul> <div class="modal" id="modal" ref="modal"> <div class="modal-content"> <form onsubmit="{saveEdit}"> <div class="input-field"> <input ref="editInput" type="text" id="editItem" value="Text"> <label for="editItem">Edit</label> </div> </form> </div> <div class="modal-footer"><a class="modal-close waves-effect waves-red btn-flat">Cancel </a><a class="modal-close waves-effect waves-green btn-flat" onclick="{saveEdit}">Save </a></div> </div> </div>','item-list ul,[data-is="item-list"] ul{ height: 100% } item-list .todolist [type="checkbox"]+span.done,[data-is="item-list"] .todolist [type="checkbox"]+span.done{ text-decoration: line-through; color: #9e9e9e; } item-list .todolist span.done,[data-is="item-list"] .todolist span.done{ text-decoration: line-through; color: #9e9e9e; } item-list .todolist .collection .collection-item,[data-is="item-list"] .todolist .collection .collection-item{ line-height: 2.5rem; } item-list .todolist [type="checkbox"]+span,[data-is="item-list"] .todolist [type="checkbox"]+span{ font-size: 1.3rem; color: black; } item-list .todolist span,[data-is="item-list"] .todolist span{ font-size: 1.3rem; color: black; } item-list .todolist,[data-is="item-list"] .todolist{ position: relative; overflow: auto; }','class="z-depth-1"',function(t){this.mixin("utils"),this.selectedItemIndex=0,this.sort={from:0,to:0},this.updateEditMode=(()=>{this.opts.edit_mode?$("#todolist").sortable("enable"):$("#todolist").sortable("disable")}),this.edit=(t=>{this.opts.edit_mode&&(this.modal.open(),this.selectedItemIndex=this.getIndexFromEvent(event),this.refs.editInput.value=t.target.innerHTML,this.refs.editInput.focus())}),this.saveEdit=(t=>{this.modal.close(),this.opts.update_item_cb(this.refs.editInput.value,this.selectedItemIndex),t.preventDefault()}),this.on("mount",()=>{document.addEventListener("touchstart",this.touchHandler,!0),document.addEventListener("touchmove",this.touchHandler,!0),document.addEventListener("touchend",this.touchHandler,!0),document.addEventListener("touchcancel",this.touchHandler,!0),this.modal=M.Modal.init(this.refs.modal,{}),$("#todolist").sortable({handle:".drag_handle",axis:"y",start:(t,e)=>{this.sort.from=this.getIndexFromEvent(t.originalEvent)},stop:(t,e)=>{this.sort.to=this.getIndexFromEvent(t.originalEvent),this.opts.move_item_cb(this.sort.from,this.sort.to)}}),$("#todolist").disableSelection(),this.updateEditMode()}),this.on("update",()=>{this.updateEditMode()})})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Jpb3QvcmlvdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Jpb3QtaG90LXJlbG9hZC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdGFncy9hcHAucHVnIiwid2VicGFjazovLy8uL3NyYy90YWdzL2lucHV0LWZvcm0ucHVnIiwid2VicGFjazovLy8uL3NyYy90YWdzL2l0ZW0tbGlzdC5wdWciXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCIkIiwic2VsZWN0b3IiLCJjdHgiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzdHlsZU5vZGUiLCJjc3NUZXh0UHJvcCIsIl9fVEFHU19DQUNIRSIsIl9fVEFHX0lNUEwiLCJZSUVMRF9UQUciLCJHTE9CQUxfTUlYSU4iLCJBVFRSU19QUkVGSVgiLCJSRUZfRElSRUNUSVZFUyIsIklTX0RJUkVDVElWRSIsIkNPTkRJVElPTkFMX0RJUkVDVElWRSIsIkxPT1BfRElSRUNUSVZFIiwiTE9PUF9OT19SRU9SREVSX0RJUkVDVElWRSIsIlNIT1dfRElSRUNUSVZFIiwiSElERV9ESVJFQ1RJVkUiLCJLRVlfRElSRUNUSVZFIiwiUklPVF9FVkVOVFNfS0VZIiwiVF9TVFJJTkciLCJUX09CSkVDVCIsIlRfVU5ERUYiLCJUX0ZVTkNUSU9OIiwiWExJTktfTlMiLCJTVkdfTlMiLCJYTElOS19SRUdFWCIsIldJTiIsIndpbmRvdyIsInVuZGVmaW5lZCIsIlJFX0VWRU5UU19QUkVGSVgiLCJSRV9IVE1MX0FUVFJTIiwiQ0FTRV9TRU5TSVRJVkVfQVRUUklCVVRFUyIsInZpZXdib3giLCJwcmVzZXJ2ZWFzcGVjdHJhdGlvIiwiUkVfQk9PTF9BVFRSUyIsIklFX1ZFUlNJT04iLCJkb2N1bWVudE1vZGUiLCJtYWtlRWxlbWVudCIsImNyZWF0ZUVsZW1lbnROUyIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJkb20iLCJ2YWwiLCJ4bGluayIsImV4ZWMiLCJzZXRBdHRyaWJ1dGVOUyIsIm5ld05vZGUiLCJ1c2VyTm9kZSIsImJ5TmFtZSIsIm5lZWRzSW5qZWN0IiwiaWQiLCJwYXJlbnROb2RlIiwicmVwbGFjZUNoaWxkIiwiaGVhZCIsImFwcGVuZENoaWxkIiwic3R5bGVTaGVldCIsInN0eWxlTWFuYWdlciIsImFkZCIsImNzcyIsImluamVjdCIsInN0eWxlIiwia2V5cyIsIm1hcCIsImsiLCJqb2luIiwiY3NzVGV4dCIsImlubmVySFRNTCIsInJlbW92ZSIsInNraXBSZWdleCIsImJlZm9yZVJlQ2hhcnMiLCJiZWZvcmVSZVdvcmRzIiwid29yZHNMYXN0Q2hhciIsInJlZHVjZSIsInciLCJzbGljZSIsIlJFX1JFR0VYIiwiUkVfVk5fQ0hBUiIsInByZXYiLCJjb2RlIiwicG9zIiwidGVzdCIsInN0YXJ0IiwicmUiLCJsYXN0SW5kZXgiLCJtYXRjaCIsIm5leHQiLCJsZW5ndGgiLCJpbmRleE9mIiwiZW5kIiwiYnJhY2tldHMiLCJVTkRFRiIsIl9yZWdleCIsIl9zZXR0aW5ncyIsIlJFR0xPQiIsIlJfU1RSSU5HUyIsIlNfUUJMT0NLUyIsInNvdXJjZSIsIlVOU1VQUE9SVEVEIiwiUmVnRXhwIiwiTkVFRF9FU0NBUEUiLCJTX1FCTE9DSzIiLCJGSU5EQlJBQ0VTIiwiKCIsIlsiLCJ7IiwiREVGQVVMVCIsIl9wYWlycyIsImNhY2hlZEJyYWNrZXRzIiwiX2NhY2hlIiwiX2xvb3BiYWNrIiwiX3Jld3JpdGUiLCJicCIsInJlcGxhY2UiLCJnbG9iYWwiLCJfY3JlYXRlIiwicGFpciIsImFyciIsInNwbGl0IiwiRXJyb3IiLCJjb25jYXQiLCJfYnJhY2tldHMiLCJyZU9ySWR4IiwiX3Jlc2V0Iiwic3RyIiwidG1wbCIsIl9icCIsImlzZXhwciIsIm1hcmsiLCJwYXJ0cyIsInFibG9ja3MiLCJwcmV2U3RyIiwiaW5kZXgiLCJjaCIsInJlY2giLCJpeCIsInB1c2hRQmxvY2siLCJ1bmVzY2FwZVN0ciIsInB1c2giLCJfcG9zIiwiX2xhc3RJbmRleCIsInNsYXNoIiwiaGFzRXhwciIsImxvb3BLZXlzIiwiZXhwciIsInRyaW0iLCJhcnJheSIsInNldCIsImIiLCJzZXR0aW5ncyIsInJpb3QiLCJSX01MQ09NTVMiLCJfdG1wbCIsImRhdGEiLCJSRV9EUVVPVEUiLCJxc3RyIiwiaiIsImxpc3QiLCJfcGFyc2VFeHByIiwiUkVfUUJNQVJLIiwiXyIsIl9nZXRUbXBsIiwiRnVuY3Rpb24iLCJlcnIiLCJyaW90RGF0YSIsInRhZ05hbWUiLCJfXyIsIl9yaW90X2lkIiwiZXJyb3JIYW5kbGVyIiwiY29uc29sZSIsImVycm9yIiwibWVzc2FnZSIsImxvZyIsInRoaXMiLCJjbGVhckNhY2hlIiwiUkVfQ1NOQU1FIiwiUkVfQlJFTkQiLCJhc1RleHQiLCJjbnQiLCJqc2IiLCJyaWdodENvbnRleHQiLCJza2lwQnJhY2VzIiwiX3dyYXBFeHByIiwibW0iLCJsdiIsImlyIiwiSlNfQ09OVEVYVCIsIkpTX1ZBUk5BTUUiLCJKU19OT1BST1BTIiwidGIiLCJtdmFyIiwidmVyc2lvbiIsIm9ic2VydmFibGUiLCJlbCIsImNhbGxiYWNrcyIsIkFycmF5IiwiZGVmaW5lUHJvcGVydGllcyIsIm9uIiwiZXZlbnQiLCJmbiIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwib2ZmIiwiY2IiLCJzcGxpY2UiLCJvbmUiLCJhcHBseSIsImFyZ3VtZW50cyIsInRyaWdnZXIiLCJmbnMiLCJhcmd1bWVudHMkMSIsImFyZ2xlbiIsImFyZ3MiLCJnZXRQcm9wRGVzY3JpcHRvciIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImlzVW5kZWZpbmVkIiwiaXNXcml0YWJsZSIsIm9iaiIsImRlc2NyaXB0b3IiLCJleHRlbmQiLCJzcmMiLCJza2lwQW5vbnltb3VzVGFncyIsImtlZXBWYWx1ZUF0dHJpYnV0ZXMiLCJhdXRvVXBkYXRlIiwiJCQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY3JlYXRlRE9NUGxhY2Vob2xkZXIiLCJjcmVhdGVUZXh0Tm9kZSIsInRvZ2dsZVZpc2liaWxpdHkiLCJzaG93IiwiZGlzcGxheSIsImhpZGRlbiIsImdldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInNldElubmVySFRNTCIsImNvbnRhaW5lciIsImh0bWwiLCJpc1N2ZyIsIm5vZGUiLCJvd25lckRvY3VtZW50IiwiaW1wb3J0Tm9kZSIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsImRvY3VtZW50RWxlbWVudCIsIndhbGtBdHRyaWJ1dGVzIiwidG9Mb3dlckNhc2UiLCJjcmVhdGVGcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJzYWZlSW5zZXJ0Iiwicm9vdCIsImN1cnIiLCJpbnNlcnRCZWZvcmUiLCJzdHlsZU9iamVjdFRvU3RyaW5nIiwiYWNjIiwicHJvcCIsIndhbGtOb2RlcyIsImNvbnRleHQiLCJyZXMiLCJmaXJzdENoaWxkIiwibmV4dFNpYmxpbmciLCJmcmVlemUiLCJta0VsIiwic2V0QXR0ciIsImdldEF0dHIiLCJyZW1BdHRyIiwid2Fsa0F0dHJzIiwiY3JlYXRlRnJhZyIsImlzTmlsIiwiaXNCbGFuayIsImlzRnVuY3Rpb24iLCJpc09iamVjdCIsIm93bmVyIiwib3duZXJTVkdFbGVtZW50IiwiaXNBcnJheSIsImlzQm9vbEF0dHIiLCJpc1N0cmluZyIsImNoZWNrIiwiY29udGFpbnMiLCJpdGVtIiwiZWFjaCIsImxlbiIsInN0YXJ0c1dpdGgiLCJ1aWQiLCJkZWZpbmUiLCJvcHRpb25zIiwidG9DYW1lbCIsInRvVXBwZXJDYXNlIiwid2FybiIsIm1pc2MiLCJvYmplY3RDcmVhdGUiLCJhcnJheWlzaEFkZCIsImVuc3VyZUFycmF5IiwiZGVzdCIsImlzQXJyIiwiaGFzSW5kZXgiLCJvbGRJbmRleCIsImdldE5hbWUiLCJza2lwRGF0YUlzIiwiY2hpbGQiLCJuYW1lZFRhZyIsImluaGVyaXRQYXJlbnRQcm9wcyIsInBhcmVudCIsInJlSGFzWWllbGQiLCJyZVlpZWxkQWxsIiwicmVZaWVsZFNyYyIsInJlWWllbGREZXN0Iiwicm9vdEVscyIsInRyIiwidGgiLCJ0ZCIsImNvbCIsInRibFRhZ3MiLCJHRU5FUklDIiwiU1ZHIiwibWtkb20iLCJyZWYiLCJ0ZXh0IiwiZGVmIiwicmVwbGFjZVlpZWxkIiwic2VsZWN0Iiwic2VsZWN0ZWRJbmRleCIsInRuYW1lIiwiY2hpbGRFbGVtZW50Q291bnQiLCJzcGVjaWFsVGFncyIsIkVWRU5UX0FUVFJfUkUiLCJnZXRJbW1lZGlhdGVDdXN0b21QYXJlbnQiLCJ0YWciLCJwdGFnIiwiaXNBbm9ueW1vdXMiLCJzZXRFdmVudEhhbmRsZXIiLCJoYW5kbGVyIiwiZXZlbnROYW1lIiwiZSIsImN1cnJlbnRUYXJnZXQiLCJ0YXJnZXQiLCJzcmNFbGVtZW50Iiwid2hpY2giLCJjaGFyQ29kZSIsImtleUNvZGUiLCJwcmV2ZW50VXBkYXRlIiwiaXNNb3VudGVkIiwidXBkYXRlIiwibGlzdGVuZXJzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJpbml0Q2hpbGQiLCJvcHRzIiwiY3JlYXRlVGFnIiwidGFncyIsImFycmF5aXNoUmVtb3ZlIiwibWFrZVZpcnR1YWwiLCJzaWIiLCJ0YWlsIiwiZnJhZyIsInZpcnRzIiwibWFrZVJlcGxhY2VWaXJ0dWFsIiwidXBkYXRlRXhwcmVzc2lvbiIsImF0dHJOYW1lIiwibm9ybWFsaXplQXR0ck5hbWUiLCJhdHRyIiwiaXNUb2dnbGUiLCJpc1ZpcnR1YWwiLCJpc1N0eWxlQXR0ciIsImlzQ2xhc3NBdHRyIiwiaXNWYWx1ZUF0dHIiLCJ3YXNDcmVhdGVkIiwibW91bnQiLCJoYXNWYWx1ZSIsImlzT2JqIiwiSlNPTiIsInN0cmluZ2lmeSIsIndhc1BhcnNlZE9uY2UiLCJib29sIiwiaXNSdGFnIiwiX3RhZyIsInVubW91bnQiLCJpbXBsIiwiYXR0cnMiLCJhIiwib25Vbm1vdW50IiwiZGVsTmFtZSIsImRhdGFJcyIsInVwZGF0ZURhdGFJcyIsIm5vZGVWYWx1ZSIsImF0dHJpYnV0ZSIsImV4cHJlc3Npb25zIiwidXBkYXRlT3B0cyIsImlzTG9vcCIsImluc3RBdHRycyIsInF1ZXJ5IiwiZmlsdGVyIiwiVGFnIiwib25DcmVhdGUiLCJjbGFzcyIsImNvbnN0cnVjdG9yIiwibW91bnQkMSIsInRhZzIiLCJlbGVtIiwiYWxsVGFncyIsIm5vZGVMaXN0IiwiX2VsIiwicHVzaFRhZ3NUbyIsInJpb3RUYWciLCJtaXhpbnMiLCJnbG9iYWxzIiwibWl4aW5zX2lkIiwibWl4aW4iLCJtaXgiLCJnIiwic3RvcmUiLCJ1cGRhdGUkMSIsInVucmVnaXN0ZXIiLCJjb3JlIiwibW92ZUNoaWxkIiwibmV3UG9zIiwibW92ZVZpcnR1YWwiLCJta2l0ZW0iLCJfZWFjaCIsIm11c3RSZW9yZGVyIiwia2V5QXR0ciIsImhhc0tleUF0dHJFeHByIiwicGxhY2Vob2xkZXIiLCJpZkV4cHIiLCJvbGRJdGVtcyIsInJlbW92ZUNoaWxkIiwiaXRlbXMiLCJ0bXBJdGVtcyIsImhhc0tleXMiLCJmaWx0ZXJlZEl0ZW1zQ291bnQiLCJfaXRlbSIsIml0ZW1JZCIsIm9yaWdpbmFsSXRlbSIsImtleWVkSXRlbSIsImdldEl0ZW1JZCIsImRvUmVvcmRlciIsIm9sZFBvcyIsImlzTmV3IiwibXVzdEFwcGVuZCIsIm11c3RDcmVhdGUiLCJjbG9uZU5vZGUiLCJuZXh0VGFnIiwidGhpcyQxIiwidW5tb3VudFJlZHVuZGFudCIsIlJlZkV4cHIiLCJpbml0IiwiYXR0clZhbHVlIiwicmF3VmFsdWUiLCJoYXNFeHAiLCJvbGQiLCJjdXN0b21QYXJlbnQiLCJ0YWdPckRvbSIsIl9fcmVmIiwicmVmcyIsImNyZWF0ZVJlZkRpcmVjdGl2ZSIsInVubW91bnRBbGwiLCJJZkV4cHIiLCJzdHViIiwicHJpc3RpbmUiLCJjdXJyZW50IiwicGFyc2VFeHByZXNzaW9ucyIsImNyZWF0ZUlmRGlyZWN0aXZlIiwibXVzdEluY2x1ZGVSb290IiwidGFnSW1wbCIsInR5cGUiLCJub2RlVHlwZSIsImF0dHJpYnV0ZXMiLCJwYXJlbnRFbGVtZW50Iiwib3V0ZXJIVE1MIiwiaGFzSXNEaXJlY3RpdmUiLCJwYXJzZUF0dHJpYnV0ZXMiLCJzZXRNb3VudFN0YXRlIiwic2tpcEFub255bW91cyIsImNvbmYiLCJpc0lubGluZSIsImltcGxBdHRycyIsIm5leHRPcHRzIiwiY2FuVHJpZ2dlciIsInNob3VsZFVwZGF0ZSIsImNvbXBvbmVudFVwZGF0ZSIsInRhZyQkMSIsImluc3RhbmNlIiwicHJvcHMiLCJwcm9wc0JsYWNrbGlzdCIsInByb3RvIiwiZ2V0UHJvdG90eXBlT2YiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiaGFzR2V0dGVyU2V0dGVyIiwiaXNQcm90b3R5cGVPZiIsInYiLCJnbG9iYWxNaXhpbiIsImNvbXBvbmVudE1vdW50IiwibXVzdEtlZXBSb290IiwidGFnSW5kZXgiLCJmb3JFYWNoIiwidGFnVW5tb3VudCIsImltcGxDbGFzcyIsIl9pbm5lckhUTUwiLCJnZXRUYWdOYW1lIiwibW91bnRUbyIsInNlbGVjdFRhZ3MiLCJnZXRUYWciLCJpbml0Q2hpbGRUYWciLCJtb3ZlQ2hpbGRUYWciLCJnZXRJbW1lZGlhdGVDdXN0b21QYXJlbnRUYWciLCJzZXR0aW5ncyQxIiwidXRpbCIsInZkb20iLCJUYWckMSIsInRhZyQxIiwidGFnMiQxIiwibW91bnQkMiIsIm1peGluJDEiLCJ1cGRhdGUkMiIsInVucmVnaXN0ZXIkMSIsIm9ic2VydmFibGUkMSIsInJpb3QkMSIsImRlZmF1bHQiLCJmYWN0b3J5IiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsInJpb3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyIsInJpb3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0IiwidXRpbHMiLCJnZXRJbmRleEZyb21FdmVudCIsImxpIiwiY2xvc2VzdCIsImZyb20iLCJjaGlsZHJlbiIsInRvdWNoSGFuZGxlciIsImZpcnN0IiwiY2hhbmdlZFRvdWNoZXMiLCJzaW11bGF0ZWRFdmVudCIsImNyZWF0ZUV2ZW50IiwiaW5pdE1vdXNlRXZlbnQiLCJzY3JlZW5YIiwic2NyZWVuWSIsImNsaWVudFgiLCJjbGllbnRZIiwiZGlzcGF0Y2hFdmVudCIsIm5vblN0YXRlIiwicmVsb2FkIiwiZWxlbXMiLCJvbGRUYWciLCJuZXdPcHRzIiwibmV3VGFnIiwic3RhdGUiLCJlZGl0TW9kZSIsInNob3dDb21wbGV0ZWQiLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJwZXJzaXN0U3RhdGUiLCJzZXRJdGVtIiwicmVzdG9yZVN0YXRlIiwidG9nZ2xlRWRpdCIsImRvbmUiLCJjbGFzc0xpc3QiLCJlZGl0Iiwic2F2ZV9jYiIsInNlbGVjdGVkSXRlbUluZGV4Iiwic29ydCIsInRvIiwidXBkYXRlRWRpdE1vZGUiLCJlZGl0SW5wdXQiLCJmb2N1cyIsInNhdmVFZGl0IiwibW9kYWwiLCJjbG9zZSIsInVwZGF0ZV9pdGVtX2NiIiwicHJldmVudERlZmF1bHQiLCJNIiwiTW9kYWwiLCJzb3J0YWJsZSIsImhhbmRsZSIsInVpIiwib3JpZ2luYWxFdmVudCJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxF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QWhXLEtBQUE2VixrQkFBQXBVLEVBQUF3WCw2QkFJRmpaLEtBQUFrWSxLQUFBQyxHQUFBblksS0FBQTZWLGtCQUFBcFUsRUFBQXdYIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9wdWJsaWMvXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbiIsIi8qIFJpb3QgdjMuMTMuMiwgQGxpY2Vuc2UgTUlUICovXG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBmYWN0b3J5KGV4cG9ydHMpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKFsnZXhwb3J0cyddLCBmYWN0b3J5KSA6XG4gIChmYWN0b3J5KChnbG9iYWwucmlvdCA9IHt9KSkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKGV4cG9ydHMpIHsgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qKlxuICAgKiBTaG9ydGVyIGFuZCBmYXN0IHdheSB0byBzZWxlY3QgYSBzaW5nbGUgbm9kZSBpbiB0aGUgRE9NXG4gICAqIEBwYXJhbSAgIHsgU3RyaW5nIH0gc2VsZWN0b3IgLSB1bmlxdWUgZG9tIHNlbGVjdG9yXG4gICAqIEBwYXJhbSAgIHsgT2JqZWN0IH0gY3R4IC0gRE9NIG5vZGUgd2hlcmUgdGhlIHRhcmdldCBvZiBvdXIgc2VhcmNoIHdpbGwgaXMgbG9jYXRlZFxuICAgKiBAcmV0dXJucyB7IE9iamVjdCB9IGRvbSBub2RlIGZvdW5kXG4gICAqL1xuICBmdW5jdGlvbiAkKHNlbGVjdG9yLCBjdHgpIHtcbiAgICByZXR1cm4gKGN0eCB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvcihzZWxlY3RvcilcbiAgfVxuXG4gIHZhclxuICAgIC8vIGJlIGF3YXJlLCBpbnRlcm5hbCB1c2FnZVxuICAgIC8vIEFUVEVOVElPTjogcHJlZml4IHRoZSBnbG9iYWwgZHluYW1pYyB2YXJpYWJsZXMgd2l0aCBgX19gXG4gICAgLy8gdGFncyBpbnN0YW5jZXMgY2FjaGVcbiAgICBfX1RBR1NfQ0FDSEUgPSBbXSxcbiAgICAvLyB0YWdzIGltcGxlbWVudGF0aW9uIGNhY2hlXG4gICAgX19UQUdfSU1QTCA9IHt9LFxuICAgIFlJRUxEX1RBRyA9ICd5aWVsZCcsXG5cbiAgICAvKipcbiAgICAgKiBDb25zdFxuICAgICAqL1xuICAgIEdMT0JBTF9NSVhJTiA9ICdfX2dsb2JhbF9taXhpbicsXG5cbiAgICAvLyByaW90IHNwZWNpZmljIHByZWZpeGVzIG9yIGF0dHJpYnV0ZXNcbiAgICBBVFRSU19QUkVGSVggPSAncmlvdC0nLFxuXG4gICAgLy8gUmlvdCBEaXJlY3RpdmVzXG4gICAgUkVGX0RJUkVDVElWRVMgPSBbJ3JlZicsICdkYXRhLXJlZiddLFxuICAgIElTX0RJUkVDVElWRSA9ICdkYXRhLWlzJyxcbiAgICBDT05ESVRJT05BTF9ESVJFQ1RJVkUgPSAnaWYnLFxuICAgIExPT1BfRElSRUNUSVZFID0gJ2VhY2gnLFxuICAgIExPT1BfTk9fUkVPUkRFUl9ESVJFQ1RJVkUgPSAnbm8tcmVvcmRlcicsXG4gICAgU0hPV19ESVJFQ1RJVkUgPSAnc2hvdycsXG4gICAgSElERV9ESVJFQ1RJVkUgPSAnaGlkZScsXG4gICAgS0VZX0RJUkVDVElWRSA9ICdrZXknLFxuICAgIFJJT1RfRVZFTlRTX0tFWSA9ICdfX3Jpb3QtZXZlbnRzX18nLFxuXG4gICAgLy8gZm9yIHR5cGVvZiA9PSAnJyBjb21wYXJpc29uc1xuICAgIFRfU1RSSU5HID0gJ3N0cmluZycsXG4gICAgVF9PQkpFQ1QgPSAnb2JqZWN0JyxcbiAgICBUX1VOREVGICA9ICd1bmRlZmluZWQnLFxuICAgIFRfRlVOQ1RJT04gPSAnZnVuY3Rpb24nLFxuXG4gICAgWExJTktfTlMgPSAnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycsXG4gICAgU1ZHX05TID0gJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyxcbiAgICBYTElOS19SRUdFWCA9IC9eeGxpbms6KFxcdyspLyxcblxuICAgIFdJTiA9IHR5cGVvZiB3aW5kb3cgPT09IFRfVU5ERUYgPyAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyB1bmRlZmluZWQgOiB3aW5kb3csXG5cbiAgICAvLyBzcGVjaWFsIG5hdGl2ZSB0YWdzIHRoYXQgY2Fubm90IGJlIHRyZWF0ZWQgbGlrZSB0aGUgb3RoZXJzXG4gICAgUkVfU1BFQ0lBTF9UQUdTID0gL14oPzp0KD86Ym9keXxoZWFkfGZvb3R8W3JoZF0pfGNhcHRpb258Y29sKD86Z3JvdXApP3xvcHQoPzppb258Z3JvdXApKSQvLFxuICAgIFJFX1NQRUNJQUxfVEFHU19OT19PUFRJT04gPSAvXig/OnQoPzpib2R5fGhlYWR8Zm9vdHxbcmhkXSl8Y2FwdGlvbnxjb2woPzpncm91cCk/KSQvLFxuICAgIFJFX0VWRU5UU19QUkVGSVggPSAvXm9uLyxcbiAgICBSRV9IVE1MX0FUVFJTID0gLyhbLVxcd10rKSA/PSA/KD86XCIoW15cIl0qKXwnKFteJ10qKXwoe1tefV0qfSkpL2csXG4gICAgLy8gc29tZSBET00gYXR0cmlidXRlcyBtdXN0IGJlIG5vcm1hbGl6ZWRcbiAgICBDQVNFX1NFTlNJVElWRV9BVFRSSUJVVEVTID0ge1xuICAgICAgJ3ZpZXdib3gnOiAndmlld0JveCcsXG4gICAgICAncHJlc2VydmVhc3BlY3RyYXRpbyc6ICdwcmVzZXJ2ZUFzcGVjdFJhdGlvJ1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogTWF0Y2hlcyBib29sZWFuIEhUTUwgYXR0cmlidXRlcyBpbiB0aGUgcmlvdCB0YWcgZGVmaW5pdGlvbi5cbiAgICAgKiBXaXRoIGEgbG9uZyBsaXN0IGxpa2UgdGhpcywgYSByZWdleCBpcyBmYXN0ZXIgdGhhbiBgW10uaW5kZXhPZmAgaW4gbW9zdCBicm93c2Vycy5cbiAgICAgKiBAY29uc3Qge1JlZ0V4cH1cbiAgICAgKiBAc2VlIFthdHRyaWJ1dGVzLm1kXShodHRwczovL2dpdGh1Yi5jb20vcmlvdC9jb21waWxlci9ibG9iL2Rldi9kb2MvYXR0cmlidXRlcy5tZClcbiAgICAgKi9cbiAgICBSRV9CT09MX0FUVFJTID0gL14oPzpkaXNhYmxlZHxjaGVja2VkfHJlYWRvbmx5fHJlcXVpcmVkfGFsbG93ZnVsbHNjcmVlbnxhdXRvKD86Zm9jdXN8cGxheSl8Y29tcGFjdHxjb250cm9sc3xkZWZhdWx0fGZvcm1ub3ZhbGlkYXRlfGhpZGRlbnxpc21hcHxpdGVtc2NvcGV8bG9vcHxtdWx0aXBsZXxtdXRlZHxubyg/OnJlc2l6ZXxzaGFkZXx2YWxpZGF0ZXx3cmFwKT98b3BlbnxyZXZlcnNlZHxzZWFtbGVzc3xzZWxlY3RlZHxzb3J0YWJsZXx0cnVlc3BlZWR8dHlwZW11c3RtYXRjaCkkLyxcbiAgICAvLyB2ZXJzaW9uIyBmb3IgSUUgOC0xMSwgMCBmb3Igb3RoZXJzXG4gICAgSUVfVkVSU0lPTiA9IChXSU4gJiYgV0lOLmRvY3VtZW50IHx8IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIHt9KS5kb2N1bWVudE1vZGUgfCAwO1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBnZW5lcmljIERPTSBub2RlXG4gICAqIEBwYXJhbSAgIHsgU3RyaW5nIH0gbmFtZSAtIG5hbWUgb2YgdGhlIERPTSBub2RlIHdlIHdhbnQgdG8gY3JlYXRlXG4gICAqIEByZXR1cm5zIHsgT2JqZWN0IH0gRE9NIG5vZGUganVzdCBjcmVhdGVkXG4gICAqL1xuICBmdW5jdGlvbiBtYWtlRWxlbWVudChuYW1lKSB7XG4gICAgcmV0dXJuIG5hbWUgPT09ICdzdmcnID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFNWR19OUywgbmFtZSkgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUpXG4gIH1cblxuICAvKipcbiAgICogU2V0IGFueSBET00gYXR0cmlidXRlXG4gICAqIEBwYXJhbSB7IE9iamVjdCB9IGRvbSAtIERPTSBub2RlIHdlIHdhbnQgdG8gdXBkYXRlXG4gICAqIEBwYXJhbSB7IFN0cmluZyB9IG5hbWUgLSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB3ZSB3YW50IHRvIHNldFxuICAgKiBAcGFyYW0geyBTdHJpbmcgfSB2YWwgLSB2YWx1ZSBvZiB0aGUgcHJvcGVydHkgd2Ugd2FudCB0byBzZXRcbiAgICovXG4gIGZ1bmN0aW9uIHNldEF0dHJpYnV0ZShkb20sIG5hbWUsIHZhbCkge1xuICAgIHZhciB4bGluayA9IFhMSU5LX1JFR0VYLmV4ZWMobmFtZSk7XG4gICAgaWYgKHhsaW5rICYmIHhsaW5rWzFdKVxuICAgICAgeyBkb20uc2V0QXR0cmlidXRlTlMoWExJTktfTlMsIHhsaW5rWzFdLCB2YWwpOyB9XG4gICAgZWxzZVxuICAgICAgeyBkb20uc2V0QXR0cmlidXRlKG5hbWUsIHZhbCk7IH1cbiAgfVxuXG4gIHZhciBzdHlsZU5vZGU7XG4gIC8vIENyZWF0ZSBjYWNoZSBhbmQgc2hvcnRjdXQgdG8gdGhlIGNvcnJlY3QgcHJvcGVydHlcbiAgdmFyIGNzc1RleHRQcm9wO1xuICB2YXIgYnlOYW1lID0ge307XG4gIHZhciBuZWVkc0luamVjdCA9IGZhbHNlO1xuXG4gIC8vIHNraXAgdGhlIGZvbGxvd2luZyBjb2RlIG9uIHRoZSBzZXJ2ZXJcbiAgaWYgKFdJTikge1xuICAgIHN0eWxlTm9kZSA9ICgoZnVuY3Rpb24gKCkge1xuICAgICAgLy8gY3JlYXRlIGEgbmV3IHN0eWxlIGVsZW1lbnQgd2l0aCB0aGUgY29ycmVjdCB0eXBlXG4gICAgICB2YXIgbmV3Tm9kZSA9IG1ha2VFbGVtZW50KCdzdHlsZScpO1xuICAgICAgLy8gcmVwbGFjZSBhbnkgdXNlciBub2RlIG9yIGluc2VydCB0aGUgbmV3IG9uZSBpbnRvIHRoZSBoZWFkXG4gICAgICB2YXIgdXNlck5vZGUgPSAkKCdzdHlsZVt0eXBlPXJpb3RdJyk7XG5cbiAgICAgIHNldEF0dHJpYnV0ZShuZXdOb2RlLCAndHlwZScsICd0ZXh0L2NzcycpO1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgIGlmICh1c2VyTm9kZSkge1xuICAgICAgICBpZiAodXNlck5vZGUuaWQpIHsgbmV3Tm9kZS5pZCA9IHVzZXJOb2RlLmlkOyB9XG4gICAgICAgIHVzZXJOb2RlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld05vZGUsIHVzZXJOb2RlKTtcbiAgICAgIH0gZWxzZSB7IGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobmV3Tm9kZSk7IH1cblxuICAgICAgcmV0dXJuIG5ld05vZGVcbiAgICB9KSkoKTtcbiAgICBjc3NUZXh0UHJvcCA9IHN0eWxlTm9kZS5zdHlsZVNoZWV0O1xuICB9XG5cbiAgLyoqXG4gICAqIE9iamVjdCB0aGF0IHdpbGwgYmUgdXNlZCB0byBpbmplY3QgYW5kIG1hbmFnZSB0aGUgY3NzIG9mIGV2ZXJ5IHRhZyBpbnN0YW5jZVxuICAgKi9cbiAgdmFyIHN0eWxlTWFuYWdlciA9IHtcbiAgICBzdHlsZU5vZGU6IHN0eWxlTm9kZSxcbiAgICAvKipcbiAgICAgKiBTYXZlIGEgdGFnIHN0eWxlIHRvIGJlIGxhdGVyIGluamVjdGVkIGludG8gRE9NXG4gICAgICogQHBhcmFtIHsgU3RyaW5nIH0gY3NzIC0gY3NzIHN0cmluZ1xuICAgICAqIEBwYXJhbSB7IFN0cmluZyB9IG5hbWUgLSBpZiBpdCdzIHBhc3NlZCB3ZSB3aWxsIG1hcCB0aGUgY3NzIHRvIGEgdGFnbmFtZVxuICAgICAqL1xuICAgIGFkZDogZnVuY3Rpb24gYWRkKGNzcywgbmFtZSkge1xuICAgICAgYnlOYW1lW25hbWVdID0gY3NzO1xuICAgICAgbmVlZHNJbmplY3QgPSB0cnVlO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogSW5qZWN0IGFsbCBwcmV2aW91c2x5IHNhdmVkIHRhZyBzdHlsZXMgaW50byBET01cbiAgICAgKiBpbm5lckhUTUwgc2VlbXMgc2xvdzogaHR0cDovL2pzcGVyZi5jb20vcmlvdC1pbnNlcnQtc3R5bGVcbiAgICAgKi9cbiAgICBpbmplY3Q6IGZ1bmN0aW9uIGluamVjdCgpIHtcbiAgICAgIGlmICghV0lOIHx8ICFuZWVkc0luamVjdCkgeyByZXR1cm4gfVxuICAgICAgbmVlZHNJbmplY3QgPSBmYWxzZTtcbiAgICAgIHZhciBzdHlsZSA9IE9iamVjdC5rZXlzKGJ5TmFtZSlcbiAgICAgICAgLm1hcChmdW5jdGlvbiAoaykgeyByZXR1cm4gYnlOYW1lW2tdOyB9KVxuICAgICAgICAuam9pbignXFxuJyk7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgaWYgKGNzc1RleHRQcm9wKSB7IGNzc1RleHRQcm9wLmNzc1RleHQgPSBzdHlsZTsgfVxuICAgICAgZWxzZSB7IHN0eWxlTm9kZS5pbm5lckhUTUwgPSBzdHlsZTsgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYSB0YWcgc3R5bGUgb2YgaW5qZWN0ZWQgRE9NIGxhdGVyLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIGEgcmVnaXN0ZXJlZCB0YWduYW1lXG4gICAgICovXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUobmFtZSkge1xuICAgICAgZGVsZXRlIGJ5TmFtZVtuYW1lXTtcbiAgICAgIG5lZWRzSW5qZWN0ID0gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFRoZSByaW90IHRlbXBsYXRlIGVuZ2luZVxuICAgKiBAdmVyc2lvbiB2My4wLjhcbiAgICovXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgdmFyIHNraXBSZWdleCA9IChmdW5jdGlvbiAoKSB7IC8vZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuXG4gICAgdmFyIGJlZm9yZVJlQ2hhcnMgPSAnW3soLDs6Pz18JiFefj4lKi8nO1xuXG4gICAgdmFyIGJlZm9yZVJlV29yZHMgPSBbXG4gICAgICAnY2FzZScsXG4gICAgICAnZGVmYXVsdCcsXG4gICAgICAnZG8nLFxuICAgICAgJ2Vsc2UnLFxuICAgICAgJ2luJyxcbiAgICAgICdpbnN0YW5jZW9mJyxcbiAgICAgICdwcmVmaXgnLFxuICAgICAgJ3JldHVybicsXG4gICAgICAndHlwZW9mJyxcbiAgICAgICd2b2lkJyxcbiAgICAgICd5aWVsZCdcbiAgICBdO1xuXG4gICAgdmFyIHdvcmRzTGFzdENoYXIgPSBiZWZvcmVSZVdvcmRzLnJlZHVjZShmdW5jdGlvbiAocywgdykge1xuICAgICAgcmV0dXJuIHMgKyB3LnNsaWNlKC0xKVxuICAgIH0sICcnKTtcblxuICAgIHZhciBSRV9SRUdFWCA9IC9eXFwvKD89W14qPi9dKVteWy9cXFxcXSooPzooPzpcXFxcLnxcXFsoPzpcXFxcLnxbXlxcXVxcXFxdKikqXFxdKVteW1xcXFwvXSopKj9cXC9bZ2ltdXldKi87XG4gICAgdmFyIFJFX1ZOX0NIQVIgPSAvWyRcXHddLztcblxuICAgIGZ1bmN0aW9uIHByZXYgKGNvZGUsIHBvcykge1xuICAgICAgd2hpbGUgKC0tcG9zID49IDAgJiYgL1xccy8udGVzdChjb2RlW3Bvc10pKXsgfVxuICAgICAgcmV0dXJuIHBvc1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9za2lwUmVnZXggKGNvZGUsIHN0YXJ0KSB7XG5cbiAgICAgIHZhciByZSA9IC8uKi9nO1xuICAgICAgdmFyIHBvcyA9IHJlLmxhc3RJbmRleCA9IHN0YXJ0Kys7XG4gICAgICB2YXIgbWF0Y2ggPSByZS5leGVjKGNvZGUpWzBdLm1hdGNoKFJFX1JFR0VYKTtcblxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIHZhciBuZXh0ID0gcG9zICsgbWF0Y2hbMF0ubGVuZ3RoO1xuXG4gICAgICAgIHBvcyA9IHByZXYoY29kZSwgcG9zKTtcbiAgICAgICAgdmFyIGMgPSBjb2RlW3Bvc107XG5cbiAgICAgICAgaWYgKHBvcyA8IDAgfHwgfmJlZm9yZVJlQ2hhcnMuaW5kZXhPZihjKSkge1xuICAgICAgICAgIHJldHVybiBuZXh0XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYyA9PT0gJy4nKSB7XG5cbiAgICAgICAgICBpZiAoY29kZVtwb3MgLSAxXSA9PT0gJy4nKSB7XG4gICAgICAgICAgICBzdGFydCA9IG5leHQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gJysnIHx8IGMgPT09ICctJykge1xuXG4gICAgICAgICAgaWYgKGNvZGVbLS1wb3NdICE9PSBjIHx8XG4gICAgICAgICAgICAgIChwb3MgPSBwcmV2KGNvZGUsIHBvcykpIDwgMCB8fFxuICAgICAgICAgICAgICAhUkVfVk5fQ0hBUi50ZXN0KGNvZGVbcG9zXSkpIHtcbiAgICAgICAgICAgIHN0YXJ0ID0gbmV4dDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIGlmICh+d29yZHNMYXN0Q2hhci5pbmRleE9mKGMpKSB7XG5cbiAgICAgICAgICB2YXIgZW5kID0gcG9zICsgMTtcblxuICAgICAgICAgIHdoaWxlICgtLXBvcyA+PSAwICYmIFJFX1ZOX0NIQVIudGVzdChjb2RlW3Bvc10pKXsgfVxuICAgICAgICAgIGlmICh+YmVmb3JlUmVXb3Jkcy5pbmRleE9mKGNvZGUuc2xpY2UocG9zICsgMSwgZW5kKSkpIHtcbiAgICAgICAgICAgIHN0YXJ0ID0gbmV4dDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHN0YXJ0XG4gICAgfVxuXG4gICAgcmV0dXJuIF9za2lwUmVnZXhcblxuICB9KSgpO1xuXG4gIC8qKlxuICAgKiByaW90LnV0aWwuYnJhY2tldHNcbiAgICpcbiAgICogLSBgYnJhY2tldHMgICAgYCAtIFJldHVybnMgYSBzdHJpbmcgb3IgcmVnZXggYmFzZWQgb24gaXRzIHBhcmFtZXRlclxuICAgKiAtIGBicmFja2V0cy5zZXRgIC0gQ2hhbmdlIHRoZSBjdXJyZW50IHJpb3QgYnJhY2tldHNcbiAgICpcbiAgICogQG1vZHVsZVxuICAgKi9cblxuICAvKiBnbG9iYWwgcmlvdCAqL1xuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIHZhciBicmFja2V0cyA9IChmdW5jdGlvbiAoVU5ERUYpIHtcblxuICAgIHZhclxuICAgICAgUkVHTE9CID0gJ2cnLFxuXG4gICAgICBSX01MQ09NTVMgPSAvXFwvXFwqW14qXSpcXCorKD86W14qXFwvXVteKl0qXFwqKykqXFwvL2csXG5cbiAgICAgIFJfU1RSSU5HUyA9IC9cIlteXCJcXFxcXSooPzpcXFxcW1xcU1xcc11bXlwiXFxcXF0qKSpcInwnW14nXFxcXF0qKD86XFxcXFtcXFNcXHNdW14nXFxcXF0qKSonfGBbXmBcXFxcXSooPzpcXFxcW1xcU1xcc11bXmBcXFxcXSopKmAvZyxcblxuICAgICAgU19RQkxPQ0tTID0gUl9TVFJJTkdTLnNvdXJjZSArICd8JyArXG4gICAgICAgIC8oPzpcXGJyZXR1cm5cXHMrfCg/OlskXFx3XFwpXFxdXXxcXCtcXCt8LS0pXFxzKihcXC8pKD8hWypcXC9dKSkvLnNvdXJjZSArICd8JyArXG4gICAgICAgIC9cXC8oPz1bXipcXC9dKVteW1xcL1xcXFxdKig/Oig/OlxcWyg/OlxcXFwufFteXFxdXFxcXF0qKSpcXF18XFxcXC4pW15bXFwvXFxcXF0qKSo/KFtePF1cXC8pW2dpbV0qLy5zb3VyY2UsXG5cbiAgICAgIFVOU1VQUE9SVEVEID0gUmVnRXhwKCdbXFxcXCcgKyAneDAwLVxcXFx4MUY8PmEtekEtWjAtOVxcJ1wiLDtcXFxcXFxcXF0nKSxcblxuICAgICAgTkVFRF9FU0NBUEUgPSAvKD89W1tcXF0oKSorPy5eJHxdKS9nLFxuXG4gICAgICBTX1FCTE9DSzIgPSBSX1NUUklOR1Muc291cmNlICsgJ3wnICsgLyhcXC8pKD8hWypcXC9dKS8uc291cmNlLFxuXG4gICAgICBGSU5EQlJBQ0VTID0ge1xuICAgICAgICAnKCc6IFJlZ0V4cCgnKFsoKV0pfCcgICArIFNfUUJMT0NLMiwgUkVHTE9CKSxcbiAgICAgICAgJ1snOiBSZWdFeHAoJyhbW1xcXFxdXSl8JyArIFNfUUJMT0NLMiwgUkVHTE9CKSxcbiAgICAgICAgJ3snOiBSZWdFeHAoJyhbe31dKXwnICAgKyBTX1FCTE9DSzIsIFJFR0xPQilcbiAgICAgIH0sXG5cbiAgICAgIERFRkFVTFQgPSAneyB9JztcblxuICAgIHZhciBfcGFpcnMgPSBbXG4gICAgICAneycsICd9JyxcbiAgICAgICd7JywgJ30nLFxuICAgICAgL3tbXn1dKn0vLFxuICAgICAgL1xcXFwoW3t9XSkvZyxcbiAgICAgIC9cXFxcKHspfHsvZyxcbiAgICAgIFJlZ0V4cCgnXFxcXFxcXFwofSl8KFtbKHtdKXwofSl8JyArIFNfUUJMT0NLMiwgUkVHTE9CKSxcbiAgICAgIERFRkFVTFQsXG4gICAgICAvXlxccyp7XFxeP1xccyooWyRcXHddKykoPzpcXHMqLFxccyooXFxTKykpP1xccytpblxccysoXFxTLiopXFxzKn0vLFxuICAgICAgLyhefFteXFxcXF0pez1bXFxTXFxzXSo/fS9cbiAgICBdO1xuXG4gICAgdmFyXG4gICAgICBjYWNoZWRCcmFja2V0cyA9IFVOREVGLFxuICAgICAgX3JlZ2V4LFxuICAgICAgX2NhY2hlID0gW10sXG4gICAgICBfc2V0dGluZ3M7XG5cbiAgICBmdW5jdGlvbiBfbG9vcGJhY2sgKHJlKSB7IHJldHVybiByZSB9XG5cbiAgICBmdW5jdGlvbiBfcmV3cml0ZSAocmUsIGJwKSB7XG4gICAgICBpZiAoIWJwKSB7IGJwID0gX2NhY2hlOyB9XG4gICAgICByZXR1cm4gbmV3IFJlZ0V4cChcbiAgICAgICAgcmUuc291cmNlLnJlcGxhY2UoL3svZywgYnBbMl0pLnJlcGxhY2UoL30vZywgYnBbM10pLCByZS5nbG9iYWwgPyBSRUdMT0IgOiAnJ1xuICAgICAgKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9jcmVhdGUgKHBhaXIpIHtcbiAgICAgIGlmIChwYWlyID09PSBERUZBVUxUKSB7IHJldHVybiBfcGFpcnMgfVxuXG4gICAgICB2YXIgYXJyID0gcGFpci5zcGxpdCgnICcpO1xuXG4gICAgICBpZiAoYXJyLmxlbmd0aCAhPT0gMiB8fCBVTlNVUFBPUlRFRC50ZXN0KHBhaXIpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgYnJhY2tldHMgXCInICsgcGFpciArICdcIicpXG4gICAgICB9XG4gICAgICBhcnIgPSBhcnIuY29uY2F0KHBhaXIucmVwbGFjZShORUVEX0VTQ0FQRSwgJ1xcXFwnKS5zcGxpdCgnICcpKTtcblxuICAgICAgYXJyWzRdID0gX3Jld3JpdGUoYXJyWzFdLmxlbmd0aCA+IDEgPyAve1tcXFNcXHNdKj99LyA6IF9wYWlyc1s0XSwgYXJyKTtcbiAgICAgIGFycls1XSA9IF9yZXdyaXRlKHBhaXIubGVuZ3RoID4gMyA/IC9cXFxcKHt8fSkvZyA6IF9wYWlyc1s1XSwgYXJyKTtcbiAgICAgIGFycls2XSA9IF9yZXdyaXRlKF9wYWlyc1s2XSwgYXJyKTtcbiAgICAgIGFycls3XSA9IFJlZ0V4cCgnXFxcXFxcXFwoJyArIGFyclszXSArICcpfChbWyh7XSl8KCcgKyBhcnJbM10gKyAnKXwnICsgU19RQkxPQ0syLCBSRUdMT0IpO1xuICAgICAgYXJyWzhdID0gcGFpcjtcbiAgICAgIHJldHVybiBhcnJcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfYnJhY2tldHMgKHJlT3JJZHgpIHtcbiAgICAgIHJldHVybiByZU9ySWR4IGluc3RhbmNlb2YgUmVnRXhwID8gX3JlZ2V4KHJlT3JJZHgpIDogX2NhY2hlW3JlT3JJZHhdXG4gICAgfVxuXG4gICAgX2JyYWNrZXRzLnNwbGl0ID0gZnVuY3Rpb24gc3BsaXQgKHN0ciwgdG1wbCwgX2JwKSB7XG4gICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dDogX2JwIGlzIGZvciB0aGUgY29tcGlsZXJcbiAgICAgIGlmICghX2JwKSB7IF9icCA9IF9jYWNoZTsgfVxuXG4gICAgICB2YXJcbiAgICAgICAgcGFydHMgPSBbXSxcbiAgICAgICAgbWF0Y2gsXG4gICAgICAgIGlzZXhwcixcbiAgICAgICAgc3RhcnQsXG4gICAgICAgIHBvcyxcbiAgICAgICAgcmUgPSBfYnBbNl07XG5cbiAgICAgIHZhciBxYmxvY2tzID0gW107XG4gICAgICB2YXIgcHJldlN0ciA9ICcnO1xuICAgICAgdmFyIG1hcmssIGxhc3RJbmRleDtcblxuICAgICAgaXNleHByID0gc3RhcnQgPSByZS5sYXN0SW5kZXggPSAwO1xuXG4gICAgICB3aGlsZSAoKG1hdGNoID0gcmUuZXhlYyhzdHIpKSkge1xuXG4gICAgICAgIGxhc3RJbmRleCA9IHJlLmxhc3RJbmRleDtcbiAgICAgICAgcG9zID0gbWF0Y2guaW5kZXg7XG5cbiAgICAgICAgaWYgKGlzZXhwcikge1xuXG4gICAgICAgICAgaWYgKG1hdGNoWzJdKSB7XG5cbiAgICAgICAgICAgIHZhciBjaCA9IG1hdGNoWzJdO1xuICAgICAgICAgICAgdmFyIHJlY2ggPSBGSU5EQlJBQ0VTW2NoXTtcbiAgICAgICAgICAgIHZhciBpeCA9IDE7XG5cbiAgICAgICAgICAgIHJlY2gubGFzdEluZGV4ID0gbGFzdEluZGV4O1xuICAgICAgICAgICAgd2hpbGUgKChtYXRjaCA9IHJlY2guZXhlYyhzdHIpKSkge1xuICAgICAgICAgICAgICBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hbMV0gPT09IGNoKSB7ICsraXg7IH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICghLS1peCkgeyBicmVhayB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVjaC5sYXN0SW5kZXggPSBwdXNoUUJsb2NrKG1hdGNoLmluZGV4LCByZWNoLmxhc3RJbmRleCwgbWF0Y2hbMl0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZS5sYXN0SW5kZXggPSBpeCA/IHN0ci5sZW5ndGggOiByZWNoLmxhc3RJbmRleDtcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFtYXRjaFszXSkge1xuICAgICAgICAgICAgcmUubGFzdEluZGV4ID0gcHVzaFFCbG9jayhwb3MsIGxhc3RJbmRleCwgbWF0Y2hbNF0pO1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIW1hdGNoWzFdKSB7XG4gICAgICAgICAgdW5lc2NhcGVTdHIoc3RyLnNsaWNlKHN0YXJ0LCBwb3MpKTtcbiAgICAgICAgICBzdGFydCA9IHJlLmxhc3RJbmRleDtcbiAgICAgICAgICByZSA9IF9icFs2ICsgKGlzZXhwciBePSAxKV07XG4gICAgICAgICAgcmUubGFzdEluZGV4ID0gc3RhcnQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHN0ciAmJiBzdGFydCA8IHN0ci5sZW5ndGgpIHtcbiAgICAgICAgdW5lc2NhcGVTdHIoc3RyLnNsaWNlKHN0YXJ0KSk7XG4gICAgICB9XG5cbiAgICAgIHBhcnRzLnFibG9ja3MgPSBxYmxvY2tzO1xuXG4gICAgICByZXR1cm4gcGFydHNcblxuICAgICAgZnVuY3Rpb24gdW5lc2NhcGVTdHIgKHMpIHtcbiAgICAgICAgaWYgKHByZXZTdHIpIHtcbiAgICAgICAgICBzID0gcHJldlN0ciArIHM7XG4gICAgICAgICAgcHJldlN0ciA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0bXBsIHx8IGlzZXhwcikge1xuICAgICAgICAgIHBhcnRzLnB1c2gocyAmJiBzLnJlcGxhY2UoX2JwWzVdLCAnJDEnKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGFydHMucHVzaChzKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBwdXNoUUJsb2NrKF9wb3MsIF9sYXN0SW5kZXgsIHNsYXNoKSB7IC8vZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICBpZiAoc2xhc2gpIHtcbiAgICAgICAgICBfbGFzdEluZGV4ID0gc2tpcFJlZ2V4KHN0ciwgX3Bvcyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodG1wbCAmJiBfbGFzdEluZGV4ID4gX3BvcyArIDIpIHtcbiAgICAgICAgICBtYXJrID0gJ1xcdTIwNTcnICsgcWJsb2Nrcy5sZW5ndGggKyAnfic7XG4gICAgICAgICAgcWJsb2Nrcy5wdXNoKHN0ci5zbGljZShfcG9zLCBfbGFzdEluZGV4KSk7XG4gICAgICAgICAgcHJldlN0ciArPSBzdHIuc2xpY2Uoc3RhcnQsIF9wb3MpICsgbWFyaztcbiAgICAgICAgICBzdGFydCA9IF9sYXN0SW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9sYXN0SW5kZXhcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX2JyYWNrZXRzLmhhc0V4cHIgPSBmdW5jdGlvbiBoYXNFeHByIChzdHIpIHtcbiAgICAgIHJldHVybiBfY2FjaGVbNF0udGVzdChzdHIpXG4gICAgfTtcblxuICAgIF9icmFja2V0cy5sb29wS2V5cyA9IGZ1bmN0aW9uIGxvb3BLZXlzIChleHByKSB7XG4gICAgICB2YXIgbSA9IGV4cHIubWF0Y2goX2NhY2hlWzldKTtcblxuICAgICAgcmV0dXJuIG1cbiAgICAgICAgPyB7IGtleTogbVsxXSwgcG9zOiBtWzJdLCB2YWw6IF9jYWNoZVswXSArIG1bM10udHJpbSgpICsgX2NhY2hlWzFdIH1cbiAgICAgICAgOiB7IHZhbDogZXhwci50cmltKCkgfVxuICAgIH07XG5cbiAgICBfYnJhY2tldHMuYXJyYXkgPSBmdW5jdGlvbiBhcnJheSAocGFpcikge1xuICAgICAgcmV0dXJuIHBhaXIgPyBfY3JlYXRlKHBhaXIpIDogX2NhY2hlXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIF9yZXNldCAocGFpcikge1xuICAgICAgaWYgKChwYWlyIHx8IChwYWlyID0gREVGQVVMVCkpICE9PSBfY2FjaGVbOF0pIHtcbiAgICAgICAgX2NhY2hlID0gX2NyZWF0ZShwYWlyKTtcbiAgICAgICAgX3JlZ2V4ID0gcGFpciA9PT0gREVGQVVMVCA/IF9sb29wYmFjayA6IF9yZXdyaXRlO1xuICAgICAgICBfY2FjaGVbOV0gPSBfcmVnZXgoX3BhaXJzWzldKTtcbiAgICAgIH1cbiAgICAgIGNhY2hlZEJyYWNrZXRzID0gcGFpcjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfc2V0U2V0dGluZ3MgKG8pIHtcbiAgICAgIHZhciBiO1xuXG4gICAgICBvID0gbyB8fCB7fTtcbiAgICAgIGIgPSBvLmJyYWNrZXRzO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sICdicmFja2V0cycsIHtcbiAgICAgICAgc2V0OiBfcmVzZXQsXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gY2FjaGVkQnJhY2tldHMgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBfc2V0dGluZ3MgPSBvO1xuICAgICAgX3Jlc2V0KGIpO1xuICAgIH1cblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfYnJhY2tldHMsICdzZXR0aW5ncycsIHtcbiAgICAgIHNldDogX3NldFNldHRpbmdzLFxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBfc2V0dGluZ3MgfVxuICAgIH0pO1xuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQ6IGluIHRoZSBicm93c2VyIHJpb3QgaXMgYWx3YXlzIGluIHRoZSBzY29wZSAqL1xuICAgIF9icmFja2V0cy5zZXR0aW5ncyA9IHR5cGVvZiByaW90ICE9PSAndW5kZWZpbmVkJyAmJiByaW90LnNldHRpbmdzIHx8IHt9O1xuICAgIF9icmFja2V0cy5zZXQgPSBfcmVzZXQ7XG4gICAgX2JyYWNrZXRzLnNraXBSZWdleCA9IHNraXBSZWdleDtcblxuICAgIF9icmFja2V0cy5SX1NUUklOR1MgPSBSX1NUUklOR1M7XG4gICAgX2JyYWNrZXRzLlJfTUxDT01NUyA9IFJfTUxDT01NUztcbiAgICBfYnJhY2tldHMuU19RQkxPQ0tTID0gU19RQkxPQ0tTO1xuICAgIF9icmFja2V0cy5TX1FCTE9DSzIgPSBTX1FCTE9DSzI7XG5cbiAgICByZXR1cm4gX2JyYWNrZXRzXG5cbiAgfSkoKTtcblxuICAvKipcbiAgICogQG1vZHVsZSB0bXBsXG4gICAqXG4gICAqIHRtcGwgICAgICAgICAgLSBSb290IGZ1bmN0aW9uLCByZXR1cm5zIHRoZSB0ZW1wbGF0ZSB2YWx1ZSwgcmVuZGVyIHdpdGggZGF0YVxuICAgKiB0bXBsLmhhc0V4cHIgIC0gVGVzdCB0aGUgZXhpc3RlbmNlIG9mIGEgZXhwcmVzc2lvbiBpbnNpZGUgYSBzdHJpbmdcbiAgICogdG1wbC5sb29wS2V5cyAtIEdldCB0aGUga2V5cyBmb3IgYW4gJ2VhY2gnIGxvb3AgKHVzZWQgYnkgYF9lYWNoYClcbiAgICovXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgdmFyIHRtcGwgPSAoZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIF9jYWNoZSA9IHt9O1xuXG4gICAgZnVuY3Rpb24gX3RtcGwgKHN0ciwgZGF0YSkge1xuICAgICAgaWYgKCFzdHIpIHsgcmV0dXJuIHN0ciB9XG5cbiAgICAgIHJldHVybiAoX2NhY2hlW3N0cl0gfHwgKF9jYWNoZVtzdHJdID0gX2NyZWF0ZShzdHIpKSkuY2FsbChcbiAgICAgICAgZGF0YSwgX2xvZ0Vyci5iaW5kKHtcbiAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgIHRtcGw6IHN0clxuICAgICAgICB9KVxuICAgICAgKVxuICAgIH1cblxuICAgIF90bXBsLmhhc0V4cHIgPSBicmFja2V0cy5oYXNFeHByO1xuXG4gICAgX3RtcGwubG9vcEtleXMgPSBicmFja2V0cy5sb29wS2V5cztcblxuICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0XG4gICAgX3RtcGwuY2xlYXJDYWNoZSA9IGZ1bmN0aW9uICgpIHsgX2NhY2hlID0ge307IH07XG5cbiAgICBfdG1wbC5lcnJvckhhbmRsZXIgPSBudWxsO1xuXG4gICAgZnVuY3Rpb24gX2xvZ0VyciAoZXJyLCBjdHgpIHtcblxuICAgICAgZXJyLnJpb3REYXRhID0ge1xuICAgICAgICB0YWdOYW1lOiBjdHggJiYgY3R4Ll9fICYmIGN0eC5fXy50YWdOYW1lLFxuICAgICAgICBfcmlvdF9pZDogY3R4ICYmIGN0eC5fcmlvdF9pZCAgLy9lc2xpbnQtZGlzYWJsZS1saW5lIGNhbWVsY2FzZVxuICAgICAgfTtcblxuICAgICAgaWYgKF90bXBsLmVycm9ySGFuZGxlcikgeyBfdG1wbC5lcnJvckhhbmRsZXIoZXJyKTsgfVxuICAgICAgZWxzZSBpZiAoXG4gICAgICAgIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICB0eXBlb2YgY29uc29sZS5lcnJvciA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpO1xuICAgICAgICBjb25zb2xlLmxvZygnPCVzPiAlcycsIGVyci5yaW90RGF0YS50YWdOYW1lIHx8ICdVbmtub3duIHRhZycsIHRoaXMudG1wbCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5kYXRhKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9jcmVhdGUgKHN0cikge1xuICAgICAgdmFyIGV4cHIgPSBfZ2V0VG1wbChzdHIpO1xuXG4gICAgICBpZiAoZXhwci5zbGljZSgwLCAxMSkgIT09ICd0cnl7cmV0dXJuICcpIHsgZXhwciA9ICdyZXR1cm4gJyArIGV4cHI7IH1cblxuICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbignRScsIGV4cHIgKyAnOycpICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3LWZ1bmNcbiAgICB9XG5cbiAgICB2YXIgUkVfRFFVT1RFID0gL1xcdTIwNTcvZztcbiAgICB2YXIgUkVfUUJNQVJLID0gL1xcdTIwNTcoXFxkKyl+L2c7XG5cbiAgICBmdW5jdGlvbiBfZ2V0VG1wbCAoc3RyKSB7XG4gICAgICB2YXIgcGFydHMgPSBicmFja2V0cy5zcGxpdChzdHIucmVwbGFjZShSRV9EUVVPVEUsICdcIicpLCAxKTtcbiAgICAgIHZhciBxc3RyID0gcGFydHMucWJsb2NrcztcbiAgICAgIHZhciBleHByO1xuXG4gICAgICBpZiAocGFydHMubGVuZ3RoID4gMiB8fCBwYXJ0c1swXSkge1xuICAgICAgICB2YXIgaSwgaiwgbGlzdCA9IFtdO1xuXG4gICAgICAgIGZvciAoaSA9IGogPSAwOyBpIDwgcGFydHMubGVuZ3RoOyArK2kpIHtcblxuICAgICAgICAgIGV4cHIgPSBwYXJ0c1tpXTtcblxuICAgICAgICAgIGlmIChleHByICYmIChleHByID0gaSAmIDFcblxuICAgICAgICAgICAgICA/IF9wYXJzZUV4cHIoZXhwciwgMSwgcXN0cilcblxuICAgICAgICAgICAgICA6ICdcIicgKyBleHByXG4gICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxcXC9nLCAnXFxcXFxcXFwnKVxuICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcclxcbj98XFxuL2csICdcXFxcbicpXG4gICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpICtcbiAgICAgICAgICAgICAgICAnXCInXG5cbiAgICAgICAgICAgICkpIHsgbGlzdFtqKytdID0gZXhwcjsgfVxuXG4gICAgICAgIH1cblxuICAgICAgICBleHByID0gaiA8IDIgPyBsaXN0WzBdXG4gICAgICAgICAgICAgOiAnWycgKyBsaXN0LmpvaW4oJywnKSArICddLmpvaW4oXCJcIiknO1xuXG4gICAgICB9IGVsc2Uge1xuXG4gICAgICAgIGV4cHIgPSBfcGFyc2VFeHByKHBhcnRzWzFdLCAwLCBxc3RyKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHFzdHIubGVuZ3RoKSB7XG4gICAgICAgIGV4cHIgPSBleHByLnJlcGxhY2UoUkVfUUJNQVJLLCBmdW5jdGlvbiAoXywgcG9zKSB7XG4gICAgICAgICAgcmV0dXJuIHFzdHJbcG9zXVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcci9nLCAnXFxcXHInKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcbi9nLCAnXFxcXG4nKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBleHByXG4gICAgfVxuXG4gICAgdmFyIFJFX0NTTkFNRSA9IC9eKD86KC0/W19BLVphLXpcXHhBMC1cXHhGRl1bLVxcd1xceEEwLVxceEZGXSopfFxcdTIwNTcoXFxkKyl+KTovO1xuICAgIHZhclxuICAgICAgUkVfQlJFTkQgPSB7XG4gICAgICAgICcoJzogL1soKV0vZyxcbiAgICAgICAgJ1snOiAvW1tcXF1dL2csXG4gICAgICAgICd7JzogL1t7fV0vZ1xuICAgICAgfTtcblxuICAgIGZ1bmN0aW9uIF9wYXJzZUV4cHIgKGV4cHIsIGFzVGV4dCwgcXN0cikge1xuXG4gICAgICBleHByID0gZXhwclxuICAgICAgICAucmVwbGFjZSgvXFxzKy9nLCAnICcpLnRyaW0oKVxuICAgICAgICAucmVwbGFjZSgvXFwgPyhbW1xcKHt9LD9cXC46XSlcXCA/L2csICckMScpO1xuXG4gICAgICBpZiAoZXhwcikge1xuICAgICAgICB2YXJcbiAgICAgICAgICBsaXN0ID0gW10sXG4gICAgICAgICAgY250ID0gMCxcbiAgICAgICAgICBtYXRjaDtcblxuICAgICAgICB3aGlsZSAoZXhwciAmJlxuICAgICAgICAgICAgICAobWF0Y2ggPSBleHByLm1hdGNoKFJFX0NTTkFNRSkpICYmXG4gICAgICAgICAgICAgICFtYXRjaC5pbmRleFxuICAgICAgICAgICkge1xuICAgICAgICAgIHZhclxuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAganNiLFxuICAgICAgICAgICAgcmUgPSAvLHwoW1t7KF0pfCQvZztcblxuICAgICAgICAgIGV4cHIgPSBSZWdFeHAucmlnaHRDb250ZXh0O1xuICAgICAgICAgIGtleSAgPSBtYXRjaFsyXSA/IHFzdHJbbWF0Y2hbMl1dLnNsaWNlKDEsIC0xKS50cmltKCkucmVwbGFjZSgvXFxzKy9nLCAnICcpIDogbWF0Y2hbMV07XG5cbiAgICAgICAgICB3aGlsZSAoanNiID0gKG1hdGNoID0gcmUuZXhlYyhleHByKSlbMV0pIHsgc2tpcEJyYWNlcyhqc2IsIHJlKTsgfVxuXG4gICAgICAgICAganNiICA9IGV4cHIuc2xpY2UoMCwgbWF0Y2guaW5kZXgpO1xuICAgICAgICAgIGV4cHIgPSBSZWdFeHAucmlnaHRDb250ZXh0O1xuXG4gICAgICAgICAgbGlzdFtjbnQrK10gPSBfd3JhcEV4cHIoanNiLCAxLCBrZXkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZXhwciA9ICFjbnQgPyBfd3JhcEV4cHIoZXhwciwgYXNUZXh0KVxuICAgICAgICAgICAgIDogY250ID4gMSA/ICdbJyArIGxpc3Quam9pbignLCcpICsgJ10uam9pbihcIiBcIikudHJpbSgpJyA6IGxpc3RbMF07XG4gICAgICB9XG4gICAgICByZXR1cm4gZXhwclxuXG4gICAgICBmdW5jdGlvbiBza2lwQnJhY2VzIChjaCwgcmUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgbW0sXG4gICAgICAgICAgbHYgPSAxLFxuICAgICAgICAgIGlyID0gUkVfQlJFTkRbY2hdO1xuXG4gICAgICAgIGlyLmxhc3RJbmRleCA9IHJlLmxhc3RJbmRleDtcbiAgICAgICAgd2hpbGUgKG1tID0gaXIuZXhlYyhleHByKSkge1xuICAgICAgICAgIGlmIChtbVswXSA9PT0gY2gpIHsgKytsdjsgfVxuICAgICAgICAgIGVsc2UgaWYgKCEtLWx2KSB7IGJyZWFrIH1cbiAgICAgICAgfVxuICAgICAgICByZS5sYXN0SW5kZXggPSBsdiA/IGV4cHIubGVuZ3RoIDogaXIubGFzdEluZGV4O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0OiBub3QgYm90aFxuICAgIHZhciAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWxlblxuICAgICAgSlNfQ09OVEVYVCA9ICdcImluIHRoaXM/dGhpczonICsgKHR5cGVvZiB3aW5kb3cgIT09ICdvYmplY3QnID8gJ2dsb2JhbCcgOiAnd2luZG93JykgKyAnKS4nLFxuICAgICAgSlNfVkFSTkFNRSA9IC9bLHtdW1xcJFxcd10rKD89Oil8KF4gKnxbXiRcXHdcXC57XSkoPyEoPzp0eXBlb2Z8dHJ1ZXxmYWxzZXxudWxsfHVuZGVmaW5lZHxpbnxpbnN0YW5jZW9mfGlzKD86RmluaXRlfE5hTil8dm9pZHxOYU58bmV3fERhdGV8UmVnRXhwfE1hdGgpKD8hWyRcXHddKSkoWyRfQS1aYS16XVskXFx3XSopL2csXG4gICAgICBKU19OT1BST1BTID0gL14oPz0oXFwuWyRcXHddKykpXFwxKD86W14uWyhdfCQpLztcblxuICAgIGZ1bmN0aW9uIF93cmFwRXhwciAoZXhwciwgYXNUZXh0LCBrZXkpIHtcbiAgICAgIHZhciB0YjtcblxuICAgICAgZXhwciA9IGV4cHIucmVwbGFjZShKU19WQVJOQU1FLCBmdW5jdGlvbiAobWF0Y2gsIHAsIG12YXIsIHBvcywgcykge1xuICAgICAgICBpZiAobXZhcikge1xuICAgICAgICAgIHBvcyA9IHRiID8gMCA6IHBvcyArIG1hdGNoLmxlbmd0aDtcblxuICAgICAgICAgIGlmIChtdmFyICE9PSAndGhpcycgJiYgbXZhciAhPT0gJ2dsb2JhbCcgJiYgbXZhciAhPT0gJ3dpbmRvdycpIHtcbiAgICAgICAgICAgIG1hdGNoID0gcCArICcoXCInICsgbXZhciArIEpTX0NPTlRFWFQgKyBtdmFyO1xuICAgICAgICAgICAgaWYgKHBvcykgeyB0YiA9IChzID0gc1twb3NdKSA9PT0gJy4nIHx8IHMgPT09ICcoJyB8fCBzID09PSAnWyc7IH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHBvcykge1xuICAgICAgICAgICAgdGIgPSAhSlNfTk9QUk9QUy50ZXN0KHMuc2xpY2UocG9zKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXRjaFxuICAgICAgfSk7XG5cbiAgICAgIGlmICh0Yikge1xuICAgICAgICBleHByID0gJ3RyeXtyZXR1cm4gJyArIGV4cHIgKyAnfWNhdGNoKGUpe0UoZSx0aGlzKX0nO1xuICAgICAgfVxuXG4gICAgICBpZiAoa2V5KSB7XG5cbiAgICAgICAgZXhwciA9ICh0YlxuICAgICAgICAgICAgPyAnZnVuY3Rpb24oKXsnICsgZXhwciArICd9LmNhbGwodGhpcyknIDogJygnICsgZXhwciArICcpJ1xuICAgICAgICAgICkgKyAnP1wiJyArIGtleSArICdcIjpcIlwiJztcblxuICAgICAgfSBlbHNlIGlmIChhc1RleHQpIHtcblxuICAgICAgICBleHByID0gJ2Z1bmN0aW9uKHYpeycgKyAodGJcbiAgICAgICAgICAgID8gZXhwci5yZXBsYWNlKCdyZXR1cm4gJywgJ3Y9JykgOiAndj0oJyArIGV4cHIgKyAnKSdcbiAgICAgICAgICApICsgJztyZXR1cm4gdnx8dj09PTA/djpcIlwifS5jYWxsKHRoaXMpJztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGV4cHJcbiAgICB9XG5cbiAgICBfdG1wbC52ZXJzaW9uID0gYnJhY2tldHMudmVyc2lvbiA9ICd2My4wLjgnO1xuXG4gICAgcmV0dXJuIF90bXBsXG5cbiAgfSkoKTtcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICB2YXIgb2JzZXJ2YWJsZSA9IGZ1bmN0aW9uKGVsKSB7XG5cbiAgICAvKipcbiAgICAgKiBFeHRlbmQgdGhlIG9yaWdpbmFsIG9iamVjdCBvciBjcmVhdGUgYSBuZXcgZW1wdHkgb25lXG4gICAgICogQHR5cGUgeyBPYmplY3QgfVxuICAgICAqL1xuXG4gICAgZWwgPSBlbCB8fCB7fTtcblxuICAgIC8qKlxuICAgICAqIFByaXZhdGUgdmFyaWFibGVzXG4gICAgICovXG4gICAgdmFyIGNhbGxiYWNrcyA9IHt9LFxuICAgICAgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG5cbiAgICAvKipcbiAgICAgKiBQdWJsaWMgQXBpXG4gICAgICovXG5cbiAgICAvLyBleHRlbmQgdGhlIGVsIG9iamVjdCBhZGRpbmcgdGhlIG9ic2VydmFibGUgbWV0aG9kc1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGVsLCB7XG4gICAgICAvKipcbiAgICAgICAqIExpc3RlbiB0byB0aGUgZ2l2ZW4gYGV2ZW50YCBhbmRzXG4gICAgICAgKiBleGVjdXRlIHRoZSBgY2FsbGJhY2tgIGVhY2ggdGltZSBhbiBldmVudCBpcyB0cmlnZ2VyZWQuXG4gICAgICAgKiBAcGFyYW0gIHsgU3RyaW5nIH0gZXZlbnQgLSBldmVudCBpZFxuICAgICAgICogQHBhcmFtICB7IEZ1bmN0aW9uIH0gZm4gLSBjYWxsYmFjayBmdW5jdGlvblxuICAgICAgICogQHJldHVybnMgeyBPYmplY3QgfSBlbFxuICAgICAgICovXG4gICAgICBvbjoge1xuICAgICAgICB2YWx1ZTogZnVuY3Rpb24oZXZlbnQsIGZuKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBmbiA9PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgeyAoY2FsbGJhY2tzW2V2ZW50XSA9IGNhbGxiYWNrc1tldmVudF0gfHwgW10pLnB1c2goZm4pOyB9XG4gICAgICAgICAgcmV0dXJuIGVsXG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2VcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogUmVtb3ZlcyB0aGUgZ2l2ZW4gYGV2ZW50YCBsaXN0ZW5lcnNcbiAgICAgICAqIEBwYXJhbSAgIHsgU3RyaW5nIH0gZXZlbnQgLSBldmVudCBpZFxuICAgICAgICogQHBhcmFtICAgeyBGdW5jdGlvbiB9IGZuIC0gY2FsbGJhY2sgZnVuY3Rpb25cbiAgICAgICAqIEByZXR1cm5zIHsgT2JqZWN0IH0gZWxcbiAgICAgICAqL1xuICAgICAgb2ZmOiB7XG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbihldmVudCwgZm4pIHtcbiAgICAgICAgICBpZiAoZXZlbnQgPT0gJyonICYmICFmbikgeyBjYWxsYmFja3MgPSB7fTsgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGZuKSB7XG4gICAgICAgICAgICAgIHZhciBhcnIgPSBjYWxsYmFja3NbZXZlbnRdO1xuICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgY2I7IGNiID0gYXJyICYmIGFycltpXTsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNiID09IGZuKSB7IGFyci5zcGxpY2UoaS0tLCAxKTsgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgeyBkZWxldGUgY2FsbGJhY2tzW2V2ZW50XTsgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZWxcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZVxuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBMaXN0ZW4gdG8gdGhlIGdpdmVuIGBldmVudGAgYW5kXG4gICAgICAgKiBleGVjdXRlIHRoZSBgY2FsbGJhY2tgIGF0IG1vc3Qgb25jZVxuICAgICAgICogQHBhcmFtICAgeyBTdHJpbmcgfSBldmVudCAtIGV2ZW50IGlkXG4gICAgICAgKiBAcGFyYW0gICB7IEZ1bmN0aW9uIH0gZm4gLSBjYWxsYmFjayBmdW5jdGlvblxuICAgICAgICogQHJldHVybnMgeyBPYmplY3QgfSBlbFxuICAgICAgICovXG4gICAgICBvbmU6IHtcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKGV2ZW50LCBmbikge1xuICAgICAgICAgIGZ1bmN0aW9uIG9uKCkge1xuICAgICAgICAgICAgZWwub2ZmKGV2ZW50LCBvbik7XG4gICAgICAgICAgICBmbi5hcHBseShlbCwgYXJndW1lbnRzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGVsLm9uKGV2ZW50LCBvbilcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZVxuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBFeGVjdXRlIGFsbCBjYWxsYmFjayBmdW5jdGlvbnMgdGhhdCBsaXN0ZW4gdG9cbiAgICAgICAqIHRoZSBnaXZlbiBgZXZlbnRgXG4gICAgICAgKiBAcGFyYW0gICB7IFN0cmluZyB9IGV2ZW50IC0gZXZlbnQgaWRcbiAgICAgICAqIEByZXR1cm5zIHsgT2JqZWN0IH0gZWxcbiAgICAgICAqL1xuICAgICAgdHJpZ2dlcjoge1xuICAgICAgICB2YWx1ZTogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICB2YXIgYXJndW1lbnRzJDEgPSBhcmd1bWVudHM7XG5cblxuICAgICAgICAgIC8vIGdldHRpbmcgdGhlIGFyZ3VtZW50c1xuICAgICAgICAgIHZhciBhcmdsZW4gPSBhcmd1bWVudHMubGVuZ3RoIC0gMSxcbiAgICAgICAgICAgIGFyZ3MgPSBuZXcgQXJyYXkoYXJnbGVuKSxcbiAgICAgICAgICAgIGZucyxcbiAgICAgICAgICAgIGZuLFxuICAgICAgICAgICAgaTtcblxuICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBhcmdsZW47IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50cyQxW2kgKyAxXTsgLy8gc2tpcCBmaXJzdCBhcmd1bWVudFxuICAgICAgICAgIH1cblxuICAgICAgICAgIGZucyA9IHNsaWNlLmNhbGwoY2FsbGJhY2tzW2V2ZW50XSB8fCBbXSwgMCk7XG5cbiAgICAgICAgICBmb3IgKGkgPSAwOyBmbiA9IGZuc1tpXTsgKytpKSB7XG4gICAgICAgICAgICBmbi5hcHBseShlbCwgYXJncyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGNhbGxiYWNrc1snKiddICYmIGV2ZW50ICE9ICcqJylcbiAgICAgICAgICAgIHsgZWwudHJpZ2dlci5hcHBseShlbCwgWycqJywgZXZlbnRdLmNvbmNhdChhcmdzKSk7IH1cblxuICAgICAgICAgIHJldHVybiBlbFxuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZWxcblxuICB9O1xuXG4gIC8qKlxuICAgKiBTaG9ydCBhbGlhcyBmb3IgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvclxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0UHJvcERlc2NyaXB0b3IgKG8sIGspIHtcbiAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvLCBrKVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHBhc3NlZCBhcmd1bWVudCBpcyB1bmRlZmluZWRcbiAgICogQHBhcmFtICAgeyAqIH0gdmFsdWUgLVxuICAgKiBAcmV0dXJucyB7IEJvb2xlYW4gfSAtXG4gICAqL1xuICBmdW5jdGlvbiBpc1VuZGVmaW5lZCh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFRfVU5ERUZcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayB3aGV0aGVyIG9iamVjdCdzIHByb3BlcnR5IGNvdWxkIGJlIG92ZXJyaWRkZW5cbiAgICogQHBhcmFtICAgeyBPYmplY3QgfSAgb2JqIC0gc291cmNlIG9iamVjdFxuICAgKiBAcGFyYW0gICB7IFN0cmluZyB9ICBrZXkgLSBvYmplY3QgcHJvcGVydHlcbiAgICogQHJldHVybnMgeyBCb29sZWFuIH0gdHJ1ZSBpZiB3cml0YWJsZVxuICAgKi9cbiAgZnVuY3Rpb24gaXNXcml0YWJsZShvYmosIGtleSkge1xuICAgIHZhciBkZXNjcmlwdG9yID0gZ2V0UHJvcERlc2NyaXB0b3Iob2JqLCBrZXkpO1xuICAgIHJldHVybiBpc1VuZGVmaW5lZChvYmpba2V5XSkgfHwgZGVzY3JpcHRvciAmJiBkZXNjcmlwdG9yLndyaXRhYmxlXG4gIH1cblxuICAvKipcbiAgICogRXh0ZW5kIGFueSBvYmplY3Qgd2l0aCBvdGhlciBwcm9wZXJ0aWVzXG4gICAqIEBwYXJhbSAgIHsgT2JqZWN0IH0gc3JjIC0gc291cmNlIG9iamVjdFxuICAgKiBAcmV0dXJucyB7IE9iamVjdCB9IHRoZSByZXN1bHRpbmcgZXh0ZW5kZWQgb2JqZWN0XG4gICAqXG4gICAqIHZhciBvYmogPSB7IGZvbzogJ2JheicgfVxuICAgKiBleHRlbmQob2JqLCB7YmFyOiAnYmFyJywgZm9vOiAnYmFyJ30pXG4gICAqIGNvbnNvbGUubG9nKG9iaikgPT4ge2JhcjogJ2JhcicsIGZvbzogJ2Jhcid9XG4gICAqXG4gICAqL1xuICBmdW5jdGlvbiBleHRlbmQoc3JjKSB7XG4gICAgdmFyIG9iajtcbiAgICB2YXIgaSA9IDE7XG4gICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgdmFyIGwgPSBhcmdzLmxlbmd0aDtcblxuICAgIGZvciAoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBpZiAob2JqID0gYXJnc1tpXSkge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgLy8gY2hlY2sgaWYgdGhpcyBwcm9wZXJ0eSBvZiB0aGUgc291cmNlIG9iamVjdCBjb3VsZCBiZSBvdmVycmlkZGVuXG4gICAgICAgICAgaWYgKGlzV3JpdGFibGUoc3JjLCBrZXkpKVxuICAgICAgICAgICAgeyBzcmNba2V5XSA9IG9ialtrZXldOyB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNyY1xuICB9XG5cbiAgLyoqXG4gICAqIEFsaWFzIGZvciBPYmplY3QuY3JlYXRlXG4gICAqL1xuICBmdW5jdGlvbiBjcmVhdGUoc3JjKSB7XG4gICAgcmV0dXJuIE9iamVjdC5jcmVhdGUoc3JjKVxuICB9XG5cbiAgdmFyIHNldHRpbmdzID0gZXh0ZW5kKGNyZWF0ZShicmFja2V0cy5zZXR0aW5ncyksIHtcbiAgICBza2lwQW5vbnltb3VzVGFnczogdHJ1ZSxcbiAgICAvLyB0aGUgXCJ2YWx1ZVwiIGF0dHJpYnV0ZXMgd2lsbCBiZSBwcmVzZXJ2ZWRcbiAgICBrZWVwVmFsdWVBdHRyaWJ1dGVzOiBmYWxzZSxcbiAgICAvLyBoYW5kbGUgdGhlIGF1dG8gdXBkYXRlcyBvbiBhbnkgRE9NIGV2ZW50XG4gICAgYXV0b1VwZGF0ZTogdHJ1ZVxuICB9KTtcblxuICAvKipcbiAgICogU2hvcnRlciBhbmQgZmFzdCB3YXkgdG8gc2VsZWN0IG11bHRpcGxlIG5vZGVzIGluIHRoZSBET01cbiAgICogQHBhcmFtICAgeyBTdHJpbmcgfSBzZWxlY3RvciAtIERPTSBzZWxlY3RvclxuICAgKiBAcGFyYW0gICB7IE9iamVjdCB9IGN0eCAtIERPTSBub2RlIHdoZXJlIHRoZSB0YXJnZXRzIG9mIG91ciBzZWFyY2ggd2lsbCBpcyBsb2NhdGVkXG4gICAqIEByZXR1cm5zIHsgT2JqZWN0IH0gZG9tIG5vZGVzIGZvdW5kXG4gICAqL1xuICBmdW5jdGlvbiAkJChzZWxlY3RvciwgY3R4KSB7XG4gICAgcmV0dXJuIFtdLnNsaWNlLmNhbGwoKGN0eCB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgZG9jdW1lbnQgdGV4dCBub2RlXG4gICAqIEByZXR1cm5zIHsgT2JqZWN0IH0gY3JlYXRlIGEgdGV4dCBub2RlIHRvIHVzZSBhcyBwbGFjZWhvbGRlclxuICAgKi9cbiAgZnVuY3Rpb24gY3JlYXRlRE9NUGxhY2Vob2xkZXIoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKVxuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSB0aGUgdmlzaWJpbGl0eSBvZiBhbnkgRE9NIG5vZGVcbiAgICogQHBhcmFtICAgeyBPYmplY3QgfSAgZG9tIC0gRE9NIG5vZGUgd2Ugd2FudCB0byBoaWRlXG4gICAqIEBwYXJhbSAgIHsgQm9vbGVhbiB9IHNob3cgLSBkbyB3ZSB3YW50IHRvIHNob3cgaXQ/XG4gICAqL1xuXG4gIGZ1bmN0aW9uIHRvZ2dsZVZpc2liaWxpdHkoZG9tLCBzaG93KSB7XG4gICAgZG9tLnN0eWxlLmRpc3BsYXkgPSBzaG93ID8gJycgOiAnbm9uZSc7XG4gICAgZG9tLmhpZGRlbiA9IHNob3cgPyBmYWxzZSA6IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZSBvZiBhbnkgRE9NIGF0dHJpYnV0ZSBvbiBhIG5vZGVcbiAgICogQHBhcmFtICAgeyBPYmplY3QgfSBkb20gLSBET00gbm9kZSB3ZSB3YW50IHRvIHBhcnNlXG4gICAqIEBwYXJhbSAgIHsgU3RyaW5nIH0gbmFtZSAtIG5hbWUgb2YgdGhlIGF0dHJpYnV0ZSB3ZSB3YW50IHRvIGdldFxuICAgKiBAcmV0dXJucyB7IFN0cmluZyB8IHVuZGVmaW5lZCB9IG5hbWUgb2YgdGhlIG5vZGUgYXR0cmlidXRlIHdoZXRoZXIgaXQgZXhpc3RzXG4gICAqL1xuICBmdW5jdGlvbiBnZXRBdHRyaWJ1dGUoZG9tLCBuYW1lKSB7XG4gICAgcmV0dXJuIGRvbS5nZXRBdHRyaWJ1dGUobmFtZSlcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYW55IERPTSBhdHRyaWJ1dGUgZnJvbSBhIG5vZGVcbiAgICogQHBhcmFtICAgeyBPYmplY3QgfSBkb20gLSBET00gbm9kZSB3ZSB3YW50IHRvIHVwZGF0ZVxuICAgKiBAcGFyYW0gICB7IFN0cmluZyB9IG5hbWUgLSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB3ZSB3YW50IHRvIHJlbW92ZVxuICAgKi9cbiAgZnVuY3Rpb24gcmVtb3ZlQXR0cmlidXRlKGRvbSwgbmFtZSkge1xuICAgIGRvbS5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBpbm5lciBodG1sIG9mIGFueSBET00gbm9kZSBTVkdzIGluY2x1ZGVkXG4gICAqIEBwYXJhbSB7IE9iamVjdCB9IGNvbnRhaW5lciAtIERPTSBub2RlIHdoZXJlIHdlJ2xsIGluamVjdCBuZXcgaHRtbFxuICAgKiBAcGFyYW0geyBTdHJpbmcgfSBodG1sIC0gaHRtbCB0byBpbmplY3RcbiAgICogQHBhcmFtIHsgQm9vbGVhbiB9IGlzU3ZnIC0gc3ZnIHRhZ3Mgc2hvdWxkIGJlIHRyZWF0ZWQgYSBiaXQgZGlmZmVyZW50bHlcbiAgICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGZ1bmN0aW9uIHNldElubmVySFRNTChjb250YWluZXIsIGh0bWwsIGlzU3ZnKSB7XG4gICAgLy8gaW5uZXJIVE1MIGlzIG5vdCBzdXBwb3J0ZWQgb24gc3ZnIHRhZ3Mgc28gd2UgbmVldCB0byB0cmVhdCB0aGVtIGRpZmZlcmVudGx5XG4gICAgaWYgKGlzU3ZnKSB7XG4gICAgICB2YXIgbm9kZSA9IGNvbnRhaW5lci5vd25lckRvY3VtZW50LmltcG9ydE5vZGUoXG4gICAgICAgIG5ldyBET01QYXJzZXIoKVxuICAgICAgICAgIC5wYXJzZUZyb21TdHJpbmcoKFwiPHN2ZyB4bWxucz1cXFwiXCIgKyBTVkdfTlMgKyBcIlxcXCI+XCIgKyBodG1sICsgXCI8L3N2Zz5cIiksICdhcHBsaWNhdGlvbi94bWwnKVxuICAgICAgICAgIC5kb2N1bWVudEVsZW1lbnQsXG4gICAgICAgIHRydWVcbiAgICAgICk7XG5cbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChub2RlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IGh0bWw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE1pbmltaXplIHJpc2s6IG9ubHkgemVybyBvciBvbmUgX3NwYWNlXyBiZXR3ZWVuIGF0dHIgJiB2YWx1ZVxuICAgKiBAcGFyYW0gICB7IFN0cmluZyB9ICAgaHRtbCAtIGh0bWwgc3RyaW5nIHdlIHdhbnQgdG8gcGFyc2VcbiAgICogQHBhcmFtICAgeyBGdW5jdGlvbiB9IGZuIC0gY2FsbGJhY2sgZnVuY3Rpb24gdG8gYXBwbHkgb24gYW55IGF0dHJpYnV0ZSBmb3VuZFxuICAgKi9cbiAgZnVuY3Rpb24gd2Fsa0F0dHJpYnV0ZXMoaHRtbCwgZm4pIHtcbiAgICBpZiAoIWh0bWwpIHsgcmV0dXJuIH1cbiAgICB2YXIgbTtcbiAgICB3aGlsZSAobSA9IFJFX0hUTUxfQVRUUlMuZXhlYyhodG1sKSlcbiAgICAgIHsgZm4obVsxXS50b0xvd2VyQ2FzZSgpLCBtWzJdIHx8IG1bM10gfHwgbVs0XSk7IH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBkb2N1bWVudCBmcmFnbWVudFxuICAgKiBAcmV0dXJucyB7IE9iamVjdCB9IGRvY3VtZW50IGZyYWdtZW50XG4gICAqL1xuICBmdW5jdGlvbiBjcmVhdGVGcmFnbWVudCgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpXG4gIH1cblxuICAvKipcbiAgICogSW5zZXJ0IHNhZmVseSBhIHRhZyB0byBmaXggIzE5NjIgIzE2NDlcbiAgICogQHBhcmFtICAgeyBIVE1MRWxlbWVudCB9IHJvb3QgLSBjaGlsZHJlbiBjb250YWluZXJcbiAgICogQHBhcmFtICAgeyBIVE1MRWxlbWVudCB9IGN1cnIgLSBub2RlIHRvIGluc2VydFxuICAgKiBAcGFyYW0gICB7IEhUTUxFbGVtZW50IH0gbmV4dCAtIG5vZGUgdGhhdCBzaG91bGQgcHJlY2VlZCB0aGUgY3VycmVudCBub2RlIGluc2VydGVkXG4gICAqL1xuICBmdW5jdGlvbiBzYWZlSW5zZXJ0KHJvb3QsIGN1cnIsIG5leHQpIHtcbiAgICByb290Lmluc2VydEJlZm9yZShjdXJyLCBuZXh0LnBhcmVudE5vZGUgJiYgbmV4dCk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBhIHN0eWxlIG9iamVjdCB0byBhIHN0cmluZ1xuICAgKiBAcGFyYW0gICB7IE9iamVjdCB9IHN0eWxlIC0gc3R5bGUgb2JqZWN0IHdlIG5lZWQgdG8gcGFyc2VcbiAgICogQHJldHVybnMgeyBTdHJpbmcgfSByZXN1bHRpbmcgY3NzIHN0cmluZ1xuICAgKiBAZXhhbXBsZVxuICAgKiBzdHlsZU9iamVjdFRvU3RyaW5nKHsgY29sb3I6ICdyZWQnLCBoZWlnaHQ6ICcxMHB4J30pIC8vID0+ICdjb2xvcjogcmVkOyBoZWlnaHQ6IDEwcHgnXG4gICAqL1xuICBmdW5jdGlvbiBzdHlsZU9iamVjdFRvU3RyaW5nKHN0eWxlKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHN0eWxlKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgcHJvcCkge1xuICAgICAgcmV0dXJuIChhY2MgKyBcIiBcIiArIHByb3AgKyBcIjogXCIgKyAoc3R5bGVbcHJvcF0pICsgXCI7XCIpXG4gICAgfSwgJycpXG4gIH1cblxuICAvKipcbiAgICogV2FsayBkb3duIHJlY3Vyc2l2ZWx5IGFsbCB0aGUgY2hpbGRyZW4gdGFncyBzdGFydGluZyBkb20gbm9kZVxuICAgKiBAcGFyYW0gICB7IE9iamVjdCB9ICAgZG9tIC0gc3RhcnRpbmcgbm9kZSB3aGVyZSB3ZSB3aWxsIHN0YXJ0IHRoZSByZWN1cnNpb25cbiAgICogQHBhcmFtICAgeyBGdW5jdGlvbiB9IGZuIC0gY2FsbGJhY2sgdG8gdHJhbnNmb3JtIHRoZSBjaGlsZCBub2RlIGp1c3QgZm91bmRcbiAgICogQHBhcmFtICAgeyBPYmplY3QgfSAgIGNvbnRleHQgLSBmbiBjYW4gb3B0aW9uYWxseSByZXR1cm4gYW4gb2JqZWN0LCB3aGljaCBpcyBwYXNzZWQgdG8gY2hpbGRyZW5cbiAgICovXG4gIGZ1bmN0aW9uIHdhbGtOb2Rlcyhkb20sIGZuLCBjb250ZXh0KSB7XG4gICAgaWYgKGRvbSkge1xuICAgICAgdmFyIHJlcyA9IGZuKGRvbSwgY29udGV4dCk7XG4gICAgICB2YXIgbmV4dDtcbiAgICAgIC8vIHN0b3AgdGhlIHJlY3Vyc2lvblxuICAgICAgaWYgKHJlcyA9PT0gZmFsc2UpIHsgcmV0dXJuIH1cblxuICAgICAgZG9tID0gZG9tLmZpcnN0Q2hpbGQ7XG5cbiAgICAgIHdoaWxlIChkb20pIHtcbiAgICAgICAgbmV4dCA9IGRvbS5uZXh0U2libGluZztcbiAgICAgICAgd2Fsa05vZGVzKGRvbSwgZm4sIHJlcyk7XG4gICAgICAgIGRvbSA9IG5leHQ7XG4gICAgICB9XG4gICAgfVxuICB9XG5cblxuXG4gIHZhciBkb20gPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gICAgJCQ6ICQkLFxuICAgICQ6ICQsXG4gICAgY3JlYXRlRE9NUGxhY2Vob2xkZXI6IGNyZWF0ZURPTVBsYWNlaG9sZGVyLFxuICAgIG1rRWw6IG1ha2VFbGVtZW50LFxuICAgIHNldEF0dHI6IHNldEF0dHJpYnV0ZSxcbiAgICB0b2dnbGVWaXNpYmlsaXR5OiB0b2dnbGVWaXNpYmlsaXR5LFxuICAgIGdldEF0dHI6IGdldEF0dHJpYnV0ZSxcbiAgICByZW1BdHRyOiByZW1vdmVBdHRyaWJ1dGUsXG4gICAgc2V0SW5uZXJIVE1MOiBzZXRJbm5lckhUTUwsXG4gICAgd2Fsa0F0dHJzOiB3YWxrQXR0cmlidXRlcyxcbiAgICBjcmVhdGVGcmFnOiBjcmVhdGVGcmFnbWVudCxcbiAgICBzYWZlSW5zZXJ0OiBzYWZlSW5zZXJ0LFxuICAgIHN0eWxlT2JqZWN0VG9TdHJpbmc6IHN0eWxlT2JqZWN0VG9TdHJpbmcsXG4gICAgd2Fsa05vZGVzOiB3YWxrTm9kZXNcbiAgfSk7XG5cbiAgLyoqXG4gICAqIENoZWNrIGFnYWluc3QgdGhlIG51bGwgYW5kIHVuZGVmaW5lZCB2YWx1ZXNcbiAgICogQHBhcmFtICAgeyAqIH0gIHZhbHVlIC1cbiAgICogQHJldHVybnMge0Jvb2xlYW59IC1cbiAgICovXG4gIGZ1bmN0aW9uIGlzTmlsKHZhbHVlKSB7XG4gICAgcmV0dXJuIGlzVW5kZWZpbmVkKHZhbHVlKSB8fCB2YWx1ZSA9PT0gbnVsbFxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHBhc3NlZCBhcmd1bWVudCBpcyBlbXB0eS4gRGlmZmVyZW50IGZyb20gZmFsc3ksIGJlY2F1c2Ugd2UgZG9udCBjb25zaWRlciAwIG9yIGZhbHNlIHRvIGJlIGJsYW5rXG4gICAqIEBwYXJhbSB7ICogfSB2YWx1ZSAtXG4gICAqIEByZXR1cm5zIHsgQm9vbGVhbiB9IC1cbiAgICovXG4gIGZ1bmN0aW9uIGlzQmxhbmsodmFsdWUpIHtcbiAgICByZXR1cm4gaXNOaWwodmFsdWUpIHx8IHZhbHVlID09PSAnJ1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHBhc3NlZCBhcmd1bWVudCBpcyBhIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSAgIHsgKiB9IHZhbHVlIC1cbiAgICogQHJldHVybnMgeyBCb29sZWFuIH0gLVxuICAgKi9cbiAgZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFRfRlVOQ1RJT05cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBwYXNzZWQgYXJndW1lbnQgaXMgYW4gb2JqZWN0LCBleGNsdWRlIG51bGxcbiAgICogTk9URTogdXNlIGlzT2JqZWN0KHgpICYmICFpc0FycmF5KHgpIHRvIGV4Y2x1ZGVzIGFycmF5cy5cbiAgICogQHBhcmFtICAgeyAqIH0gdmFsdWUgLVxuICAgKiBAcmV0dXJucyB7IEJvb2xlYW4gfSAtXG4gICAqL1xuICBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09IFRfT0JKRUNUIC8vIHR5cGVvZiBudWxsIGlzICdvYmplY3QnXG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBET00gbm9kZSBpcyBhbiBzdmcgdGFnIG9yIHBhcnQgb2YgYW4gc3ZnXG4gICAqIEBwYXJhbSAgIHsgSFRNTEVsZW1lbnQgfSAgZWwgLSBub2RlIHdlIHdhbnQgdG8gdGVzdFxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gdHJ1ZSBpZiBpdCdzIGFuIHN2ZyBub2RlXG4gICAqL1xuICBmdW5jdGlvbiBpc1N2ZyhlbCkge1xuICAgIHZhciBvd25lciA9IGVsLm93bmVyU1ZHRWxlbWVudDtcbiAgICByZXR1cm4gISFvd25lciB8fCBvd25lciA9PT0gbnVsbFxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHBhc3NlZCBhcmd1bWVudCBpcyBhIGtpbmQgb2YgYXJyYXlcbiAgICogQHBhcmFtICAgeyAqIH0gdmFsdWUgLVxuICAgKiBAcmV0dXJucyB7IEJvb2xlYW4gfSAtXG4gICAqL1xuICBmdW5jdGlvbiBpc0FycmF5KHZhbHVlKSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpIHx8IHZhbHVlIGluc3RhbmNlb2YgQXJyYXlcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgcGFzc2VkIGFyZ3VtZW50IGlzIGEgYm9vbGVhbiBhdHRyaWJ1dGVcbiAgICogQHBhcmFtICAgeyBTdHJpbmcgfSB2YWx1ZSAtXG4gICAqIEByZXR1cm5zIHsgQm9vbGVhbiB9IC1cbiAgICovXG4gIGZ1bmN0aW9uIGlzQm9vbEF0dHIodmFsdWUpIHtcbiAgICByZXR1cm4gUkVfQk9PTF9BVFRSUy50ZXN0KHZhbHVlKVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHBhc3NlZCBhcmd1bWVudCBpcyBhIHN0cmluZ1xuICAgKiBAcGFyYW0gICB7ICogfSB2YWx1ZSAtXG4gICAqIEByZXR1cm5zIHsgQm9vbGVhbiB9IC1cbiAgICovXG4gIGZ1bmN0aW9uIGlzU3RyaW5nKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gVF9TVFJJTkdcbiAgfVxuXG5cblxuICB2YXIgY2hlY2sgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gICAgaXNCbGFuazogaXNCbGFuayxcbiAgICBpc0Z1bmN0aW9uOiBpc0Z1bmN0aW9uLFxuICAgIGlzT2JqZWN0OiBpc09iamVjdCxcbiAgICBpc1N2ZzogaXNTdmcsXG4gICAgaXNXcml0YWJsZTogaXNXcml0YWJsZSxcbiAgICBpc0FycmF5OiBpc0FycmF5LFxuICAgIGlzQm9vbEF0dHI6IGlzQm9vbEF0dHIsXG4gICAgaXNOaWw6IGlzTmlsLFxuICAgIGlzU3RyaW5nOiBpc1N0cmluZyxcbiAgICBpc1VuZGVmaW5lZDogaXNVbmRlZmluZWRcbiAgfSk7XG5cbiAgLyoqXG4gICAqIENoZWNrIHdoZXRoZXIgYW4gYXJyYXkgY29udGFpbnMgYW4gaXRlbVxuICAgKiBAcGFyYW0gICB7IEFycmF5IH0gYXJyYXkgLSB0YXJnZXQgYXJyYXlcbiAgICogQHBhcmFtICAgeyAqIH0gaXRlbSAtIGl0ZW0gdG8gdGVzdFxuICAgKiBAcmV0dXJucyB7IEJvb2xlYW4gfSAtXG4gICAqL1xuICBmdW5jdGlvbiBjb250YWlucyhhcnJheSwgaXRlbSkge1xuICAgIHJldHVybiBhcnJheS5pbmRleE9mKGl0ZW0pICE9PSAtMVxuICB9XG5cbiAgLyoqXG4gICAqIFNwZWNpYWxpemVkIGZ1bmN0aW9uIGZvciBsb29waW5nIGFuIGFycmF5LWxpa2UgY29sbGVjdGlvbiB3aXRoIGBlYWNoPXt9YFxuICAgKiBAcGFyYW0gICB7IEFycmF5IH0gbGlzdCAtIGNvbGxlY3Rpb24gb2YgaXRlbXNcbiAgICogQHBhcmFtICAge0Z1bmN0aW9ufSBmbiAtIGNhbGxiYWNrIGZ1bmN0aW9uXG4gICAqIEByZXR1cm5zIHsgQXJyYXkgfSB0aGUgYXJyYXkgbG9vcGVkXG4gICAqL1xuICBmdW5jdGlvbiBlYWNoKGxpc3QsIGZuKSB7XG4gICAgdmFyIGxlbiA9IGxpc3QgPyBsaXN0Lmxlbmd0aCA6IDA7XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHsgZm4obGlzdFtpXSwgaSk7IH1cbiAgICByZXR1cm4gbGlzdFxuICB9XG5cbiAgLyoqXG4gICAqIEZhc3RlciBTdHJpbmcgc3RhcnRzV2l0aCBhbHRlcm5hdGl2ZVxuICAgKiBAcGFyYW0gICB7IFN0cmluZyB9IHN0ciAtIHNvdXJjZSBzdHJpbmdcbiAgICogQHBhcmFtICAgeyBTdHJpbmcgfSB2YWx1ZSAtIHRlc3Qgc3RyaW5nXG4gICAqIEByZXR1cm5zIHsgQm9vbGVhbiB9IC1cbiAgICovXG4gIGZ1bmN0aW9uIHN0YXJ0c1dpdGgoc3RyLCB2YWx1ZSkge1xuICAgIHJldHVybiBzdHIuc2xpY2UoMCwgdmFsdWUubGVuZ3RoKSA9PT0gdmFsdWVcbiAgfVxuXG4gIC8qKlxuICAgKiBGdW5jdGlvbiByZXR1cm5pbmcgYWx3YXlzIGEgdW5pcXVlIGlkZW50aWZpZXJcbiAgICogQHJldHVybnMgeyBOdW1iZXIgfSAtIG51bWJlciBmcm9tIDAuLi5uXG4gICAqL1xuICB2YXIgdWlkID0gKGZ1bmN0aW9uIHVpZCgpIHtcbiAgICB2YXIgaSA9IC0xO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiArK2k7IH1cbiAgfSkoKTtcblxuICAvKipcbiAgICogSGVscGVyIGZ1bmN0aW9uIHRvIHNldCBhbiBpbW11dGFibGUgcHJvcGVydHlcbiAgICogQHBhcmFtICAgeyBPYmplY3QgfSBlbCAtIG9iamVjdCB3aGVyZSB0aGUgbmV3IHByb3BlcnR5IHdpbGwgYmUgc2V0XG4gICAqIEBwYXJhbSAgIHsgU3RyaW5nIH0ga2V5IC0gb2JqZWN0IGtleSB3aGVyZSB0aGUgbmV3IHByb3BlcnR5IHdpbGwgYmUgc3RvcmVkXG4gICAqIEBwYXJhbSAgIHsgKiB9IHZhbHVlIC0gdmFsdWUgb2YgdGhlIG5ldyBwcm9wZXJ0eVxuICAgKiBAcGFyYW0gICB7IE9iamVjdCB9IG9wdGlvbnMgLSBzZXQgdGhlIHByb3Blcnkgb3ZlcnJpZGluZyB0aGUgZGVmYXVsdCBvcHRpb25zXG4gICAqIEByZXR1cm5zIHsgT2JqZWN0IH0gLSB0aGUgaW5pdGlhbCBvYmplY3RcbiAgICovXG4gIGZ1bmN0aW9uIGRlZmluZShlbCwga2V5LCB2YWx1ZSwgb3B0aW9ucykge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbCwga2V5LCBleHRlbmQoe1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9LCBvcHRpb25zKSk7XG4gICAgcmV0dXJuIGVsXG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBhIHN0cmluZyBjb250YWluaW5nIGRhc2hlcyB0byBjYW1lbCBjYXNlXG4gICAqIEBwYXJhbSAgIHsgU3RyaW5nIH0gc3RyIC0gaW5wdXQgc3RyaW5nXG4gICAqIEByZXR1cm5zIHsgU3RyaW5nIH0gbXktc3RyaW5nIC0+IG15U3RyaW5nXG4gICAqL1xuICBmdW5jdGlvbiB0b0NhbWVsKHN0cikge1xuICAgIHJldHVybiBzdHIucmVwbGFjZSgvLShcXHcpL2csIGZ1bmN0aW9uIChfLCBjKSB7IHJldHVybiBjLnRvVXBwZXJDYXNlKCk7IH0pXG4gIH1cblxuICAvKipcbiAgICogV2FybiBhIG1lc3NhZ2UgdmlhIGNvbnNvbGVcbiAgICogQHBhcmFtICAge1N0cmluZ30gbWVzc2FnZSAtIHdhcm5pbmcgbWVzc2FnZVxuICAgKi9cbiAgZnVuY3Rpb24gd2FybihtZXNzYWdlKSB7XG4gICAgaWYgKGNvbnNvbGUgJiYgY29uc29sZS53YXJuKSB7IGNvbnNvbGUud2FybihtZXNzYWdlKTsgfVxuICB9XG5cblxuXG4gIHZhciBtaXNjID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICAgIGNvbnRhaW5zOiBjb250YWlucyxcbiAgICBlYWNoOiBlYWNoLFxuICAgIGdldFByb3BEZXNjcmlwdG9yOiBnZXRQcm9wRGVzY3JpcHRvcixcbiAgICBzdGFydHNXaXRoOiBzdGFydHNXaXRoLFxuICAgIHVpZDogdWlkLFxuICAgIGRlZmluZVByb3BlcnR5OiBkZWZpbmUsXG4gICAgb2JqZWN0Q3JlYXRlOiBjcmVhdGUsXG4gICAgZXh0ZW5kOiBleHRlbmQsXG4gICAgdG9DYW1lbDogdG9DYW1lbCxcbiAgICB3YXJuOiB3YXJuXG4gIH0pO1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHByb3BlcnR5IG9mIGFuIG9iamVjdCBmb3IgYSBnaXZlbiBrZXkuIElmIHNvbWV0aGluZyBhbHJlYWR5XG4gICAqIGV4aXN0cyB0aGVyZSwgdGhlbiBpdCBiZWNvbWVzIGFuIGFycmF5IGNvbnRhaW5pbmcgYm90aCB0aGUgb2xkIGFuZCBuZXcgdmFsdWUuXG4gICAqIEBwYXJhbSB7IE9iamVjdCB9IG9iaiAtIG9iamVjdCBvbiB3aGljaCB0byBzZXQgdGhlIHByb3BlcnR5XG4gICAqIEBwYXJhbSB7IFN0cmluZyB9IGtleSAtIHByb3BlcnR5IG5hbWVcbiAgICogQHBhcmFtIHsgT2JqZWN0IH0gdmFsdWUgLSB0aGUgdmFsdWUgb2YgdGhlIHByb3BlcnR5IHRvIGJlIHNldFxuICAgKiBAcGFyYW0geyBCb29sZWFuIH0gZW5zdXJlQXJyYXkgLSBlbnN1cmUgdGhhdCB0aGUgcHJvcGVydHkgcmVtYWlucyBhbiBhcnJheVxuICAgKiBAcGFyYW0geyBOdW1iZXIgfSBpbmRleCAtIGFkZCB0aGUgbmV3IGl0ZW0gaW4gYSBjZXJ0YWluIGFycmF5IHBvc2l0aW9uXG4gICAqL1xuICBmdW5jdGlvbiBhcnJheWlzaEFkZChvYmosIGtleSwgdmFsdWUsIGVuc3VyZUFycmF5LCBpbmRleCkge1xuICAgIHZhciBkZXN0ID0gb2JqW2tleV07XG4gICAgdmFyIGlzQXJyID0gaXNBcnJheShkZXN0KTtcbiAgICB2YXIgaGFzSW5kZXggPSAhaXNVbmRlZmluZWQoaW5kZXgpO1xuXG4gICAgaWYgKGRlc3QgJiYgZGVzdCA9PT0gdmFsdWUpIHsgcmV0dXJuIH1cblxuICAgIC8vIGlmIHRoZSBrZXkgd2FzIG5ldmVyIHNldCwgc2V0IGl0IG9uY2VcbiAgICBpZiAoIWRlc3QgJiYgZW5zdXJlQXJyYXkpIHsgb2JqW2tleV0gPSBbdmFsdWVdOyB9XG4gICAgZWxzZSBpZiAoIWRlc3QpIHsgb2JqW2tleV0gPSB2YWx1ZTsgfVxuICAgIC8vIGlmIGl0IHdhcyBhbiBhcnJheSBhbmQgbm90IHlldCBzZXRcbiAgICBlbHNlIHtcbiAgICAgIGlmIChpc0Fycikge1xuICAgICAgICB2YXIgb2xkSW5kZXggPSBkZXN0LmluZGV4T2YodmFsdWUpO1xuICAgICAgICAvLyB0aGlzIGl0ZW0gbmV2ZXIgY2hhbmdlZCBpdHMgcG9zaXRpb25cbiAgICAgICAgaWYgKG9sZEluZGV4ID09PSBpbmRleCkgeyByZXR1cm4gfVxuICAgICAgICAvLyByZW1vdmUgdGhlIGl0ZW0gZnJvbSBpdHMgb2xkIHBvc2l0aW9uXG4gICAgICAgIGlmIChvbGRJbmRleCAhPT0gLTEpIHsgZGVzdC5zcGxpY2Uob2xkSW5kZXgsIDEpOyB9XG4gICAgICAgIC8vIG1vdmUgb3IgYWRkIHRoZSBpdGVtXG4gICAgICAgIGlmIChoYXNJbmRleCkge1xuICAgICAgICAgIGRlc3Quc3BsaWNlKGluZGV4LCAwLCB2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVzdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHsgb2JqW2tleV0gPSBbZGVzdCwgdmFsdWVdOyB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERldGVjdCB0aGUgdGFnIGltcGxlbWVudGF0aW9uIGJ5IGEgRE9NIG5vZGVcbiAgICogQHBhcmFtICAgeyBPYmplY3QgfSBkb20gLSBET00gbm9kZSB3ZSBuZWVkIHRvIHBhcnNlIHRvIGdldCBpdHMgdGFnIGltcGxlbWVudGF0aW9uXG4gICAqIEByZXR1cm5zIHsgT2JqZWN0IH0gaXQgcmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgaW1wbGVtZW50YXRpb24gb2YgYSBjdXN0b20gdGFnICh0ZW1wbGF0ZSBhbmQgYm9vdCBmdW5jdGlvbilcbiAgICovXG4gIGZ1bmN0aW9uIGdldChkb20pIHtcbiAgICByZXR1cm4gZG9tLnRhZ05hbWUgJiYgX19UQUdfSU1QTFtnZXRBdHRyaWJ1dGUoZG9tLCBJU19ESVJFQ1RJVkUpIHx8XG4gICAgICBnZXRBdHRyaWJ1dGUoZG9tLCBJU19ESVJFQ1RJVkUpIHx8IGRvbS50YWdOYW1lLnRvTG93ZXJDYXNlKCldXG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB0YWcgbmFtZSBvZiBhbnkgRE9NIG5vZGVcbiAgICogQHBhcmFtICAgeyBPYmplY3QgfSBkb20gLSBET00gbm9kZSB3ZSB3YW50IHRvIHBhcnNlXG4gICAqIEBwYXJhbSAgIHsgQm9vbGVhbiB9IHNraXBEYXRhSXMgLSBoYWNrIHRvIGlnbm9yZSB0aGUgZGF0YS1pcyBhdHRyaWJ1dGUgd2hlbiBhdHRhY2hpbmcgdG8gcGFyZW50XG4gICAqIEByZXR1cm5zIHsgU3RyaW5nIH0gbmFtZSB0byBpZGVudGlmeSB0aGlzIGRvbSBub2RlIGluIHJpb3RcbiAgICovXG4gIGZ1bmN0aW9uIGdldE5hbWUoZG9tLCBza2lwRGF0YUlzKSB7XG4gICAgdmFyIGNoaWxkID0gZ2V0KGRvbSk7XG4gICAgdmFyIG5hbWVkVGFnID0gIXNraXBEYXRhSXMgJiYgZ2V0QXR0cmlidXRlKGRvbSwgSVNfRElSRUNUSVZFKTtcbiAgICByZXR1cm4gbmFtZWRUYWcgJiYgIXRtcGwuaGFzRXhwcihuYW1lZFRhZykgP1xuICAgICAgbmFtZWRUYWcgOiBjaGlsZCA/IGNoaWxkLm5hbWUgOiBkb20udGFnTmFtZS50b0xvd2VyQ2FzZSgpXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGEgdGVtcG9yYXJ5IGNvbnRleHQgY29udGFpbmluZyBhbHNvIHRoZSBwYXJlbnQgcHJvcGVydGllc1xuICAgKiBAdGhpcyBUYWdcbiAgICogQHBhcmFtIHsgVGFnIH0gLSB0ZW1wb3JhcnkgdGFnIGNvbnRleHQgY29udGFpbmluZyBhbGwgdGhlIHBhcmVudCBwcm9wZXJ0aWVzXG4gICAqL1xuICBmdW5jdGlvbiBpbmhlcml0UGFyZW50UHJvcHMoKSB7XG4gICAgaWYgKHRoaXMucGFyZW50KSB7IHJldHVybiBleHRlbmQoY3JlYXRlKHRoaXMpLCB0aGlzLnBhcmVudCkgfVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvKlxuICAgIEluY2x1ZGVzIGhhY2tzIG5lZWRlZCBmb3IgdGhlIEludGVybmV0IEV4cGxvcmVyIHZlcnNpb24gOSBhbmQgYmVsb3dcbiAgICBTZWU6IGh0dHA6Ly9rYW5nYXguZ2l0aHViLmlvL2NvbXBhdC10YWJsZS9lczUvI2llOFxuICAgICAgICAgaHR0cDovL2NvZGVwbGFuZXQuaW8vZHJvcHBpbmctaWU4L1xuICAqL1xuXG4gIHZhclxuICAgIHJlSGFzWWllbGQgID0gLzx5aWVsZFxcYi9pLFxuICAgIHJlWWllbGRBbGwgID0gLzx5aWVsZFxccyooPzpcXC8+fD4oW1xcU1xcc10qPyk8XFwveWllbGRcXHMqPnw+KS9pZyxcbiAgICByZVlpZWxkU3JjICA9IC88eWllbGRcXHMrdG89WydcIl0oW14nXCI+XSopWydcIl1cXHMqPihbXFxTXFxzXSo/KTxcXC95aWVsZFxccyo+L2lnLFxuICAgIHJlWWllbGREZXN0ID0gLzx5aWVsZFxccytmcm9tPVsnXCJdPyhbLVxcd10rKVsnXCJdP1xccyooPzpcXC8+fD4oW1xcU1xcc10qPyk8XFwveWllbGRcXHMqPikvaWcsXG4gICAgcm9vdEVscyA9IHsgdHI6ICd0Ym9keScsIHRoOiAndHInLCB0ZDogJ3RyJywgY29sOiAnY29sZ3JvdXAnIH0sXG4gICAgdGJsVGFncyA9IElFX1ZFUlNJT04gJiYgSUVfVkVSU0lPTiA8IDEwID8gUkVfU1BFQ0lBTF9UQUdTIDogUkVfU1BFQ0lBTF9UQUdTX05PX09QVElPTixcbiAgICBHRU5FUklDID0gJ2RpdicsXG4gICAgU1ZHID0gJ3N2Zyc7XG5cblxuICAvKlxuICAgIENyZWF0ZXMgdGhlIHJvb3QgZWxlbWVudCBmb3IgdGFibGUgb3Igc2VsZWN0IGNoaWxkIGVsZW1lbnRzOlxuICAgIHRyL3RoL3RkL3RoZWFkL3Rmb290L3Rib2R5L2NhcHRpb24vY29sL2NvbGdyb3VwL29wdGlvbi9vcHRncm91cFxuICAqL1xuICBmdW5jdGlvbiBzcGVjaWFsVGFncyhlbCwgdG1wbCwgdGFnTmFtZSkge1xuXG4gICAgdmFyXG4gICAgICBzZWxlY3QgPSB0YWdOYW1lWzBdID09PSAnbycsXG4gICAgICBwYXJlbnQgPSBzZWxlY3QgPyAnc2VsZWN0PicgOiAndGFibGU+JztcblxuICAgIC8vIHRyaW0oKSBpcyBpbXBvcnRhbnQgaGVyZSwgdGhpcyBlbnN1cmVzIHdlIGRvbid0IGhhdmUgYXJ0aWZhY3RzLFxuICAgIC8vIHNvIHdlIGNhbiBjaGVjayBpZiB3ZSBoYXZlIG9ubHkgb25lIGVsZW1lbnQgaW5zaWRlIHRoZSBwYXJlbnRcbiAgICBlbC5pbm5lckhUTUwgPSAnPCcgKyBwYXJlbnQgKyB0bXBsLnRyaW0oKSArICc8LycgKyBwYXJlbnQ7XG4gICAgcGFyZW50ID0gZWwuZmlyc3RDaGlsZDtcblxuICAgIC8vIHJldHVybnMgdGhlIGltbWVkaWF0ZSBwYXJlbnQgaWYgdHIvdGgvdGQvY29sIGlzIHRoZSBvbmx5IGVsZW1lbnQsIGlmIG5vdFxuICAgIC8vIHJldHVybnMgdGhlIHdob2xlIHRyZWUsIGFzIHRoaXMgY2FuIGluY2x1ZGUgYWRkaXRpb25hbCBlbGVtZW50c1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgaWYgKHNlbGVjdCkge1xuICAgICAgcGFyZW50LnNlbGVjdGVkSW5kZXggPSAtMTsgIC8vIGZvciBJRTksIGNvbXBhdGlibGUgdy9jdXJyZW50IHJpb3QgYmVoYXZpb3JcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gYXZvaWRzIGluc2VydGlvbiBvZiBjb2ludGFpbmVyIGluc2lkZSBjb250YWluZXIgKGV4OiB0Ym9keSBpbnNpZGUgdGJvZHkpXG4gICAgICB2YXIgdG5hbWUgPSByb290RWxzW3RhZ05hbWVdO1xuICAgICAgaWYgKHRuYW1lICYmIHBhcmVudC5jaGlsZEVsZW1lbnRDb3VudCA9PT0gMSkgeyBwYXJlbnQgPSAkKHRuYW1lLCBwYXJlbnQpOyB9XG4gICAgfVxuICAgIHJldHVybiBwYXJlbnRcbiAgfVxuXG4gIC8qXG4gICAgUmVwbGFjZSB0aGUgeWllbGQgdGFnIGZyb20gYW55IHRhZyB0ZW1wbGF0ZSB3aXRoIHRoZSBpbm5lckhUTUwgb2YgdGhlXG4gICAgb3JpZ2luYWwgdGFnIGluIHRoZSBwYWdlXG4gICovXG4gIGZ1bmN0aW9uIHJlcGxhY2VZaWVsZCh0bXBsLCBodG1sKSB7XG4gICAgLy8gZG8gbm90aGluZyBpZiBubyB5aWVsZFxuICAgIGlmICghcmVIYXNZaWVsZC50ZXN0KHRtcGwpKSB7IHJldHVybiB0bXBsIH1cblxuICAgIC8vIGJlIGNhcmVmdWwgd2l0aCAjMTM0MyAtIHN0cmluZyBvbiB0aGUgc291cmNlIGhhdmluZyBgJDFgXG4gICAgdmFyIHNyYyA9IHt9O1xuXG4gICAgaHRtbCA9IGh0bWwgJiYgaHRtbC5yZXBsYWNlKHJlWWllbGRTcmMsIGZ1bmN0aW9uIChfLCByZWYsIHRleHQpIHtcbiAgICAgIHNyY1tyZWZdID0gc3JjW3JlZl0gfHwgdGV4dDsgICAvLyBwcmVzZXJ2ZSBmaXJzdCBkZWZpbml0aW9uXG4gICAgICByZXR1cm4gJydcbiAgICB9KS50cmltKCk7XG5cbiAgICByZXR1cm4gdG1wbFxuICAgICAgLnJlcGxhY2UocmVZaWVsZERlc3QsIGZ1bmN0aW9uIChfLCByZWYsIGRlZikgeyAgLy8geWllbGQgd2l0aCBmcm9tIC0gdG8gYXR0cnNcbiAgICAgICAgcmV0dXJuIHNyY1tyZWZdIHx8IGRlZiB8fCAnJ1xuICAgICAgfSlcbiAgICAgIC5yZXBsYWNlKHJlWWllbGRBbGwsIGZ1bmN0aW9uIChfLCBkZWYpIHsgICAgICAgIC8vIHlpZWxkIHdpdGhvdXQgYW55IFwiZnJvbVwiXG4gICAgICAgIHJldHVybiBodG1sIHx8IGRlZiB8fCAnJ1xuICAgICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgRE9NIGVsZW1lbnQgdG8gd3JhcCB0aGUgZ2l2ZW4gY29udGVudC4gTm9ybWFsbHkgYW4gYERJVmAsIGJ1dCBjYW4gYmVcbiAgICogYWxzbyBhIGBUQUJMRWAsIGBTRUxFQ1RgLCBgVEJPRFlgLCBgVFJgLCBvciBgQ09MR1JPVVBgIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSAgIHsgU3RyaW5nIH0gdG1wbCAgLSBUaGUgdGVtcGxhdGUgY29taW5nIGZyb20gdGhlIGN1c3RvbSB0YWcgZGVmaW5pdGlvblxuICAgKiBAcGFyYW0gICB7IFN0cmluZyB9IGh0bWwgLSBIVE1MIGNvbnRlbnQgdGhhdCBjb21lcyBmcm9tIHRoZSBET00gZWxlbWVudCB3aGVyZSB5b3VcbiAgICogICAgICAgICAgIHdpbGwgbW91bnQgdGhlIHRhZywgbW9zdGx5IHRoZSBvcmlnaW5hbCB0YWcgaW4gdGhlIHBhZ2VcbiAgICogQHBhcmFtICAgeyBCb29sZWFuIH0gaXNTdmcgLSB0cnVlIGlmIHRoZSByb290IG5vZGUgaXMgYW4gc3ZnXG4gICAqIEByZXR1cm5zIHsgSFRNTEVsZW1lbnQgfSBET00gZWxlbWVudCB3aXRoIF90bXBsXyBtZXJnZWQgdGhyb3VnaCBgWUlFTERgIHdpdGggdGhlIF9odG1sXy5cbiAgICovXG4gIGZ1bmN0aW9uIG1rZG9tKHRtcGwsIGh0bWwsIGlzU3ZnKSB7XG4gICAgdmFyIG1hdGNoICAgPSB0bXBsICYmIHRtcGwubWF0Y2goL15cXHMqPChbLVxcd10rKS8pO1xuICAgIHZhciAgdGFnTmFtZSA9IG1hdGNoICYmIG1hdGNoWzFdLnRvTG93ZXJDYXNlKCk7XG4gICAgdmFyIGVsID0gbWFrZUVsZW1lbnQoaXNTdmcgPyBTVkcgOiBHRU5FUklDKTtcblxuICAgIC8vIHJlcGxhY2UgYWxsIHRoZSB5aWVsZCB0YWdzIHdpdGggdGhlIHRhZyBpbm5lciBodG1sXG4gICAgdG1wbCA9IHJlcGxhY2VZaWVsZCh0bXBsLCBodG1sKTtcblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgaWYgKHRibFRhZ3MudGVzdCh0YWdOYW1lKSlcbiAgICAgIHsgZWwgPSBzcGVjaWFsVGFncyhlbCwgdG1wbCwgdGFnTmFtZSk7IH1cbiAgICBlbHNlXG4gICAgICB7IHNldElubmVySFRNTChlbCwgdG1wbCwgaXNTdmcpOyB9XG5cbiAgICByZXR1cm4gZWxcbiAgfVxuXG4gIHZhciBFVkVOVF9BVFRSX1JFID0gL15vbi87XG5cbiAgLyoqXG4gICAqIFRydWUgaWYgdGhlIGV2ZW50IGF0dHJpYnV0ZSBzdGFydHMgd2l0aCAnb24nXG4gICAqIEBwYXJhbSAgIHsgU3RyaW5nIH0gYXR0cmlidXRlIC0gZXZlbnQgYXR0cmlidXRlXG4gICAqIEByZXR1cm5zIHsgQm9vbGVhbiB9XG4gICAqL1xuICBmdW5jdGlvbiBpc0V2ZW50QXR0cmlidXRlKGF0dHJpYnV0ZSkge1xuICAgIHJldHVybiBFVkVOVF9BVFRSX1JFLnRlc3QoYXR0cmlidXRlKVxuICB9XG5cbiAgLyoqXG4gICAqIExvb3AgYmFja3dhcmQgYWxsIHRoZSBwYXJlbnRzIHRyZWUgdG8gZGV0ZWN0IHRoZSBmaXJzdCBjdXN0b20gcGFyZW50IHRhZ1xuICAgKiBAcGFyYW0gICB7IE9iamVjdCB9IHRhZyAtIGEgVGFnIGluc3RhbmNlXG4gICAqIEByZXR1cm5zIHsgT2JqZWN0IH0gdGhlIGluc3RhbmNlIG9mIHRoZSBmaXJzdCBjdXN0b20gcGFyZW50IHRhZyBmb3VuZFxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0SW1tZWRpYXRlQ3VzdG9tUGFyZW50KHRhZykge1xuICAgIHZhciBwdGFnID0gdGFnO1xuICAgIHdoaWxlIChwdGFnLl9fLmlzQW5vbnltb3VzKSB7XG4gICAgICBpZiAoIXB0YWcucGFyZW50KSB7IGJyZWFrIH1cbiAgICAgIHB0YWcgPSBwdGFnLnBhcmVudDtcbiAgICB9XG4gICAgcmV0dXJuIHB0YWdcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyIERPTSBldmVudHNcbiAgICogQHBhcmFtICAgeyBIVE1MRWxlbWVudCB9IGRvbSAtIGRvbSBlbGVtZW50IHRhcmdldCBvZiB0aGUgZXZlbnRcbiAgICogQHBhcmFtICAgeyBGdW5jdGlvbiB9IGhhbmRsZXIgLSB1c2VyIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSAgIHsgT2JqZWN0IH0gZSAtIGV2ZW50IG9iamVjdFxuICAgKi9cbiAgZnVuY3Rpb24gaGFuZGxlRXZlbnQoZG9tLCBoYW5kbGVyLCBlKSB7XG4gICAgdmFyIHB0YWcgPSB0aGlzLl9fLnBhcmVudDtcbiAgICB2YXIgaXRlbSA9IHRoaXMuX18uaXRlbTtcblxuICAgIGlmICghaXRlbSlcbiAgICAgIHsgd2hpbGUgKHB0YWcgJiYgIWl0ZW0pIHtcbiAgICAgICAgaXRlbSA9IHB0YWcuX18uaXRlbTtcbiAgICAgICAgcHRhZyA9IHB0YWcuX18ucGFyZW50O1xuICAgICAgfSB9XG5cbiAgICAvLyBvdmVycmlkZSB0aGUgZXZlbnQgcHJvcGVydGllc1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgaWYgKGlzV3JpdGFibGUoZSwgJ2N1cnJlbnRUYXJnZXQnKSkgeyBlLmN1cnJlbnRUYXJnZXQgPSBkb207IH1cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIGlmIChpc1dyaXRhYmxlKGUsICd0YXJnZXQnKSkgeyBlLnRhcmdldCA9IGUuc3JjRWxlbWVudDsgfVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgaWYgKGlzV3JpdGFibGUoZSwgJ3doaWNoJykpIHsgZS53aGljaCA9IGUuY2hhckNvZGUgfHwgZS5rZXlDb2RlOyB9XG5cbiAgICBlLml0ZW0gPSBpdGVtO1xuXG4gICAgaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuXG4gICAgLy8gYXZvaWQgYXV0byB1cGRhdGVzXG4gICAgaWYgKCFzZXR0aW5ncy5hdXRvVXBkYXRlKSB7IHJldHVybiB9XG5cbiAgICBpZiAoIWUucHJldmVudFVwZGF0ZSkge1xuICAgICAgdmFyIHAgPSBnZXRJbW1lZGlhdGVDdXN0b21QYXJlbnQodGhpcyk7XG4gICAgICAvLyBmaXhlcyAjMjA4M1xuICAgICAgaWYgKHAuaXNNb3VudGVkKSB7IHAudXBkYXRlKCk7IH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQXR0YWNoIGFuIGV2ZW50IHRvIGEgRE9NIG5vZGVcbiAgICogQHBhcmFtIHsgU3RyaW5nIH0gbmFtZSAtIGV2ZW50IG5hbWVcbiAgICogQHBhcmFtIHsgRnVuY3Rpb24gfSBoYW5kbGVyIC0gZXZlbnQgY2FsbGJhY2tcbiAgICogQHBhcmFtIHsgT2JqZWN0IH0gZG9tIC0gZG9tIG5vZGVcbiAgICogQHBhcmFtIHsgVGFnIH0gdGFnIC0gdGFnIGluc3RhbmNlXG4gICAqL1xuICBmdW5jdGlvbiBzZXRFdmVudEhhbmRsZXIobmFtZSwgaGFuZGxlciwgZG9tLCB0YWcpIHtcbiAgICB2YXIgZXZlbnROYW1lO1xuICAgIHZhciBjYiA9IGhhbmRsZUV2ZW50LmJpbmQodGFnLCBkb20sIGhhbmRsZXIpO1xuXG4gICAgLy8gYXZvaWQgdG8gYmluZCB0d2ljZSB0aGUgc2FtZSBldmVudFxuICAgIC8vIHBvc3NpYmxlIGZpeCBmb3IgIzIzMzJcbiAgICBkb21bbmFtZV0gPSBudWxsO1xuXG4gICAgLy8gbm9ybWFsaXplIGV2ZW50IG5hbWVcbiAgICBldmVudE5hbWUgPSBuYW1lLnJlcGxhY2UoUkVfRVZFTlRTX1BSRUZJWCwgJycpO1xuXG4gICAgLy8gY2FjaGUgdGhlIGxpc3RlbmVyIGludG8gdGhlIGxpc3RlbmVycyBhcnJheVxuICAgIGlmICghY29udGFpbnModGFnLl9fLmxpc3RlbmVycywgZG9tKSkgeyB0YWcuX18ubGlzdGVuZXJzLnB1c2goZG9tKTsgfVxuICAgIGlmICghZG9tW1JJT1RfRVZFTlRTX0tFWV0pIHsgZG9tW1JJT1RfRVZFTlRTX0tFWV0gPSB7fTsgfVxuICAgIGlmIChkb21bUklPVF9FVkVOVFNfS0VZXVtuYW1lXSkgeyBkb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGRvbVtSSU9UX0VWRU5UU19LRVldW25hbWVdKTsgfVxuXG4gICAgZG9tW1JJT1RfRVZFTlRTX0tFWV1bbmFtZV0gPSBjYjtcbiAgICBkb20uYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGNiLCBmYWxzZSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGNoaWxkIHRhZyBpbmNsdWRpbmcgaXQgY29ycmVjdGx5IGludG8gaXRzIHBhcmVudFxuICAgKiBAcGFyYW0gICB7IE9iamVjdCB9IGNoaWxkIC0gY2hpbGQgdGFnIGltcGxlbWVudGF0aW9uXG4gICAqIEBwYXJhbSAgIHsgT2JqZWN0IH0gb3B0cyAtIHRhZyBvcHRpb25zIGNvbnRhaW5pbmcgdGhlIERPTSBub2RlIHdoZXJlIHRoZSB0YWcgd2lsbCBiZSBtb3VudGVkXG4gICAqIEBwYXJhbSAgIHsgU3RyaW5nIH0gaW5uZXJIVE1MIC0gaW5uZXIgaHRtbCBvZiB0aGUgY2hpbGQgbm9kZVxuICAgKiBAcGFyYW0gICB7IE9iamVjdCB9IHBhcmVudCAtIGluc3RhbmNlIG9mIHRoZSBwYXJlbnQgdGFnIGluY2x1ZGluZyB0aGUgY2hpbGQgY3VzdG9tIHRhZ1xuICAgKiBAcmV0dXJucyB7IE9iamVjdCB9IGluc3RhbmNlIG9mIHRoZSBuZXcgY2hpbGQgdGFnIGp1c3QgY3JlYXRlZFxuICAgKi9cbiAgZnVuY3Rpb24gaW5pdENoaWxkKGNoaWxkLCBvcHRzLCBpbm5lckhUTUwsIHBhcmVudCkge1xuICAgIHZhciB0YWcgPSBjcmVhdGVUYWcoY2hpbGQsIG9wdHMsIGlubmVySFRNTCk7XG4gICAgdmFyIHRhZ05hbWUgPSBvcHRzLnRhZ05hbWUgfHwgZ2V0TmFtZShvcHRzLnJvb3QsIHRydWUpO1xuICAgIHZhciBwdGFnID0gZ2V0SW1tZWRpYXRlQ3VzdG9tUGFyZW50KHBhcmVudCk7XG4gICAgLy8gZml4IGZvciB0aGUgcGFyZW50IGF0dHJpYnV0ZSBpbiB0aGUgbG9vcGVkIGVsZW1lbnRzXG4gICAgZGVmaW5lKHRhZywgJ3BhcmVudCcsIHB0YWcpO1xuICAgIC8vIHN0b3JlIHRoZSByZWFsIHBhcmVudCB0YWdcbiAgICAvLyBpbiBzb21lIGNhc2VzIHRoaXMgY291bGQgYmUgZGlmZmVyZW50IGZyb20gdGhlIGN1c3RvbSBwYXJlbnQgdGFnXG4gICAgLy8gZm9yIGV4YW1wbGUgaW4gbmVzdGVkIGxvb3BzXG4gICAgdGFnLl9fLnBhcmVudCA9IHBhcmVudDtcblxuICAgIC8vIGFkZCB0aGlzIHRhZyB0byB0aGUgY3VzdG9tIHBhcmVudCB0YWdcbiAgICBhcnJheWlzaEFkZChwdGFnLnRhZ3MsIHRhZ05hbWUsIHRhZyk7XG5cbiAgICAvLyBhbmQgYWxzbyB0byB0aGUgcmVhbCBwYXJlbnQgdGFnXG4gICAgaWYgKHB0YWcgIT09IHBhcmVudClcbiAgICAgIHsgYXJyYXlpc2hBZGQocGFyZW50LnRhZ3MsIHRhZ05hbWUsIHRhZyk7IH1cblxuICAgIHJldHVybiB0YWdcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGFuIGl0ZW0gZnJvbSBhbiBvYmplY3QgYXQgYSBnaXZlbiBrZXkuIElmIHRoZSBrZXkgcG9pbnRzIHRvIGFuIGFycmF5LFxuICAgKiB0aGVuIHRoZSBpdGVtIGlzIGp1c3QgcmVtb3ZlZCBmcm9tIHRoZSBhcnJheS5cbiAgICogQHBhcmFtIHsgT2JqZWN0IH0gb2JqIC0gb2JqZWN0IG9uIHdoaWNoIHRvIHJlbW92ZSB0aGUgcHJvcGVydHlcbiAgICogQHBhcmFtIHsgU3RyaW5nIH0ga2V5IC0gcHJvcGVydHkgbmFtZVxuICAgKiBAcGFyYW0geyBPYmplY3QgfSB2YWx1ZSAtIHRoZSB2YWx1ZSBvZiB0aGUgcHJvcGVydHkgdG8gYmUgcmVtb3ZlZFxuICAgKiBAcGFyYW0geyBCb29sZWFuIH0gZW5zdXJlQXJyYXkgLSBlbnN1cmUgdGhhdCB0aGUgcHJvcGVydHkgcmVtYWlucyBhbiBhcnJheVxuICAqL1xuICBmdW5jdGlvbiBhcnJheWlzaFJlbW92ZShvYmosIGtleSwgdmFsdWUsIGVuc3VyZUFycmF5KSB7XG4gICAgaWYgKGlzQXJyYXkob2JqW2tleV0pKSB7XG4gICAgICB2YXIgaW5kZXggPSBvYmpba2V5XS5pbmRleE9mKHZhbHVlKTtcbiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsgb2JqW2tleV0uc3BsaWNlKGluZGV4LCAxKTsgfVxuICAgICAgaWYgKCFvYmpba2V5XS5sZW5ndGgpIHsgZGVsZXRlIG9ialtrZXldOyB9XG4gICAgICBlbHNlIGlmIChvYmpba2V5XS5sZW5ndGggPT09IDEgJiYgIWVuc3VyZUFycmF5KSB7IG9ialtrZXldID0gb2JqW2tleV1bMF07IH1cbiAgICB9IGVsc2UgaWYgKG9ialtrZXldID09PSB2YWx1ZSlcbiAgICAgIHsgZGVsZXRlIG9ialtrZXldOyB9IC8vIG90aGVyd2lzZSBqdXN0IGRlbGV0ZSB0aGUga2V5XG4gIH1cblxuICAvKipcbiAgICogQWRkcyB0aGUgZWxlbWVudHMgZm9yIGEgdmlydHVhbCB0YWdcbiAgICogQHRoaXMgVGFnXG4gICAqIEBwYXJhbSB7IE5vZGUgfSBzcmMgLSB0aGUgbm9kZSB0aGF0IHdpbGwgZG8gdGhlIGluc2VydGluZyBvciBhcHBlbmRpbmdcbiAgICogQHBhcmFtIHsgVGFnIH0gdGFyZ2V0IC0gb25seSBpZiBpbnNlcnRpbmcsIGluc2VydCBiZWZvcmUgdGhpcyB0YWcncyBmaXJzdCBjaGlsZFxuICAgKi9cbiAgZnVuY3Rpb24gbWFrZVZpcnR1YWwoc3JjLCB0YXJnZXQpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIHZhciBoZWFkID0gY3JlYXRlRE9NUGxhY2Vob2xkZXIoKTtcbiAgICB2YXIgdGFpbCA9IGNyZWF0ZURPTVBsYWNlaG9sZGVyKCk7XG4gICAgdmFyIGZyYWcgPSBjcmVhdGVGcmFnbWVudCgpO1xuICAgIHZhciBzaWI7XG4gICAgdmFyIGVsO1xuXG4gICAgdGhpcy5yb290Lmluc2VydEJlZm9yZShoZWFkLCB0aGlzLnJvb3QuZmlyc3RDaGlsZCk7XG4gICAgdGhpcy5yb290LmFwcGVuZENoaWxkKHRhaWwpO1xuXG4gICAgdGhpcy5fXy5oZWFkID0gZWwgPSBoZWFkO1xuICAgIHRoaXMuX18udGFpbCA9IHRhaWw7XG5cbiAgICB3aGlsZSAoZWwpIHtcbiAgICAgIHNpYiA9IGVsLm5leHRTaWJsaW5nO1xuICAgICAgZnJhZy5hcHBlbmRDaGlsZChlbCk7XG4gICAgICB0aGlzJDEuX18udmlydHMucHVzaChlbCk7IC8vIGhvbGQgZm9yIHVubW91bnRpbmdcbiAgICAgIGVsID0gc2liO1xuICAgIH1cblxuICAgIGlmICh0YXJnZXQpXG4gICAgICB7IHNyYy5pbnNlcnRCZWZvcmUoZnJhZywgdGFyZ2V0Ll9fLmhlYWQpOyB9XG4gICAgZWxzZVxuICAgICAgeyBzcmMuYXBwZW5kQ2hpbGQoZnJhZyk7IH1cbiAgfVxuXG4gIC8qKlxuICAgKiBtYWtlcyBhIHRhZyB2aXJ0dWFsIGFuZCByZXBsYWNlcyBhIHJlZmVyZW5jZSBpbiB0aGUgZG9tXG4gICAqIEB0aGlzIFRhZ1xuICAgKiBAcGFyYW0geyB0YWcgfSB0aGUgdGFnIHRvIG1ha2UgdmlydHVhbFxuICAgKiBAcGFyYW0geyByZWYgfSB0aGUgZG9tIHJlZmVyZW5jZSBsb2NhdGlvblxuICAgKi9cbiAgZnVuY3Rpb24gbWFrZVJlcGxhY2VWaXJ0dWFsKHRhZywgcmVmKSB7XG4gICAgaWYgKCFyZWYucGFyZW50Tm9kZSkgeyByZXR1cm4gfVxuICAgIHZhciBmcmFnID0gY3JlYXRlRnJhZ21lbnQoKTtcbiAgICBtYWtlVmlydHVhbC5jYWxsKHRhZywgZnJhZyk7XG4gICAgcmVmLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGZyYWcsIHJlZik7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGR5bmFtaWNhbGx5IGNyZWF0ZWQgZGF0YS1pcyB0YWdzIHdpdGggY2hhbmdpbmcgZXhwcmVzc2lvbnNcbiAgICogQHBhcmFtIHsgT2JqZWN0IH0gZXhwciAtIGV4cHJlc3Npb24gdGFnIGFuZCBleHByZXNzaW9uIGluZm9cbiAgICogQHBhcmFtIHsgVGFnIH0gICAgcGFyZW50IC0gcGFyZW50IGZvciB0YWcgY3JlYXRpb25cbiAgICogQHBhcmFtIHsgU3RyaW5nIH0gdGFnTmFtZSAtIHRhZyBpbXBsZW1lbnRhdGlvbiB3ZSB3YW50IHRvIHVzZVxuICAgKi9cbiAgZnVuY3Rpb24gdXBkYXRlRGF0YUlzKGV4cHIsIHBhcmVudCwgdGFnTmFtZSkge1xuICAgIHZhciB0YWcgPSBleHByLnRhZyB8fCBleHByLmRvbS5fdGFnO1xuICAgIHZhciByZWY7XG5cbiAgICB2YXIgcmVmJDEgPSB0YWcgPyB0YWcuX18gOiB7fTtcbiAgICB2YXIgaGVhZCA9IHJlZiQxLmhlYWQ7XG4gICAgdmFyIGlzVmlydHVhbCA9IGV4cHIuZG9tLnRhZ05hbWUgPT09ICdWSVJUVUFMJztcblxuICAgIGlmICh0YWcgJiYgZXhwci50YWdOYW1lID09PSB0YWdOYW1lKSB7XG4gICAgICB0YWcudXBkYXRlKCk7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBzeW5jIF9wYXJlbnQgdG8gYWNjb21tb2RhdGUgY2hhbmdpbmcgdGFnbmFtZXNcbiAgICBpZiAodGFnKSB7XG4gICAgICAvLyBuZWVkIHBsYWNlaG9sZGVyIGJlZm9yZSB1bm1vdW50XG4gICAgICBpZihpc1ZpcnR1YWwpIHtcbiAgICAgICAgcmVmID0gY3JlYXRlRE9NUGxhY2Vob2xkZXIoKTtcbiAgICAgICAgaGVhZC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShyZWYsIGhlYWQpO1xuICAgICAgfVxuXG4gICAgICB0YWcudW5tb3VudCh0cnVlKTtcbiAgICB9XG5cbiAgICAvLyB1bmFibGUgdG8gZ2V0IHRoZSB0YWcgbmFtZVxuICAgIGlmICghaXNTdHJpbmcodGFnTmFtZSkpIHsgcmV0dXJuIH1cblxuICAgIGV4cHIuaW1wbCA9IF9fVEFHX0lNUExbdGFnTmFtZV07XG5cbiAgICAvLyB1bmtub3duIGltcGxlbWVudGF0aW9uXG4gICAgaWYgKCFleHByLmltcGwpIHsgcmV0dXJuIH1cblxuICAgIGV4cHIudGFnID0gdGFnID0gaW5pdENoaWxkKFxuICAgICAgZXhwci5pbXBsLCB7XG4gICAgICAgIHJvb3Q6IGV4cHIuZG9tLFxuICAgICAgICBwYXJlbnQ6IHBhcmVudCxcbiAgICAgICAgdGFnTmFtZTogdGFnTmFtZVxuICAgICAgfSxcbiAgICAgIGV4cHIuZG9tLmlubmVySFRNTCxcbiAgICAgIHBhcmVudFxuICAgICk7XG5cbiAgICBlYWNoKGV4cHIuYXR0cnMsIGZ1bmN0aW9uIChhKSB7IHJldHVybiBzZXRBdHRyaWJ1dGUodGFnLnJvb3QsIGEubmFtZSwgYS52YWx1ZSk7IH0pO1xuICAgIGV4cHIudGFnTmFtZSA9IHRhZ05hbWU7XG4gICAgdGFnLm1vdW50KCk7XG5cbiAgICAvLyByb290IGV4aXN0IGZpcnN0IHRpbWUsIGFmdGVyIHVzZSBwbGFjZWhvbGRlclxuICAgIGlmIChpc1ZpcnR1YWwpIHsgbWFrZVJlcGxhY2VWaXJ0dWFsKHRhZywgcmVmIHx8IHRhZy5yb290KTsgfVxuXG4gICAgLy8gcGFyZW50IGlzIHRoZSBwbGFjZWhvbGRlciB0YWcsIG5vdCB0aGUgZHluYW1pYyB0YWcgc28gY2xlYW4gdXBcbiAgICBwYXJlbnQuX18ub25Vbm1vdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGRlbE5hbWUgPSB0YWcub3B0cy5kYXRhSXM7XG4gICAgICBhcnJheWlzaFJlbW92ZSh0YWcucGFyZW50LnRhZ3MsIGRlbE5hbWUsIHRhZyk7XG4gICAgICBhcnJheWlzaFJlbW92ZSh0YWcuX18ucGFyZW50LnRhZ3MsIGRlbE5hbWUsIHRhZyk7XG4gICAgICB0YWcudW5tb3VudCgpO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogTm9tYWxpemUgYW55IGF0dHJpYnV0ZSByZW1vdmluZyB0aGUgXCJyaW90LVwiIHByZWZpeFxuICAgKiBAcGFyYW0gICB7IFN0cmluZyB9IGF0dHJOYW1lIC0gb3JpZ2luYWwgYXR0cmlidXRlIG5hbWVcbiAgICogQHJldHVybnMgeyBTdHJpbmcgfSB2YWxpZCBodG1sIGF0dHJpYnV0ZSBuYW1lXG4gICAqL1xuICBmdW5jdGlvbiBub3JtYWxpemVBdHRyTmFtZShhdHRyTmFtZSkge1xuICAgIGlmICghYXR0ck5hbWUpIHsgcmV0dXJuIG51bGwgfVxuICAgIGF0dHJOYW1lID0gYXR0ck5hbWUucmVwbGFjZShBVFRSU19QUkVGSVgsICcnKTtcbiAgICBpZiAoQ0FTRV9TRU5TSVRJVkVfQVRUUklCVVRFU1thdHRyTmFtZV0pIHsgYXR0ck5hbWUgPSBDQVNFX1NFTlNJVElWRV9BVFRSSUJVVEVTW2F0dHJOYW1lXTsgfVxuICAgIHJldHVybiBhdHRyTmFtZVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBvbiBzaW5nbGUgdGFnIGV4cHJlc3Npb25cbiAgICogQHRoaXMgVGFnXG4gICAqIEBwYXJhbSB7IE9iamVjdCB9IGV4cHIgLSBleHByZXNzaW9uIGxvZ2ljXG4gICAqIEByZXR1cm5zIHsgdW5kZWZpbmVkIH1cbiAgICovXG4gIGZ1bmN0aW9uIHVwZGF0ZUV4cHJlc3Npb24oZXhwcikge1xuICAgIGlmICh0aGlzLnJvb3QgJiYgZ2V0QXR0cmlidXRlKHRoaXMucm9vdCwndmlydHVhbGl6ZWQnKSkgeyByZXR1cm4gfVxuXG4gICAgdmFyIGRvbSA9IGV4cHIuZG9tO1xuICAgIC8vIHJlbW92ZSB0aGUgcmlvdC0gcHJlZml4XG4gICAgdmFyIGF0dHJOYW1lID0gbm9ybWFsaXplQXR0ck5hbWUoZXhwci5hdHRyKTtcbiAgICB2YXIgaXNUb2dnbGUgPSBjb250YWlucyhbU0hPV19ESVJFQ1RJVkUsIEhJREVfRElSRUNUSVZFXSwgYXR0ck5hbWUpO1xuICAgIHZhciBpc1ZpcnR1YWwgPSBleHByLnJvb3QgJiYgZXhwci5yb290LnRhZ05hbWUgPT09ICdWSVJUVUFMJztcbiAgICB2YXIgcmVmID0gdGhpcy5fXztcbiAgICB2YXIgaXNBbm9ueW1vdXMgPSByZWYuaXNBbm9ueW1vdXM7XG4gICAgdmFyIHBhcmVudCA9IGRvbSAmJiAoZXhwci5wYXJlbnQgfHwgZG9tLnBhcmVudE5vZGUpO1xuICAgIHZhciBrZWVwVmFsdWVBdHRyaWJ1dGVzID0gc2V0dGluZ3Mua2VlcFZhbHVlQXR0cmlidXRlcztcbiAgICAvLyBkZXRlY3QgdGhlIHN0eWxlIGF0dHJpYnV0ZXNcbiAgICB2YXIgaXNTdHlsZUF0dHIgPSBhdHRyTmFtZSA9PT0gJ3N0eWxlJztcbiAgICB2YXIgaXNDbGFzc0F0dHIgPSBhdHRyTmFtZSA9PT0gJ2NsYXNzJztcbiAgICB2YXIgaXNWYWx1ZUF0dHIgPSBhdHRyTmFtZSA9PT0gJ3ZhbHVlJztcblxuICAgIHZhciB2YWx1ZTtcblxuICAgIC8vIGlmIGl0J3MgYSB0YWcgd2UgY291bGQgdG90YWxseSBza2lwIHRoZSByZXN0XG4gICAgaWYgKGV4cHIuX3Jpb3RfaWQpIHtcbiAgICAgIGlmIChleHByLl9fLndhc0NyZWF0ZWQpIHtcbiAgICAgICAgZXhwci51cGRhdGUoKTtcbiAgICAgIC8vIGlmIGl0IGhhc24ndCBiZWVuIG1vdW50ZWQgeWV0LCBkbyB0aGF0IG5vdy5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGV4cHIubW91bnQoKTtcbiAgICAgICAgaWYgKGlzVmlydHVhbCkge1xuICAgICAgICAgIG1ha2VSZXBsYWNlVmlydHVhbChleHByLCBleHByLnJvb3QpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBpZiB0aGlzIGV4cHJlc3Npb24gaGFzIHRoZSB1cGRhdGUgbWV0aG9kIGl0IG1lYW5zIGl0IGNhbiBoYW5kbGUgdGhlIERPTSBjaGFuZ2VzIGJ5IGl0c2VsZlxuICAgIGlmIChleHByLnVwZGF0ZSkgeyByZXR1cm4gZXhwci51cGRhdGUoKSB9XG5cbiAgICB2YXIgY29udGV4dCA9IGlzVG9nZ2xlICYmICFpc0Fub255bW91cyA/IGluaGVyaXRQYXJlbnRQcm9wcy5jYWxsKHRoaXMpIDogdGhpcztcblxuICAgIC8vIC4uLml0IHNlZW1zIHRvIGJlIGEgc2ltcGxlIGV4cHJlc3Npb24gc28gd2UgdHJ5IHRvIGNhbGN1bGF0ZSBpdHMgdmFsdWVcbiAgICB2YWx1ZSA9IHRtcGwoZXhwci5leHByLCBjb250ZXh0KTtcblxuICAgIHZhciBoYXNWYWx1ZSA9ICFpc0JsYW5rKHZhbHVlKTtcbiAgICB2YXIgaXNPYmogPSBpc09iamVjdCh2YWx1ZSk7XG5cbiAgICAvLyBjb252ZXJ0IHRoZSBzdHlsZS9jbGFzcyBvYmplY3RzIHRvIHN0cmluZ3NcbiAgICBpZiAoaXNPYmopIHtcbiAgICAgIGlmIChpc0NsYXNzQXR0cikge1xuICAgICAgICB2YWx1ZSA9IHRtcGwoSlNPTi5zdHJpbmdpZnkodmFsdWUpLCB0aGlzKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNTdHlsZUF0dHIpIHtcbiAgICAgICAgdmFsdWUgPSBzdHlsZU9iamVjdFRvU3RyaW5nKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZW1vdmUgb3JpZ2luYWwgYXR0cmlidXRlXG4gICAgaWYgKGV4cHIuYXR0ciAmJlxuICAgICAgICAoXG4gICAgICAgICAgLy8gdGhlIG9yaWdpbmFsIGF0dHJpYnV0ZSBjYW4gYmUgcmVtb3ZlZCBvbmx5IGlmIHdlIGFyZSBwYXJzaW5nIHRoZSBvcmlnaW5hbCBleHByZXNzaW9uXG4gICAgICAgICAgIWV4cHIud2FzUGFyc2VkT25jZSB8fFxuICAgICAgICAgIC8vIG9yIGl0cyB2YWx1ZSBpcyBmYWxzZVxuICAgICAgICAgIHZhbHVlID09PSBmYWxzZSB8fFxuICAgICAgICAgIC8vIG9yIGlmIGl0cyB2YWx1ZSBpcyBjdXJyZW50bHkgZmFsc3kuLi5cbiAgICAgICAgICAvLyBXZSB3aWxsIGtlZXAgdGhlIFwidmFsdWVcIiBhdHRyaWJ1dGVzIGlmIHRoZSBcImtlZXBWYWx1ZUF0dHJpYnV0ZXNcIlxuICAgICAgICAgIC8vIGlzIGVuYWJsZWQgdGhvdWdoXG4gICAgICAgICAgKCFoYXNWYWx1ZSAmJiAoIWlzVmFsdWVBdHRyIHx8IGlzVmFsdWVBdHRyICYmICFrZWVwVmFsdWVBdHRyaWJ1dGVzKSlcbiAgICAgICAgKVxuICAgICkge1xuICAgICAgLy8gcmVtb3ZlIGVpdGhlciByaW90LSogYXR0cmlidXRlcyBvciBqdXN0IHRoZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAgcmVtb3ZlQXR0cmlidXRlKGRvbSwgZ2V0QXR0cmlidXRlKGRvbSwgZXhwci5hdHRyKSA/IGV4cHIuYXR0ciA6IGF0dHJOYW1lKTtcbiAgICB9XG5cbiAgICAvLyBmb3IgdGhlIGJvb2xlYW4gYXR0cmlidXRlcyB3ZSBkb24ndCBuZWVkIHRoZSB2YWx1ZVxuICAgIC8vIHdlIGNhbiBjb252ZXJ0IGl0IHRvIGNoZWNrZWQ9dHJ1ZSB0byBjaGVja2VkPWNoZWNrZWRcbiAgICBpZiAoZXhwci5ib29sKSB7IHZhbHVlID0gdmFsdWUgPyBhdHRyTmFtZSA6IGZhbHNlOyB9XG4gICAgaWYgKGV4cHIuaXNSdGFnKSB7IHJldHVybiB1cGRhdGVEYXRhSXMoZXhwciwgdGhpcywgdmFsdWUpIH1cbiAgICBpZiAoZXhwci53YXNQYXJzZWRPbmNlICYmIGV4cHIudmFsdWUgPT09IHZhbHVlKSB7IHJldHVybiB9XG5cbiAgICAvLyB1cGRhdGUgdGhlIGV4cHJlc3Npb24gdmFsdWVcbiAgICBleHByLnZhbHVlID0gdmFsdWU7XG4gICAgZXhwci53YXNQYXJzZWRPbmNlID0gdHJ1ZTtcblxuICAgIC8vIGlmIHRoZSB2YWx1ZSBpcyBhbiBvYmplY3QgKGFuZCBpdCdzIG5vdCBhIHN0eWxlIG9yIGNsYXNzIGF0dHJpYnV0ZSkgd2UgY2FuIG5vdCBkbyBtdWNoIG1vcmUgd2l0aCBpdFxuICAgIGlmIChpc09iaiAmJiAhaXNDbGFzc0F0dHIgJiYgIWlzU3R5bGVBdHRyICYmICFpc1RvZ2dsZSkgeyByZXR1cm4gfVxuICAgIC8vIGF2b2lkIHRvIHJlbmRlciB1bmRlZmluZWQvbnVsbCB2YWx1ZXNcbiAgICBpZiAoIWhhc1ZhbHVlKSB7IHZhbHVlID0gJyc7IH1cblxuICAgIC8vIHRleHRhcmVhIGFuZCB0ZXh0IG5vZGVzIGhhdmUgbm8gYXR0cmlidXRlIG5hbWVcbiAgICBpZiAoIWF0dHJOYW1lKSB7XG4gICAgICAvLyBhYm91dCAjODE1IHcvbyByZXBsYWNlOiB0aGUgYnJvd3NlciBjb252ZXJ0cyB0aGUgdmFsdWUgdG8gYSBzdHJpbmcsXG4gICAgICAvLyB0aGUgY29tcGFyaXNvbiBieSBcIj09XCIgZG9lcyB0b28sIGJ1dCBub3QgaW4gdGhlIHNlcnZlclxuICAgICAgdmFsdWUgKz0gJyc7XG4gICAgICAvLyB0ZXN0IGZvciBwYXJlbnQgYXZvaWRzIGVycm9yIHdpdGggaW52YWxpZCBhc3NpZ25tZW50IHRvIG5vZGVWYWx1ZVxuICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICAvLyBjYWNoZSB0aGUgcGFyZW50IG5vZGUgYmVjYXVzZSBzb21laG93IGl0IHdpbGwgYmVjb21lIG51bGwgb24gSUVcbiAgICAgICAgLy8gb24gdGhlIG5leHQgaXRlcmF0aW9uXG4gICAgICAgIGV4cHIucGFyZW50ID0gcGFyZW50O1xuICAgICAgICBpZiAocGFyZW50LnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcbiAgICAgICAgICBwYXJlbnQudmFsdWUgPSB2YWx1ZTsgICAgICAgICAgICAgICAgICAgIC8vICMxMTEzXG4gICAgICAgICAgaWYgKCFJRV9WRVJTSU9OKSB7IGRvbS5ub2RlVmFsdWUgPSB2YWx1ZTsgfSAgLy8gIzE2MjUgSUUgdGhyb3dzIGhlcmUsIG5vZGVWYWx1ZVxuICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aWxsIGJlIGF2YWlsYWJsZSBvbiAndXBkYXRlZCdcbiAgICAgICAgZWxzZSB7IGRvbS5ub2RlVmFsdWUgPSB2YWx1ZTsgfVxuICAgICAgfVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgc3dpdGNoICh0cnVlKSB7XG4gICAgLy8gaGFuZGxlIGV2ZW50cyBiaW5kaW5nXG4gICAgY2FzZSBpc0Z1bmN0aW9uKHZhbHVlKTpcbiAgICAgIGlmIChpc0V2ZW50QXR0cmlidXRlKGF0dHJOYW1lKSkge1xuICAgICAgICBzZXRFdmVudEhhbmRsZXIoYXR0ck5hbWUsIHZhbHVlLCBkb20sIHRoaXMpO1xuICAgICAgfVxuICAgICAgYnJlYWtcbiAgICAvLyBzaG93IC8gaGlkZVxuICAgIGNhc2UgaXNUb2dnbGU6XG4gICAgICB0b2dnbGVWaXNpYmlsaXR5KGRvbSwgYXR0ck5hbWUgPT09IEhJREVfRElSRUNUSVZFID8gIXZhbHVlIDogdmFsdWUpO1xuICAgICAgYnJlYWtcbiAgICAvLyBoYW5kbGUgYXR0cmlidXRlc1xuICAgIGRlZmF1bHQ6XG4gICAgICBpZiAoZXhwci5ib29sKSB7XG4gICAgICAgIGRvbVthdHRyTmFtZV0gPSB2YWx1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzVmFsdWVBdHRyICYmIGRvbS52YWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgZG9tLnZhbHVlID0gdmFsdWU7XG4gICAgICB9IGVsc2UgaWYgKGhhc1ZhbHVlICYmIHZhbHVlICE9PSBmYWxzZSkge1xuICAgICAgICBzZXRBdHRyaWJ1dGUoZG9tLCBhdHRyTmFtZSwgdmFsdWUpO1xuICAgICAgfVxuXG4gICAgICAvLyBtYWtlIHN1cmUgdGhhdCBpbiBjYXNlIG9mIHN0eWxlIGNoYW5nZXNcbiAgICAgIC8vIHRoZSBlbGVtZW50IHN0YXlzIGhpZGRlblxuICAgICAgaWYgKGlzU3R5bGVBdHRyICYmIGRvbS5oaWRkZW4pIHsgdG9nZ2xlVmlzaWJpbGl0eShkb20sIGZhbHNlKTsgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgYWxsIHRoZSBleHByZXNzaW9ucyBpbiBhIFRhZyBpbnN0YW5jZVxuICAgKiBAdGhpcyBUYWdcbiAgICogQHBhcmFtIHsgQXJyYXkgfSBleHByZXNzaW9ucyAtIGV4cHJlc3Npb24gdGhhdCBtdXN0IGJlIHJlIGV2YWx1YXRlZFxuICAgKi9cbiAgZnVuY3Rpb24gdXBkYXRlKGV4cHJlc3Npb25zKSB7XG4gICAgZWFjaChleHByZXNzaW9ucywgdXBkYXRlRXhwcmVzc2lvbi5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXZSBuZWVkIHRvIHVwZGF0ZSBvcHRzIGZvciB0aGlzIHRhZy4gVGhhdCByZXF1aXJlcyB1cGRhdGluZyB0aGUgZXhwcmVzc2lvbnNcbiAgICogaW4gYW55IGF0dHJpYnV0ZXMgb24gdGhlIHRhZywgYW5kIHRoZW4gY29weWluZyB0aGUgcmVzdWx0IG9udG8gb3B0cy5cbiAgICogQHRoaXMgVGFnXG4gICAqIEBwYXJhbSAgIHtCb29sZWFufSBpc0xvb3AgLSBpcyBpdCBhIGxvb3AgdGFnP1xuICAgKiBAcGFyYW0gICB7IFRhZyB9ICBwYXJlbnQgLSBwYXJlbnQgdGFnIG5vZGVcbiAgICogQHBhcmFtICAgeyBCb29sZWFuIH0gIGlzQW5vbnltb3VzIC0gaXMgaXQgYSB0YWcgd2l0aG91dCBhbnkgaW1wbD8gKGEgdGFnIG5vdCByZWdpc3RlcmVkKVxuICAgKiBAcGFyYW0gICB7IE9iamVjdCB9ICBvcHRzIC0gdGFnIG9wdGlvbnNcbiAgICogQHBhcmFtICAgeyBBcnJheSB9ICBpbnN0QXR0cnMgLSB0YWcgYXR0cmlidXRlcyBhcnJheVxuICAgKi9cbiAgZnVuY3Rpb24gdXBkYXRlT3B0cyhpc0xvb3AsIHBhcmVudCwgaXNBbm9ueW1vdXMsIG9wdHMsIGluc3RBdHRycykge1xuICAgIC8vIGlzQW5vbnltb3VzIGBlYWNoYCB0YWdzIHRyZWF0IGBkb21gIGFuZCBgcm9vdGAgZGlmZmVyZW50bHkuIEluIHRoaXMgY2FzZVxuICAgIC8vIChhbmQgb25seSB0aGlzIGNhc2UpIHdlIGRvbid0IG5lZWQgdG8gZG8gdXBkYXRlT3B0cywgYmVjYXVzZSB0aGUgcmVndWxhciBwYXJzZVxuICAgIC8vIHdpbGwgdXBkYXRlIHRob3NlIGF0dHJzLiBQbHVzLCBpc0Fub255bW91cyB0YWdzIGRvbid0IG5lZWQgb3B0cyBhbnl3YXlcbiAgICBpZiAoaXNMb29wICYmIGlzQW5vbnltb3VzKSB7IHJldHVybiB9XG4gICAgdmFyIGN0eCA9IGlzTG9vcCA/IGluaGVyaXRQYXJlbnRQcm9wcy5jYWxsKHRoaXMpIDogcGFyZW50IHx8IHRoaXM7XG5cbiAgICBlYWNoKGluc3RBdHRycywgZnVuY3Rpb24gKGF0dHIpIHtcbiAgICAgIGlmIChhdHRyLmV4cHIpIHsgdXBkYXRlRXhwcmVzc2lvbi5jYWxsKGN0eCwgYXR0ci5leHByKTsgfVxuICAgICAgLy8gbm9ybWFsaXplIHRoZSBhdHRyaWJ1dGUgbmFtZXNcbiAgICAgIG9wdHNbdG9DYW1lbChhdHRyLm5hbWUpLnJlcGxhY2UoQVRUUlNfUFJFRklYLCAnJyldID0gYXR0ci5leHByID8gYXR0ci5leHByLnZhbHVlIDogYXR0ci52YWx1ZTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIHRhZyBleHByZXNzaW9ucyBhbmQgb3B0aW9uc1xuICAgKiBAcGFyYW0geyBUYWcgfSB0YWcgLSB0YWcgb2JqZWN0XG4gICAqIEBwYXJhbSB7ICogfSBkYXRhIC0gZGF0YSB3ZSB3YW50IHRvIHVzZSB0byBleHRlbmQgdGhlIHRhZyBwcm9wZXJ0aWVzXG4gICAqIEBwYXJhbSB7IEFycmF5IH0gZXhwcmVzc2lvbnMgLSBjb21wb25lbnQgZXhwcmVzc2lvbnMgYXJyYXlcbiAgICogQHJldHVybnMgeyBUYWcgfSB0aGUgY3VycmVudCB0YWcgaW5zdGFuY2VcbiAgICovXG4gIGZ1bmN0aW9uIGNvbXBvbmVudFVwZGF0ZSh0YWcsIGRhdGEsIGV4cHJlc3Npb25zKSB7XG4gICAgdmFyIF9fID0gdGFnLl9fO1xuICAgIHZhciBuZXh0T3B0cyA9IHt9O1xuICAgIHZhciBjYW5UcmlnZ2VyID0gdGFnLmlzTW91bnRlZCAmJiAhX18uc2tpcEFub255bW91cztcblxuICAgIC8vIGluaGVyaXQgcHJvcGVydGllcyBmcm9tIHRoZSBwYXJlbnQgdGFnXG4gICAgaWYgKF9fLmlzQW5vbnltb3VzICYmIF9fLnBhcmVudCkgeyBleHRlbmQodGFnLCBfXy5wYXJlbnQpOyB9XG4gICAgZXh0ZW5kKHRhZywgZGF0YSk7XG5cbiAgICB1cGRhdGVPcHRzLmFwcGx5KHRhZywgW19fLmlzTG9vcCwgX18ucGFyZW50LCBfXy5pc0Fub255bW91cywgbmV4dE9wdHMsIF9fLmluc3RBdHRyc10pO1xuXG4gICAgaWYgKFxuICAgICAgY2FuVHJpZ2dlciAmJlxuICAgICAgdGFnLmlzTW91bnRlZCAmJlxuICAgICAgaXNGdW5jdGlvbih0YWcuc2hvdWxkVXBkYXRlKSAmJiAhdGFnLnNob3VsZFVwZGF0ZShkYXRhLCBuZXh0T3B0cylcbiAgICApIHtcbiAgICAgIHJldHVybiB0YWdcbiAgICB9XG5cbiAgICBleHRlbmQodGFnLm9wdHMsIG5leHRPcHRzKTtcblxuICAgIGlmIChjYW5UcmlnZ2VyKSB7IHRhZy50cmlnZ2VyKCd1cGRhdGUnLCBkYXRhKTsgfVxuICAgIHVwZGF0ZS5jYWxsKHRhZywgZXhwcmVzc2lvbnMpO1xuICAgIGlmIChjYW5UcmlnZ2VyKSB7IHRhZy50cmlnZ2VyKCd1cGRhdGVkJyk7IH1cblxuICAgIHJldHVybiB0YWdcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgc2VsZWN0b3JzIGZvciB0YWdzXG4gICAqIEBwYXJhbSAgIHsgQXJyYXkgfSB0YWdzIC0gdGFnIG5hbWVzIHRvIHNlbGVjdFxuICAgKiBAcmV0dXJucyB7IFN0cmluZyB9IHNlbGVjdG9yXG4gICAqL1xuICBmdW5jdGlvbiBxdWVyeSh0YWdzKSB7XG4gICAgLy8gc2VsZWN0IGFsbCB0YWdzXG4gICAgaWYgKCF0YWdzKSB7XG4gICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKF9fVEFHX0lNUEwpO1xuICAgICAgcmV0dXJuIGtleXMgKyBxdWVyeShrZXlzKVxuICAgIH1cblxuICAgIHJldHVybiB0YWdzXG4gICAgICAuZmlsdGVyKGZ1bmN0aW9uICh0KSB7IHJldHVybiAhL1teLVxcd10vLnRlc3QodCk7IH0pXG4gICAgICAucmVkdWNlKGZ1bmN0aW9uIChsaXN0LCB0KSB7XG4gICAgICAgIHZhciBuYW1lID0gdC50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgcmV0dXJuIGxpc3QgKyBcIixbXCIgKyBJU19ESVJFQ1RJVkUgKyBcIj1cXFwiXCIgKyBuYW1lICsgXCJcXFwiXVwiXG4gICAgICB9LCAnJylcbiAgfVxuXG4gIC8qKlxuICAgKiBBbm90aGVyIHdheSB0byBjcmVhdGUgYSByaW90IHRhZyBhIGJpdCBtb3JlIGVzNiBmcmllbmRseVxuICAgKiBAcGFyYW0geyBIVE1MRWxlbWVudCB9IGVsIC0gdGFnIERPTSBzZWxlY3RvciBvciBET00gbm9kZS9zXG4gICAqIEBwYXJhbSB7IE9iamVjdCB9IG9wdHMgLSB0YWcgbG9naWNcbiAgICogQHJldHVybnMgeyBUYWcgfSBuZXcgcmlvdCB0YWcgaW5zdGFuY2VcbiAgICovXG4gIGZ1bmN0aW9uIFRhZyhlbCwgb3B0cykge1xuICAgIC8vIGdldCB0aGUgdGFnIHByb3BlcnRpZXMgZnJvbSB0aGUgY2xhc3MgY29uc3RydWN0b3JcbiAgICB2YXIgcmVmID0gdGhpcztcbiAgICB2YXIgbmFtZSA9IHJlZi5uYW1lO1xuICAgIHZhciB0bXBsID0gcmVmLnRtcGw7XG4gICAgdmFyIGNzcyA9IHJlZi5jc3M7XG4gICAgdmFyIGF0dHJzID0gcmVmLmF0dHJzO1xuICAgIHZhciBvbkNyZWF0ZSA9IHJlZi5vbkNyZWF0ZTtcbiAgICAvLyByZWdpc3RlciBhIG5ldyB0YWcgYW5kIGNhY2hlIHRoZSBjbGFzcyBwcm90b3R5cGVcbiAgICBpZiAoIV9fVEFHX0lNUExbbmFtZV0pIHtcbiAgICAgIHRhZyhuYW1lLCB0bXBsLCBjc3MsIGF0dHJzLCBvbkNyZWF0ZSk7XG4gICAgICAvLyBjYWNoZSB0aGUgY2xhc3MgY29uc3RydWN0b3JcbiAgICAgIF9fVEFHX0lNUExbbmFtZV0uY2xhc3MgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgIH1cblxuICAgIC8vIG1vdW50IHRoZSB0YWcgdXNpbmcgdGhlIGNsYXNzIGluc3RhbmNlXG4gICAgbW91bnQkMShlbCwgbmFtZSwgb3B0cywgdGhpcyk7XG4gICAgLy8gaW5qZWN0IHRoZSBjb21wb25lbnQgY3NzXG4gICAgaWYgKGNzcykgeyBzdHlsZU1hbmFnZXIuaW5qZWN0KCk7IH1cblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IHJpb3QgdGFnIGltcGxlbWVudGF0aW9uXG4gICAqIEBwYXJhbSAgIHsgU3RyaW5nIH0gICBuYW1lIC0gbmFtZS9pZCBvZiB0aGUgbmV3IHJpb3QgdGFnXG4gICAqIEBwYXJhbSAgIHsgU3RyaW5nIH0gICB0bXBsIC0gdGFnIHRlbXBsYXRlXG4gICAqIEBwYXJhbSAgIHsgU3RyaW5nIH0gICBjc3MgLSBjdXN0b20gdGFnIGNzc1xuICAgKiBAcGFyYW0gICB7IFN0cmluZyB9ICAgYXR0cnMgLSByb290IHRhZyBhdHRyaWJ1dGVzXG4gICAqIEBwYXJhbSAgIHsgRnVuY3Rpb24gfSBmbiAtIHVzZXIgZnVuY3Rpb25cbiAgICogQHJldHVybnMgeyBTdHJpbmcgfSBuYW1lL2lkIG9mIHRoZSB0YWcganVzdCBjcmVhdGVkXG4gICAqL1xuICBmdW5jdGlvbiB0YWcobmFtZSwgdG1wbCwgY3NzLCBhdHRycywgZm4pIHtcbiAgICBpZiAoaXNGdW5jdGlvbihhdHRycykpIHtcbiAgICAgIGZuID0gYXR0cnM7XG5cbiAgICAgIGlmICgvXltcXHctXStcXHM/PS8udGVzdChjc3MpKSB7XG4gICAgICAgIGF0dHJzID0gY3NzO1xuICAgICAgICBjc3MgPSAnJztcbiAgICAgIH0gZWxzZVxuICAgICAgICB7IGF0dHJzID0gJyc7IH1cbiAgICB9XG5cbiAgICBpZiAoY3NzKSB7XG4gICAgICBpZiAoaXNGdW5jdGlvbihjc3MpKVxuICAgICAgICB7IGZuID0gY3NzOyB9XG4gICAgICBlbHNlXG4gICAgICAgIHsgc3R5bGVNYW5hZ2VyLmFkZChjc3MsIG5hbWUpOyB9XG4gICAgfVxuXG4gICAgbmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICBfX1RBR19JTVBMW25hbWVdID0geyBuYW1lOiBuYW1lLCB0bXBsOiB0bXBsLCBhdHRyczogYXR0cnMsIGZuOiBmbiB9O1xuXG4gICAgcmV0dXJuIG5hbWVcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgcmlvdCB0YWcgaW1wbGVtZW50YXRpb24gKGZvciB1c2UgYnkgdGhlIGNvbXBpbGVyKVxuICAgKiBAcGFyYW0gICB7IFN0cmluZyB9ICAgbmFtZSAtIG5hbWUvaWQgb2YgdGhlIG5ldyByaW90IHRhZ1xuICAgKiBAcGFyYW0gICB7IFN0cmluZyB9ICAgdG1wbCAtIHRhZyB0ZW1wbGF0ZVxuICAgKiBAcGFyYW0gICB7IFN0cmluZyB9ICAgY3NzIC0gY3VzdG9tIHRhZyBjc3NcbiAgICogQHBhcmFtICAgeyBTdHJpbmcgfSAgIGF0dHJzIC0gcm9vdCB0YWcgYXR0cmlidXRlc1xuICAgKiBAcGFyYW0gICB7IEZ1bmN0aW9uIH0gZm4gLSB1c2VyIGZ1bmN0aW9uXG4gICAqIEByZXR1cm5zIHsgU3RyaW5nIH0gbmFtZS9pZCBvZiB0aGUgdGFnIGp1c3QgY3JlYXRlZFxuICAgKi9cbiAgZnVuY3Rpb24gdGFnMihuYW1lLCB0bXBsLCBjc3MsIGF0dHJzLCBmbikge1xuICAgIGlmIChjc3MpIHsgc3R5bGVNYW5hZ2VyLmFkZChjc3MsIG5hbWUpOyB9XG5cbiAgICBfX1RBR19JTVBMW25hbWVdID0geyBuYW1lOiBuYW1lLCB0bXBsOiB0bXBsLCBhdHRyczogYXR0cnMsIGZuOiBmbiB9O1xuXG4gICAgcmV0dXJuIG5hbWVcbiAgfVxuXG4gIC8qKlxuICAgKiBNb3VudCBhIHRhZyB1c2luZyBhIHNwZWNpZmljIHRhZyBpbXBsZW1lbnRhdGlvblxuICAgKiBAcGFyYW0gICB7ICogfSBzZWxlY3RvciAtIHRhZyBET00gc2VsZWN0b3Igb3IgRE9NIG5vZGUvc1xuICAgKiBAcGFyYW0gICB7IFN0cmluZyB9IHRhZ05hbWUgLSB0YWcgaW1wbGVtZW50YXRpb24gbmFtZVxuICAgKiBAcGFyYW0gICB7IE9iamVjdCB9IG9wdHMgLSB0YWcgbG9naWNcbiAgICogQHJldHVybnMgeyBBcnJheSB9IG5ldyB0YWdzIGluc3RhbmNlc1xuICAgKi9cbiAgZnVuY3Rpb24gbW91bnQoc2VsZWN0b3IsIHRhZ05hbWUsIG9wdHMpIHtcbiAgICB2YXIgdGFncyA9IFtdO1xuICAgIHZhciBlbGVtLCBhbGxUYWdzO1xuXG4gICAgZnVuY3Rpb24gcHVzaFRhZ3NUbyhyb290KSB7XG4gICAgICBpZiAocm9vdC50YWdOYW1lKSB7XG4gICAgICAgIHZhciByaW90VGFnID0gZ2V0QXR0cmlidXRlKHJvb3QsIElTX0RJUkVDVElWRSksIHRhZztcblxuICAgICAgICAvLyBoYXZlIHRhZ05hbWU/IGZvcmNlIHJpb3QtdGFnIHRvIGJlIHRoZSBzYW1lXG4gICAgICAgIGlmICh0YWdOYW1lICYmIHJpb3RUYWcgIT09IHRhZ05hbWUpIHtcbiAgICAgICAgICByaW90VGFnID0gdGFnTmFtZTtcbiAgICAgICAgICBzZXRBdHRyaWJ1dGUocm9vdCwgSVNfRElSRUNUSVZFLCB0YWdOYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRhZyA9IG1vdW50JDEoXG4gICAgICAgICAgcm9vdCxcbiAgICAgICAgICByaW90VGFnIHx8IHJvb3QudGFnTmFtZS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgIGlzRnVuY3Rpb24ob3B0cykgPyBvcHRzKCkgOiBvcHRzXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKHRhZylcbiAgICAgICAgICB7IHRhZ3MucHVzaCh0YWcpOyB9XG4gICAgICB9IGVsc2UgaWYgKHJvb3QubGVuZ3RoKVxuICAgICAgICB7IGVhY2gocm9vdCwgcHVzaFRhZ3NUbyk7IH0gLy8gYXNzdW1lIG5vZGVMaXN0XG4gICAgfVxuXG4gICAgLy8gaW5qZWN0IHN0eWxlcyBpbnRvIERPTVxuICAgIHN0eWxlTWFuYWdlci5pbmplY3QoKTtcblxuICAgIGlmIChpc09iamVjdCh0YWdOYW1lKSB8fCBpc0Z1bmN0aW9uKHRhZ05hbWUpKSB7XG4gICAgICBvcHRzID0gdGFnTmFtZTtcbiAgICAgIHRhZ05hbWUgPSAwO1xuICAgIH1cblxuICAgIC8vIGNyYXdsIHRoZSBET00gdG8gZmluZCB0aGUgdGFnXG4gICAgaWYgKGlzU3RyaW5nKHNlbGVjdG9yKSkge1xuICAgICAgc2VsZWN0b3IgPSBzZWxlY3RvciA9PT0gJyonID9cbiAgICAgICAgLy8gc2VsZWN0IGFsbCByZWdpc3RlcmVkIHRhZ3NcbiAgICAgICAgLy8gJiB0YWdzIGZvdW5kIHdpdGggdGhlIHJpb3QtdGFnIGF0dHJpYnV0ZSBzZXRcbiAgICAgICAgYWxsVGFncyA9IHF1ZXJ5KCkgOlxuICAgICAgICAvLyBvciBqdXN0IHRoZSBvbmVzIG5hbWVkIGxpa2UgdGhlIHNlbGVjdG9yXG4gICAgICAgIHNlbGVjdG9yICsgcXVlcnkoc2VsZWN0b3Iuc3BsaXQoLywgKi8pKTtcblxuICAgICAgLy8gbWFrZSBzdXJlIHRvIHBhc3MgYWx3YXlzIGEgc2VsZWN0b3JcbiAgICAgIC8vIHRvIHRoZSBxdWVyeVNlbGVjdG9yQWxsIGZ1bmN0aW9uXG4gICAgICBlbGVtID0gc2VsZWN0b3IgPyAkJChzZWxlY3RvcikgOiBbXTtcbiAgICB9XG4gICAgZWxzZVxuICAgICAgLy8gcHJvYmFibHkgeW91IGhhdmUgcGFzc2VkIGFscmVhZHkgYSB0YWcgb3IgYSBOb2RlTGlzdFxuICAgICAgeyBlbGVtID0gc2VsZWN0b3I7IH1cblxuICAgIC8vIHNlbGVjdCBhbGwgdGhlIHJlZ2lzdGVyZWQgYW5kIG1vdW50IHRoZW0gaW5zaWRlIHRoZWlyIHJvb3QgZWxlbWVudHNcbiAgICBpZiAodGFnTmFtZSA9PT0gJyonKSB7XG4gICAgICAvLyBnZXQgYWxsIGN1c3RvbSB0YWdzXG4gICAgICB0YWdOYW1lID0gYWxsVGFncyB8fCBxdWVyeSgpO1xuICAgICAgLy8gaWYgdGhlIHJvb3QgZWxzIGl0J3MganVzdCBhIHNpbmdsZSB0YWdcbiAgICAgIGlmIChlbGVtLnRhZ05hbWUpXG4gICAgICAgIHsgZWxlbSA9ICQkKHRhZ05hbWUsIGVsZW0pOyB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgLy8gc2VsZWN0IGFsbCB0aGUgY2hpbGRyZW4gZm9yIGFsbCB0aGUgZGlmZmVyZW50IHJvb3QgZWxlbWVudHNcbiAgICAgICAgdmFyIG5vZGVMaXN0ID0gW107XG5cbiAgICAgICAgZWFjaChlbGVtLCBmdW5jdGlvbiAoX2VsKSB7IHJldHVybiBub2RlTGlzdC5wdXNoKCQkKHRhZ05hbWUsIF9lbCkpOyB9KTtcblxuICAgICAgICBlbGVtID0gbm9kZUxpc3Q7XG4gICAgICB9XG4gICAgICAvLyBnZXQgcmlkIG9mIHRoZSB0YWdOYW1lXG4gICAgICB0YWdOYW1lID0gMDtcbiAgICB9XG5cbiAgICBwdXNoVGFnc1RvKGVsZW0pO1xuXG4gICAgcmV0dXJuIHRhZ3NcbiAgfVxuXG4gIC8vIENyZWF0ZSBhIG1peGluIHRoYXQgY291bGQgYmUgZ2xvYmFsbHkgc2hhcmVkIGFjcm9zcyBhbGwgdGhlIHRhZ3NcbiAgdmFyIG1peGlucyA9IHt9O1xuICB2YXIgZ2xvYmFscyA9IG1peGluc1tHTE9CQUxfTUlYSU5dID0ge307XG4gIHZhciBtaXhpbnNfaWQgPSAwO1xuXG4gIC8qKlxuICAgKiBDcmVhdGUvUmV0dXJuIGEgbWl4aW4gYnkgaXRzIG5hbWVcbiAgICogQHBhcmFtICAgeyBTdHJpbmcgfSAgbmFtZSAtIG1peGluIG5hbWUgKGdsb2JhbCBtaXhpbiBpZiBvYmplY3QpXG4gICAqIEBwYXJhbSAgIHsgT2JqZWN0IH0gIG1peCAtIG1peGluIGxvZ2ljXG4gICAqIEBwYXJhbSAgIHsgQm9vbGVhbiB9IGcgLSBpcyBnbG9iYWw/XG4gICAqIEByZXR1cm5zIHsgT2JqZWN0IH0gIHRoZSBtaXhpbiBsb2dpY1xuICAgKi9cbiAgZnVuY3Rpb24gbWl4aW4obmFtZSwgbWl4LCBnKSB7XG4gICAgLy8gVW5uYW1lZCBnbG9iYWxcbiAgICBpZiAoaXNPYmplY3QobmFtZSkpIHtcbiAgICAgIG1peGluKChcIl9fXCIgKyAobWl4aW5zX2lkKyspICsgXCJfX1wiKSwgbmFtZSwgdHJ1ZSk7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB2YXIgc3RvcmUgPSBnID8gZ2xvYmFscyA6IG1peGlucztcblxuICAgIC8vIEdldHRlclxuICAgIGlmICghbWl4KSB7XG4gICAgICBpZiAoaXNVbmRlZmluZWQoc3RvcmVbbmFtZV0pKVxuICAgICAgICB7IHRocm93IG5ldyBFcnJvcigoXCJVbnJlZ2lzdGVyZWQgbWl4aW46IFwiICsgbmFtZSkpIH1cblxuICAgICAgcmV0dXJuIHN0b3JlW25hbWVdXG4gICAgfVxuXG4gICAgLy8gU2V0dGVyXG4gICAgc3RvcmVbbmFtZV0gPSBpc0Z1bmN0aW9uKG1peCkgP1xuICAgICAgZXh0ZW5kKG1peC5wcm90b3R5cGUsIHN0b3JlW25hbWVdIHx8IHt9KSAmJiBtaXggOlxuICAgICAgZXh0ZW5kKHN0b3JlW25hbWVdIHx8IHt9LCBtaXgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBhbGwgdGhlIHRhZ3MgaW5zdGFuY2VzIGNyZWF0ZWRcbiAgICogQHJldHVybnMgeyBBcnJheSB9IGFsbCB0aGUgdGFncyBpbnN0YW5jZXNcbiAgICovXG4gIGZ1bmN0aW9uIHVwZGF0ZSQxKCkge1xuICAgIHJldHVybiBlYWNoKF9fVEFHU19DQUNIRSwgZnVuY3Rpb24gKHRhZykgeyByZXR1cm4gdGFnLnVwZGF0ZSgpOyB9KVxuICB9XG5cbiAgZnVuY3Rpb24gdW5yZWdpc3RlcihuYW1lKSB7XG4gICAgc3R5bGVNYW5hZ2VyLnJlbW92ZShuYW1lKTtcbiAgICByZXR1cm4gZGVsZXRlIF9fVEFHX0lNUExbbmFtZV1cbiAgfVxuXG4gIHZhciB2ZXJzaW9uID0gJ3YzLjEzLjInO1xuXG4gIHZhciBjb3JlID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICAgIFRhZzogVGFnLFxuICAgIHRhZzogdGFnLFxuICAgIHRhZzI6IHRhZzIsXG4gICAgbW91bnQ6IG1vdW50LFxuICAgIG1peGluOiBtaXhpbixcbiAgICB1cGRhdGU6IHVwZGF0ZSQxLFxuICAgIHVucmVnaXN0ZXI6IHVucmVnaXN0ZXIsXG4gICAgdmVyc2lvbjogdmVyc2lvblxuICB9KTtcblxuICAvKipcbiAgICogQWRkIGEgbWl4aW4gdG8gdGhpcyB0YWdcbiAgICogQHJldHVybnMgeyBUYWcgfSB0aGUgY3VycmVudCB0YWcgaW5zdGFuY2VcbiAgICovXG4gIGZ1bmN0aW9uIGNvbXBvbmVudE1peGluKHRhZyQkMSkge1xuICAgIHZhciBtaXhpbnMgPSBbXSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aCAtIDE7XG4gICAgd2hpbGUgKCBsZW4tLSA+IDAgKSBtaXhpbnNbIGxlbiBdID0gYXJndW1lbnRzWyBsZW4gKyAxIF07XG5cbiAgICBlYWNoKG1peGlucywgZnVuY3Rpb24gKG1peCkge1xuICAgICAgdmFyIGluc3RhbmNlO1xuICAgICAgdmFyIG9iajtcbiAgICAgIHZhciBwcm9wcyA9IFtdO1xuXG4gICAgICAvLyBwcm9wZXJ0aWVzIGJsYWNrbGlzdGVkIGFuZCB3aWxsIG5vdCBiZSBib3VuZCB0byB0aGUgdGFnIGluc3RhbmNlXG4gICAgICB2YXIgcHJvcHNCbGFja2xpc3QgPSBbJ2luaXQnLCAnX19wcm90b19fJ107XG5cbiAgICAgIG1peCA9IGlzU3RyaW5nKG1peCkgPyBtaXhpbihtaXgpIDogbWl4O1xuXG4gICAgICAvLyBjaGVjayBpZiB0aGUgbWl4aW4gaXMgYSBmdW5jdGlvblxuICAgICAgaWYgKGlzRnVuY3Rpb24obWl4KSkge1xuICAgICAgICAvLyBjcmVhdGUgdGhlIG5ldyBtaXhpbiBpbnN0YW5jZVxuICAgICAgICBpbnN0YW5jZSA9IG5ldyBtaXgoKTtcbiAgICAgIH0gZWxzZSB7IGluc3RhbmNlID0gbWl4OyB9XG5cbiAgICAgIHZhciBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihpbnN0YW5jZSk7XG5cbiAgICAgIC8vIGJ1aWxkIG11bHRpbGV2ZWwgcHJvdG90eXBlIGluaGVyaXRhbmNlIGNoYWluIHByb3BlcnR5IGxpc3RcbiAgICAgIGRvIHsgcHJvcHMgPSBwcm9wcy5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob2JqIHx8IGluc3RhbmNlKSk7IH1cbiAgICAgIHdoaWxlIChvYmogPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqIHx8IGluc3RhbmNlKSlcblxuICAgICAgLy8gbG9vcCB0aGUga2V5cyBpbiB0aGUgZnVuY3Rpb24gcHJvdG90eXBlIG9yIHRoZSBhbGwgb2JqZWN0IGtleXNcbiAgICAgIGVhY2gocHJvcHMsIGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgLy8gYmluZCBtZXRob2RzIHRvIHRhZ1xuICAgICAgICAvLyBhbGxvdyBtaXhpbnMgdG8gb3ZlcnJpZGUgb3RoZXIgcHJvcGVydGllcy9wYXJlbnQgbWl4aW5zXG4gICAgICAgIGlmICghY29udGFpbnMocHJvcHNCbGFja2xpc3QsIGtleSkpIHtcbiAgICAgICAgICAvLyBjaGVjayBmb3IgZ2V0dGVycy9zZXR0ZXJzXG4gICAgICAgICAgdmFyIGRlc2NyaXB0b3IgPSBnZXRQcm9wRGVzY3JpcHRvcihpbnN0YW5jZSwga2V5KSB8fCBnZXRQcm9wRGVzY3JpcHRvcihwcm90bywga2V5KTtcbiAgICAgICAgICB2YXIgaGFzR2V0dGVyU2V0dGVyID0gZGVzY3JpcHRvciAmJiAoZGVzY3JpcHRvci5nZXQgfHwgZGVzY3JpcHRvci5zZXQpO1xuXG4gICAgICAgICAgLy8gYXBwbHkgbWV0aG9kIG9ubHkgaWYgaXQgZG9lcyBub3QgYWxyZWFkeSBleGlzdCBvbiB0aGUgaW5zdGFuY2VcbiAgICAgICAgICBpZiAoIXRhZyQkMS5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGhhc0dldHRlclNldHRlcikge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhZyQkMSwga2V5LCBkZXNjcmlwdG9yKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGFnJCQxW2tleV0gPSBpc0Z1bmN0aW9uKGluc3RhbmNlW2tleV0pID9cbiAgICAgICAgICAgICAgaW5zdGFuY2Vba2V5XS5iaW5kKHRhZyQkMSkgOlxuICAgICAgICAgICAgICBpbnN0YW5jZVtrZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIGluaXQgbWV0aG9kIHdpbGwgYmUgY2FsbGVkIGF1dG9tYXRpY2FsbHlcbiAgICAgIGlmIChpbnN0YW5jZS5pbml0KVxuICAgICAgICB7IGluc3RhbmNlLmluaXQuYmluZCh0YWckJDEpKHRhZyQkMS5vcHRzKTsgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRhZyQkMVxuICB9XG5cbiAgLyoqXG4gICAqIE1vdmUgdGhlIHBvc2l0aW9uIG9mIGEgY3VzdG9tIHRhZyBpbiBpdHMgcGFyZW50IHRhZ1xuICAgKiBAdGhpcyBUYWdcbiAgICogQHBhcmFtICAgeyBTdHJpbmcgfSB0YWdOYW1lIC0ga2V5IHdoZXJlIHRoZSB0YWcgd2FzIHN0b3JlZFxuICAgKiBAcGFyYW0gICB7IE51bWJlciB9IG5ld1BvcyAtIGluZGV4IHdoZXJlIHRoZSBuZXcgdGFnIHdpbGwgYmUgc3RvcmVkXG4gICAqL1xuICBmdW5jdGlvbiBtb3ZlQ2hpbGQodGFnTmFtZSwgbmV3UG9zKSB7XG4gICAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50O1xuICAgIHZhciB0YWdzO1xuICAgIC8vIG5vIHBhcmVudCBubyBtb3ZlXG4gICAgaWYgKCFwYXJlbnQpIHsgcmV0dXJuIH1cblxuICAgIHRhZ3MgPSBwYXJlbnQudGFnc1t0YWdOYW1lXTtcblxuICAgIGlmIChpc0FycmF5KHRhZ3MpKVxuICAgICAgeyB0YWdzLnNwbGljZShuZXdQb3MsIDAsIHRhZ3Muc3BsaWNlKHRhZ3MuaW5kZXhPZih0aGlzKSwgMSlbMF0pOyB9XG4gICAgZWxzZSB7IGFycmF5aXNoQWRkKHBhcmVudC50YWdzLCB0YWdOYW1lLCB0aGlzKTsgfVxuICB9XG5cbiAgLyoqXG4gICAqIE1vdmUgdmlydHVhbCB0YWcgYW5kIGFsbCBjaGlsZCBub2Rlc1xuICAgKiBAdGhpcyBUYWdcbiAgICogQHBhcmFtIHsgTm9kZSB9IHNyYyAgLSB0aGUgbm9kZSB0aGF0IHdpbGwgZG8gdGhlIGluc2VydGluZ1xuICAgKiBAcGFyYW0geyBUYWcgfSB0YXJnZXQgLSBpbnNlcnQgYmVmb3JlIHRoaXMgdGFnJ3MgZmlyc3QgY2hpbGRcbiAgICovXG4gIGZ1bmN0aW9uIG1vdmVWaXJ0dWFsKHNyYywgdGFyZ2V0KSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICB2YXIgZWwgPSB0aGlzLl9fLmhlYWQ7XG4gICAgdmFyIHNpYjtcbiAgICB2YXIgZnJhZyA9IGNyZWF0ZUZyYWdtZW50KCk7XG5cbiAgICB3aGlsZSAoZWwpIHtcbiAgICAgIHNpYiA9IGVsLm5leHRTaWJsaW5nO1xuICAgICAgZnJhZy5hcHBlbmRDaGlsZChlbCk7XG4gICAgICBlbCA9IHNpYjtcbiAgICAgIGlmIChlbCA9PT0gdGhpcyQxLl9fLnRhaWwpIHtcbiAgICAgICAgZnJhZy5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgIHNyYy5pbnNlcnRCZWZvcmUoZnJhZywgdGFyZ2V0Ll9fLmhlYWQpO1xuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IHRoZSBpdGVtIGxvb3BlZCBpbnRvIGFuIG9iamVjdCB1c2VkIHRvIGV4dGVuZCB0aGUgY2hpbGQgdGFnIHByb3BlcnRpZXNcbiAgICogQHBhcmFtICAgeyBPYmplY3QgfSBleHByIC0gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGtleXMgdXNlZCB0byBleHRlbmQgdGhlIGNoaWxkcmVuIHRhZ3NcbiAgICogQHBhcmFtICAgeyAqIH0ga2V5IC0gdmFsdWUgdG8gYXNzaWduIHRvIHRoZSBuZXcgb2JqZWN0IHJldHVybmVkXG4gICAqIEBwYXJhbSAgIHsgKiB9IHZhbCAtIHZhbHVlIGNvbnRhaW5pbmcgdGhlIHBvc2l0aW9uIG9mIHRoZSBpdGVtIGluIHRoZSBhcnJheVxuICAgKiBAcmV0dXJucyB7IE9iamVjdCB9IC0gbmV3IG9iamVjdCBjb250YWluaW5nIHRoZSB2YWx1ZXMgb2YgdGhlIG9yaWdpbmFsIGl0ZW1cbiAgICpcbiAgICogVGhlIHZhcmlhYmxlcyAna2V5JyBhbmQgJ3ZhbCcgYXJlIGFyYml0cmFyeS5cbiAgICogVGhleSBkZXBlbmQgb24gdGhlIGNvbGxlY3Rpb24gdHlwZSBsb29wZWQgKEFycmF5LCBPYmplY3QpXG4gICAqIGFuZCBvbiB0aGUgZXhwcmVzc2lvbiB1c2VkIG9uIHRoZSBlYWNoIHRhZ1xuICAgKlxuICAgKi9cbiAgZnVuY3Rpb24gbWtpdGVtKGV4cHIsIGtleSwgdmFsKSB7XG4gICAgdmFyIGl0ZW0gPSB7fTtcbiAgICBpdGVtW2V4cHIua2V5XSA9IGtleTtcbiAgICBpZiAoZXhwci5wb3MpIHsgaXRlbVtleHByLnBvc10gPSB2YWw7IH1cbiAgICByZXR1cm4gaXRlbVxuICB9XG5cbiAgLyoqXG4gICAqIFVubW91bnQgdGhlIHJlZHVuZGFudCB0YWdzXG4gICAqIEBwYXJhbSAgIHsgQXJyYXkgfSBpdGVtcyAtIGFycmF5IGNvbnRhaW5pbmcgdGhlIGN1cnJlbnQgaXRlbXMgdG8gbG9vcFxuICAgKiBAcGFyYW0gICB7IEFycmF5IH0gdGFncyAtIGFycmF5IGNvbnRhaW5pbmcgYWxsIHRoZSBjaGlsZHJlbiB0YWdzXG4gICAqL1xuICBmdW5jdGlvbiB1bm1vdW50UmVkdW5kYW50KGl0ZW1zLCB0YWdzLCBmaWx0ZXJlZEl0ZW1zQ291bnQpIHtcbiAgICB2YXIgaSA9IHRhZ3MubGVuZ3RoO1xuICAgIHZhciBqID0gaXRlbXMubGVuZ3RoIC0gZmlsdGVyZWRJdGVtc0NvdW50O1xuXG4gICAgd2hpbGUgKGkgPiBqKSB7XG4gICAgICBpLS07XG4gICAgICByZW1vdmUuYXBwbHkodGFnc1tpXSwgW3RhZ3MsIGldKTtcbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSBjaGlsZCB0YWdcbiAgICogQHRoaXMgVGFnXG4gICAqIEBwYXJhbSAgIHsgQXJyYXkgfSB0YWdzIC0gdGFncyBjb2xsZWN0aW9uXG4gICAqIEBwYXJhbSAgIHsgTnVtYmVyIH0gaSAtIGluZGV4IG9mIHRoZSB0YWcgdG8gcmVtb3ZlXG4gICAqL1xuICBmdW5jdGlvbiByZW1vdmUodGFncywgaSkge1xuICAgIHRhZ3Muc3BsaWNlKGksIDEpO1xuICAgIHRoaXMudW5tb3VudCgpO1xuICAgIGFycmF5aXNoUmVtb3ZlKHRoaXMucGFyZW50LCB0aGlzLCB0aGlzLl9fLnRhZ05hbWUsIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vdmUgdGhlIG5lc3RlZCBjdXN0b20gdGFncyBpbiBub24gY3VzdG9tIGxvb3AgdGFnc1xuICAgKiBAdGhpcyBUYWdcbiAgICogQHBhcmFtICAgeyBOdW1iZXIgfSBpIC0gY3VycmVudCBwb3NpdGlvbiBvZiB0aGUgbG9vcCB0YWdcbiAgICovXG4gIGZ1bmN0aW9uIG1vdmVOZXN0ZWRUYWdzKGkpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIGVhY2goT2JqZWN0LmtleXModGhpcy50YWdzKSwgZnVuY3Rpb24gKHRhZ05hbWUpIHtcbiAgICAgIG1vdmVDaGlsZC5hcHBseSh0aGlzJDEudGFnc1t0YWdOYW1lXSwgW3RhZ05hbWUsIGldKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb3ZlIGEgY2hpbGQgdGFnXG4gICAqIEB0aGlzIFRhZ1xuICAgKiBAcGFyYW0gICB7IEhUTUxFbGVtZW50IH0gcm9vdCAtIGRvbSBub2RlIGNvbnRhaW5pbmcgYWxsIHRoZSBsb29wIGNoaWxkcmVuXG4gICAqIEBwYXJhbSAgIHsgVGFnIH0gbmV4dFRhZyAtIGluc3RhbmNlIG9mIHRoZSBuZXh0IHRhZyBwcmVjZWRpbmcgdGhlIG9uZSB3ZSB3YW50IHRvIG1vdmVcbiAgICogQHBhcmFtICAgeyBCb29sZWFuIH0gaXNWaXJ0dWFsIC0gaXMgaXQgYSB2aXJ0dWFsIHRhZz9cbiAgICovXG4gIGZ1bmN0aW9uIG1vdmUocm9vdCwgbmV4dFRhZywgaXNWaXJ0dWFsKSB7XG4gICAgaWYgKGlzVmlydHVhbClcbiAgICAgIHsgbW92ZVZpcnR1YWwuYXBwbHkodGhpcywgW3Jvb3QsIG5leHRUYWddKTsgfVxuICAgIGVsc2VcbiAgICAgIHsgc2FmZUluc2VydChyb290LCB0aGlzLnJvb3QsIG5leHRUYWcucm9vdCk7IH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbnNlcnQgYW5kIG1vdW50IGEgY2hpbGQgdGFnXG4gICAqIEB0aGlzIFRhZ1xuICAgKiBAcGFyYW0gICB7IEhUTUxFbGVtZW50IH0gcm9vdCAtIGRvbSBub2RlIGNvbnRhaW5pbmcgYWxsIHRoZSBsb29wIGNoaWxkcmVuXG4gICAqIEBwYXJhbSAgIHsgVGFnIH0gbmV4dFRhZyAtIGluc3RhbmNlIG9mIHRoZSBuZXh0IHRhZyBwcmVjZWRpbmcgdGhlIG9uZSB3ZSB3YW50IHRvIGluc2VydFxuICAgKiBAcGFyYW0gICB7IEJvb2xlYW4gfSBpc1ZpcnR1YWwgLSBpcyBpdCBhIHZpcnR1YWwgdGFnP1xuICAgKi9cbiAgZnVuY3Rpb24gaW5zZXJ0KHJvb3QsIG5leHRUYWcsIGlzVmlydHVhbCkge1xuICAgIGlmIChpc1ZpcnR1YWwpXG4gICAgICB7IG1ha2VWaXJ0dWFsLmFwcGx5KHRoaXMsIFtyb290LCBuZXh0VGFnXSk7IH1cbiAgICBlbHNlXG4gICAgICB7IHNhZmVJbnNlcnQocm9vdCwgdGhpcy5yb290LCBuZXh0VGFnLnJvb3QpOyB9XG4gIH1cblxuICAvKipcbiAgICogQXBwZW5kIGEgbmV3IHRhZyBpbnRvIHRoZSBET01cbiAgICogQHRoaXMgVGFnXG4gICAqIEBwYXJhbSAgIHsgSFRNTEVsZW1lbnQgfSByb290IC0gZG9tIG5vZGUgY29udGFpbmluZyBhbGwgdGhlIGxvb3AgY2hpbGRyZW5cbiAgICogQHBhcmFtICAgeyBCb29sZWFuIH0gaXNWaXJ0dWFsIC0gaXMgaXQgYSB2aXJ0dWFsIHRhZz9cbiAgICovXG4gIGZ1bmN0aW9uIGFwcGVuZChyb290LCBpc1ZpcnR1YWwpIHtcbiAgICBpZiAoaXNWaXJ0dWFsKVxuICAgICAgeyBtYWtlVmlydHVhbC5jYWxsKHRoaXMsIHJvb3QpOyB9XG4gICAgZWxzZVxuICAgICAgeyByb290LmFwcGVuZENoaWxkKHRoaXMucm9vdCk7IH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIHZhbHVlIHdlIHdhbnQgdG8gdXNlIHRvIGxvb2t1cCB0aGUgcG9zdGlvbiBvZiBvdXIgaXRlbXMgaW4gdGhlIGNvbGxlY3Rpb25cbiAgICogQHBhcmFtICAgeyBTdHJpbmcgfSAga2V5QXR0ciAgICAgICAgIC0gbG9va3VwIHN0cmluZyBvciBleHByZXNzaW9uXG4gICAqIEBwYXJhbSAgIHsgKiB9ICAgICAgIG9yaWdpbmFsSXRlbSAgICAtIG9yaWdpbmFsIGl0ZW0gZnJvbSB0aGUgY29sbGVjdGlvblxuICAgKiBAcGFyYW0gICB7IE9iamVjdCB9ICBrZXllZEl0ZW0gICAgICAgLSBvYmplY3QgY3JlYXRlZCBieSByaW90IHZpYSB7IGl0ZW0sIGkgaW4gY29sbGVjdGlvbiB9XG4gICAqIEBwYXJhbSAgIHsgQm9vbGVhbiB9IGhhc0tleUF0dHJFeHByICAtIGZsYWcgdG8gY2hlY2sgd2hldGhlciB0aGUga2V5IGlzIGFuIGV4cHJlc3Npb25cbiAgICogQHJldHVybnMgeyAqIH0gdmFsdWUgdGhhdCB3ZSB3aWxsIHVzZSB0byBmaWd1cmUgb3V0IHRoZSBpdGVtIHBvc2l0aW9uIHZpYSBjb2xsZWN0aW9uLmluZGV4T2ZcbiAgICovXG4gIGZ1bmN0aW9uIGdldEl0ZW1JZChrZXlBdHRyLCBvcmlnaW5hbEl0ZW0sIGtleWVkSXRlbSwgaGFzS2V5QXR0ckV4cHIpIHtcbiAgICBpZiAoa2V5QXR0cikge1xuICAgICAgcmV0dXJuIGhhc0tleUF0dHJFeHByID8gIHRtcGwoa2V5QXR0ciwga2V5ZWRJdGVtKSA6ICBvcmlnaW5hbEl0ZW1ba2V5QXR0cl1cbiAgICB9XG5cbiAgICByZXR1cm4gb3JpZ2luYWxJdGVtXG4gIH1cblxuICAvKipcbiAgICogTWFuYWdlIHRhZ3MgaGF2aW5nIHRoZSAnZWFjaCdcbiAgICogQHBhcmFtICAgeyBIVE1MRWxlbWVudCB9IGRvbSAtIERPTSBub2RlIHdlIG5lZWQgdG8gbG9vcFxuICAgKiBAcGFyYW0gICB7IFRhZyB9IHBhcmVudCAtIHBhcmVudCB0YWcgaW5zdGFuY2Ugd2hlcmUgdGhlIGRvbSBub2RlIGlzIGNvbnRhaW5lZFxuICAgKiBAcGFyYW0gICB7IFN0cmluZyB9IGV4cHIgLSBzdHJpbmcgY29udGFpbmVkIGluIHRoZSAnZWFjaCcgYXR0cmlidXRlXG4gICAqIEByZXR1cm5zIHsgT2JqZWN0IH0gZXhwcmVzc2lvbiBvYmplY3QgZm9yIHRoaXMgZWFjaCBsb29wXG4gICAqL1xuICBmdW5jdGlvbiBfZWFjaChkb20sIHBhcmVudCwgZXhwcikge1xuICAgIHZhciBtdXN0UmVvcmRlciA9IHR5cGVvZiBnZXRBdHRyaWJ1dGUoZG9tLCBMT09QX05PX1JFT1JERVJfRElSRUNUSVZFKSAhPT0gVF9TVFJJTkcgfHwgcmVtb3ZlQXR0cmlidXRlKGRvbSwgTE9PUF9OT19SRU9SREVSX0RJUkVDVElWRSk7XG4gICAgdmFyIGtleUF0dHIgPSBnZXRBdHRyaWJ1dGUoZG9tLCBLRVlfRElSRUNUSVZFKTtcbiAgICB2YXIgaGFzS2V5QXR0ckV4cHIgPSBrZXlBdHRyID8gdG1wbC5oYXNFeHByKGtleUF0dHIpIDogZmFsc2U7XG4gICAgdmFyIHRhZ05hbWUgPSBnZXROYW1lKGRvbSk7XG4gICAgdmFyIGltcGwgPSBfX1RBR19JTVBMW3RhZ05hbWVdO1xuICAgIHZhciBwYXJlbnROb2RlID0gZG9tLnBhcmVudE5vZGU7XG4gICAgdmFyIHBsYWNlaG9sZGVyID0gY3JlYXRlRE9NUGxhY2Vob2xkZXIoKTtcbiAgICB2YXIgY2hpbGQgPSBnZXQoZG9tKTtcbiAgICB2YXIgaWZFeHByID0gZ2V0QXR0cmlidXRlKGRvbSwgQ09ORElUSU9OQUxfRElSRUNUSVZFKTtcbiAgICB2YXIgdGFncyA9IFtdO1xuICAgIHZhciBpc0xvb3AgPSB0cnVlO1xuICAgIHZhciBpbm5lckhUTUwgPSBkb20uaW5uZXJIVE1MO1xuICAgIHZhciBpc0Fub255bW91cyA9ICFfX1RBR19JTVBMW3RhZ05hbWVdO1xuICAgIHZhciBpc1ZpcnR1YWwgPSBkb20udGFnTmFtZSA9PT0gJ1ZJUlRVQUwnO1xuICAgIHZhciBvbGRJdGVtcyA9IFtdO1xuXG4gICAgLy8gcmVtb3ZlIHRoZSBlYWNoIHByb3BlcnR5IGZyb20gdGhlIG9yaWdpbmFsIHRhZ1xuICAgIHJlbW92ZUF0dHJpYnV0ZShkb20sIExPT1BfRElSRUNUSVZFKTtcbiAgICByZW1vdmVBdHRyaWJ1dGUoZG9tLCBLRVlfRElSRUNUSVZFKTtcblxuICAgIC8vIHBhcnNlIHRoZSBlYWNoIGV4cHJlc3Npb25cbiAgICBleHByID0gdG1wbC5sb29wS2V5cyhleHByKTtcbiAgICBleHByLmlzTG9vcCA9IHRydWU7XG5cbiAgICBpZiAoaWZFeHByKSB7IHJlbW92ZUF0dHJpYnV0ZShkb20sIENPTkRJVElPTkFMX0RJUkVDVElWRSk7IH1cblxuICAgIC8vIGluc2VydCBhIG1hcmtlZCB3aGVyZSB0aGUgbG9vcCB0YWdzIHdpbGwgYmUgaW5qZWN0ZWRcbiAgICBwYXJlbnROb2RlLmluc2VydEJlZm9yZShwbGFjZWhvbGRlciwgZG9tKTtcbiAgICBwYXJlbnROb2RlLnJlbW92ZUNoaWxkKGRvbSk7XG5cbiAgICBleHByLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZUVhY2goKSB7XG4gICAgICAvLyBnZXQgdGhlIG5ldyBpdGVtcyBjb2xsZWN0aW9uXG4gICAgICBleHByLnZhbHVlID0gdG1wbChleHByLnZhbCwgcGFyZW50KTtcblxuICAgICAgdmFyIGl0ZW1zID0gZXhwci52YWx1ZTtcbiAgICAgIHZhciBmcmFnID0gY3JlYXRlRnJhZ21lbnQoKTtcbiAgICAgIHZhciBpc09iamVjdCA9ICFpc0FycmF5KGl0ZW1zKSAmJiAhaXNTdHJpbmcoaXRlbXMpO1xuICAgICAgdmFyIHJvb3QgPSBwbGFjZWhvbGRlci5wYXJlbnROb2RlO1xuICAgICAgdmFyIHRtcEl0ZW1zID0gW107XG4gICAgICB2YXIgaGFzS2V5cyA9IGlzT2JqZWN0ICYmICEhaXRlbXM7XG5cbiAgICAgIC8vIGlmIHRoaXMgRE9NIHdhcyByZW1vdmVkIHRoZSB1cGRhdGUgaGVyZSBpcyB1c2VsZXNzXG4gICAgICAvLyB0aGlzIGNvbmRpdGlvbiBmaXhlcyBhbHNvIGEgd2VpcmQgYXN5bmMgaXNzdWUgb24gSUUgaW4gb3VyIHVuaXQgdGVzdFxuICAgICAgaWYgKCFyb290KSB7IHJldHVybiB9XG5cbiAgICAgIC8vIG9iamVjdCBsb29wLiBhbnkgY2hhbmdlcyBjYXVzZSBmdWxsIHJlZHJhd1xuICAgICAgaWYgKGlzT2JqZWN0KSB7XG4gICAgICAgIGl0ZW1zID0gaXRlbXMgPyBPYmplY3Qua2V5cyhpdGVtcykubWFwKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIG1raXRlbShleHByLCBpdGVtc1trZXldLCBrZXkpOyB9KSA6IFtdO1xuICAgICAgfVxuXG4gICAgICAvLyBzdG9yZSB0aGUgYW1vdW50IG9mIGZpbHRlcmVkIGl0ZW1zXG4gICAgICB2YXIgZmlsdGVyZWRJdGVtc0NvdW50ID0gMDtcblxuICAgICAgLy8gbG9vcCBhbGwgdGhlIG5ldyBpdGVtc1xuICAgICAgZWFjaChpdGVtcywgZnVuY3Rpb24gKF9pdGVtLCBpbmRleCkge1xuICAgICAgICB2YXIgaSA9IGluZGV4IC0gZmlsdGVyZWRJdGVtc0NvdW50O1xuICAgICAgICB2YXIgaXRlbSA9ICFoYXNLZXlzICYmIGV4cHIua2V5ID8gbWtpdGVtKGV4cHIsIF9pdGVtLCBpbmRleCkgOiBfaXRlbTtcblxuICAgICAgICAvLyBza2lwIHRoaXMgaXRlbSBiZWNhdXNlIGl0IG11c3QgYmUgZmlsdGVyZWRcbiAgICAgICAgaWYgKGlmRXhwciAmJiAhdG1wbChpZkV4cHIsIGV4dGVuZChjcmVhdGUocGFyZW50KSwgaXRlbSkpKSB7XG4gICAgICAgICAgZmlsdGVyZWRJdGVtc0NvdW50ICsrO1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGl0ZW1JZCA9IGdldEl0ZW1JZChrZXlBdHRyLCBfaXRlbSwgaXRlbSwgaGFzS2V5QXR0ckV4cHIpO1xuICAgICAgICAvLyByZW9yZGVyIG9ubHkgaWYgdGhlIGl0ZW1zIGFyZSBub3Qgb2JqZWN0c1xuICAgICAgICAvLyBvciBhIGtleSBhdHRyaWJ1dGUgaGFzIGJlZW4gcHJvdmlkZWRcbiAgICAgICAgdmFyIGRvUmVvcmRlciA9ICFpc09iamVjdCAmJiBtdXN0UmVvcmRlciAmJiB0eXBlb2YgX2l0ZW0gPT09IFRfT0JKRUNUIHx8IGtleUF0dHI7XG4gICAgICAgIHZhciBvbGRQb3MgPSBvbGRJdGVtcy5pbmRleE9mKGl0ZW1JZCk7XG4gICAgICAgIHZhciBpc05ldyA9IG9sZFBvcyA9PT0gLTE7XG4gICAgICAgIHZhciBwb3MgPSAhaXNOZXcgJiYgZG9SZW9yZGVyID8gb2xkUG9zIDogaTtcbiAgICAgICAgLy8gZG9lcyBhIHRhZyBleGlzdCBpbiB0aGlzIHBvc2l0aW9uP1xuICAgICAgICB2YXIgdGFnID0gdGFnc1twb3NdO1xuICAgICAgICB2YXIgbXVzdEFwcGVuZCA9IGkgPj0gb2xkSXRlbXMubGVuZ3RoO1xuICAgICAgICB2YXIgbXVzdENyZWF0ZSA9IGRvUmVvcmRlciAmJiBpc05ldyB8fCAhZG9SZW9yZGVyICYmICF0YWcgfHwgIXRhZ3NbaV07XG5cbiAgICAgICAgLy8gbmV3IHRhZ1xuICAgICAgICBpZiAobXVzdENyZWF0ZSkge1xuICAgICAgICAgIHRhZyA9IGNyZWF0ZVRhZyhpbXBsLCB7XG4gICAgICAgICAgICBwYXJlbnQ6IHBhcmVudCxcbiAgICAgICAgICAgIGlzTG9vcDogaXNMb29wLFxuICAgICAgICAgICAgaXNBbm9ueW1vdXM6IGlzQW5vbnltb3VzLFxuICAgICAgICAgICAgdGFnTmFtZTogdGFnTmFtZSxcbiAgICAgICAgICAgIHJvb3Q6IGRvbS5jbG9uZU5vZGUoaXNBbm9ueW1vdXMpLFxuICAgICAgICAgICAgaXRlbTogaXRlbSxcbiAgICAgICAgICAgIGluZGV4OiBpLFxuICAgICAgICAgIH0sIGlubmVySFRNTCk7XG5cbiAgICAgICAgICAvLyBtb3VudCB0aGUgdGFnXG4gICAgICAgICAgdGFnLm1vdW50KCk7XG5cbiAgICAgICAgICBpZiAobXVzdEFwcGVuZClcbiAgICAgICAgICAgIHsgYXBwZW5kLmFwcGx5KHRhZywgW2ZyYWcgfHwgcm9vdCwgaXNWaXJ0dWFsXSk7IH1cbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7IGluc2VydC5hcHBseSh0YWcsIFtyb290LCB0YWdzW2ldLCBpc1ZpcnR1YWxdKTsgfVxuXG4gICAgICAgICAgaWYgKCFtdXN0QXBwZW5kKSB7IG9sZEl0ZW1zLnNwbGljZShpLCAwLCBpdGVtKTsgfVxuICAgICAgICAgIHRhZ3Muc3BsaWNlKGksIDAsIHRhZyk7XG4gICAgICAgICAgaWYgKGNoaWxkKSB7IGFycmF5aXNoQWRkKHBhcmVudC50YWdzLCB0YWdOYW1lLCB0YWcsIHRydWUpOyB9XG4gICAgICAgIH0gZWxzZSBpZiAocG9zICE9PSBpICYmIGRvUmVvcmRlcikge1xuICAgICAgICAgIC8vIG1vdmVcbiAgICAgICAgICBpZiAoa2V5QXR0ciB8fCBjb250YWlucyhpdGVtcywgb2xkSXRlbXNbcG9zXSkpIHtcbiAgICAgICAgICAgIG1vdmUuYXBwbHkodGFnLCBbcm9vdCwgdGFnc1tpXSwgaXNWaXJ0dWFsXSk7XG4gICAgICAgICAgICAvLyBtb3ZlIHRoZSBvbGQgdGFnIGluc3RhbmNlXG4gICAgICAgICAgICB0YWdzLnNwbGljZShpLCAwLCB0YWdzLnNwbGljZShwb3MsIDEpWzBdKTtcbiAgICAgICAgICAgIC8vIG1vdmUgdGhlIG9sZCBpdGVtXG4gICAgICAgICAgICBvbGRJdGVtcy5zcGxpY2UoaSwgMCwgb2xkSXRlbXMuc3BsaWNlKHBvcywgMSlbMF0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgcG9zaXRpb24gYXR0cmlidXRlIGlmIGl0IGV4aXN0c1xuICAgICAgICAgIGlmIChleHByLnBvcykgeyB0YWdbZXhwci5wb3NdID0gaTsgfVxuXG4gICAgICAgICAgLy8gaWYgdGhlIGxvb3AgdGFncyBhcmUgbm90IGN1c3RvbVxuICAgICAgICAgIC8vIHdlIG5lZWQgdG8gbW92ZSBhbGwgdGhlaXIgY3VzdG9tIHRhZ3MgaW50byB0aGUgcmlnaHQgcG9zaXRpb25cbiAgICAgICAgICBpZiAoIWNoaWxkICYmIHRhZy50YWdzKSB7IG1vdmVOZXN0ZWRUYWdzLmNhbGwodGFnLCBpKTsgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2FjaGUgdGhlIG9yaWdpbmFsIGl0ZW0gdG8gdXNlIGl0IGluIHRoZSBldmVudHMgYm91bmQgdG8gdGhpcyBub2RlXG4gICAgICAgIC8vIGFuZCBpdHMgY2hpbGRyZW5cbiAgICAgICAgZXh0ZW5kKHRhZy5fXywge1xuICAgICAgICAgIGl0ZW06IGl0ZW0sXG4gICAgICAgICAgaW5kZXg6IGksXG4gICAgICAgICAgcGFyZW50OiBwYXJlbnRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdG1wSXRlbXNbaV0gPSBpdGVtSWQ7XG5cbiAgICAgICAgaWYgKCFtdXN0Q3JlYXRlKSB7IHRhZy51cGRhdGUoaXRlbSk7IH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyByZW1vdmUgdGhlIHJlZHVuZGFudCB0YWdzXG4gICAgICB1bm1vdW50UmVkdW5kYW50KGl0ZW1zLCB0YWdzLCBmaWx0ZXJlZEl0ZW1zQ291bnQpO1xuXG4gICAgICAvLyBjbG9uZSB0aGUgaXRlbXMgYXJyYXlcbiAgICAgIG9sZEl0ZW1zID0gdG1wSXRlbXMuc2xpY2UoKTtcblxuICAgICAgcm9vdC5pbnNlcnRCZWZvcmUoZnJhZywgcGxhY2Vob2xkZXIpO1xuICAgIH07XG5cbiAgICBleHByLnVubW91bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBlYWNoKHRhZ3MsIGZ1bmN0aW9uICh0KSB7IHQudW5tb3VudCgpOyB9KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGV4cHJcbiAgfVxuXG4gIHZhciBSZWZFeHByID0ge1xuICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoZG9tLCBwYXJlbnQsIGF0dHJOYW1lLCBhdHRyVmFsdWUpIHtcbiAgICAgIHRoaXMuZG9tID0gZG9tO1xuICAgICAgdGhpcy5hdHRyID0gYXR0ck5hbWU7XG4gICAgICB0aGlzLnJhd1ZhbHVlID0gYXR0clZhbHVlO1xuICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICB0aGlzLmhhc0V4cCA9IHRtcGwuaGFzRXhwcihhdHRyVmFsdWUpO1xuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9LFxuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgICAgdmFyIG9sZCA9IHRoaXMudmFsdWU7XG4gICAgICB2YXIgY3VzdG9tUGFyZW50ID0gdGhpcy5wYXJlbnQgJiYgZ2V0SW1tZWRpYXRlQ3VzdG9tUGFyZW50KHRoaXMucGFyZW50KTtcbiAgICAgIC8vIGlmIHRoZSByZWZlcmVuY2VkIGVsZW1lbnQgaXMgYSBjdXN0b20gdGFnLCB0aGVuIHdlIHNldCB0aGUgdGFnIGl0c2VsZiwgcmF0aGVyIHRoYW4gRE9NXG4gICAgICB2YXIgdGFnT3JEb20gPSB0aGlzLmRvbS5fX3JlZiB8fCB0aGlzLnRhZyB8fCB0aGlzLmRvbTtcblxuICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuaGFzRXhwID8gdG1wbCh0aGlzLnJhd1ZhbHVlLCB0aGlzLnBhcmVudCkgOiB0aGlzLnJhd1ZhbHVlO1xuXG4gICAgICAvLyB0aGUgbmFtZSBjaGFuZ2VkLCBzbyB3ZSBuZWVkIHRvIHJlbW92ZSBpdCBmcm9tIHRoZSBvbGQga2V5IChpZiBwcmVzZW50KVxuICAgICAgaWYgKCFpc0JsYW5rKG9sZCkgJiYgY3VzdG9tUGFyZW50KSB7IGFycmF5aXNoUmVtb3ZlKGN1c3RvbVBhcmVudC5yZWZzLCBvbGQsIHRhZ09yRG9tKTsgfVxuICAgICAgaWYgKCFpc0JsYW5rKHRoaXMudmFsdWUpICYmIGlzU3RyaW5nKHRoaXMudmFsdWUpKSB7XG4gICAgICAgIC8vIGFkZCBpdCB0byB0aGUgcmVmcyBvZiBwYXJlbnQgdGFnICh0aGlzIGJlaGF2aW9yIHdhcyBjaGFuZ2VkID49My4wKVxuICAgICAgICBpZiAoY3VzdG9tUGFyZW50KSB7IGFycmF5aXNoQWRkKFxuICAgICAgICAgIGN1c3RvbVBhcmVudC5yZWZzLFxuICAgICAgICAgIHRoaXMudmFsdWUsXG4gICAgICAgICAgdGFnT3JEb20sXG4gICAgICAgICAgLy8gdXNlIGFuIGFycmF5IGlmIGl0J3MgYSBsb29wZWQgbm9kZSBhbmQgdGhlIHJlZiBpcyBub3QgYW4gZXhwcmVzc2lvblxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgdGhpcy5wYXJlbnQuX18uaW5kZXhcbiAgICAgICAgKTsgfVxuXG4gICAgICAgIGlmICh0aGlzLnZhbHVlICE9PSBvbGQpIHtcbiAgICAgICAgICBzZXRBdHRyaWJ1dGUodGhpcy5kb20sIHRoaXMuYXR0ciwgdGhpcy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlbW92ZUF0dHJpYnV0ZSh0aGlzLmRvbSwgdGhpcy5hdHRyKTtcbiAgICAgIH1cblxuICAgICAgLy8gY2FjaGUgdGhlIHJlZiBib3VuZCB0byB0aGlzIGRvbSBub2RlXG4gICAgICAvLyB0byByZXVzZSBpdCBpbiBmdXR1cmUgKHNlZSBhbHNvICMyMzI5KVxuICAgICAgaWYgKCF0aGlzLmRvbS5fX3JlZikgeyB0aGlzLmRvbS5fX3JlZiA9IHRhZ09yRG9tOyB9XG4gICAgfSxcbiAgICB1bm1vdW50OiBmdW5jdGlvbiB1bm1vdW50KCkge1xuICAgICAgdmFyIHRhZ09yRG9tID0gdGhpcy50YWcgfHwgdGhpcy5kb207XG4gICAgICB2YXIgY3VzdG9tUGFyZW50ID0gdGhpcy5wYXJlbnQgJiYgZ2V0SW1tZWRpYXRlQ3VzdG9tUGFyZW50KHRoaXMucGFyZW50KTtcbiAgICAgIGlmICghaXNCbGFuayh0aGlzLnZhbHVlKSAmJiBjdXN0b21QYXJlbnQpXG4gICAgICAgIHsgYXJyYXlpc2hSZW1vdmUoY3VzdG9tUGFyZW50LnJlZnMsIHRoaXMudmFsdWUsIHRhZ09yRG9tKTsgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IHJlZiBkaXJlY3RpdmVcbiAgICogQHBhcmFtICAgeyBIVE1MRWxlbWVudCB9IGRvbSAtIGRvbSBub2RlIGhhdmluZyB0aGUgcmVmIGF0dHJpYnV0ZVxuICAgKiBAcGFyYW0gICB7IFRhZyB9IGNvbnRleHQgLSB0YWcgaW5zdGFuY2Ugd2hlcmUgdGhlIERPTSBub2RlIGlzIGxvY2F0ZWRcbiAgICogQHBhcmFtICAgeyBTdHJpbmcgfSBhdHRyTmFtZSAtIGVpdGhlciAncmVmJyBvciAnZGF0YS1yZWYnXG4gICAqIEBwYXJhbSAgIHsgU3RyaW5nIH0gYXR0clZhbHVlIC0gdmFsdWUgb2YgdGhlIHJlZiBhdHRyaWJ1dGVcbiAgICogQHJldHVybnMgeyBSZWZFeHByIH0gYSBuZXcgUmVmRXhwciBvYmplY3RcbiAgICovXG4gIGZ1bmN0aW9uIGNyZWF0ZVJlZkRpcmVjdGl2ZShkb20sIHRhZywgYXR0ck5hbWUsIGF0dHJWYWx1ZSkge1xuICAgIHJldHVybiBjcmVhdGUoUmVmRXhwcikuaW5pdChkb20sIHRhZywgYXR0ck5hbWUsIGF0dHJWYWx1ZSlcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyIHRoZSB1bm1vdW50IG1ldGhvZCBvbiBhbGwgdGhlIGV4cHJlc3Npb25zXG4gICAqIEBwYXJhbSAgIHsgQXJyYXkgfSBleHByZXNzaW9ucyAtIERPTSBleHByZXNzaW9uc1xuICAgKi9cbiAgZnVuY3Rpb24gdW5tb3VudEFsbChleHByZXNzaW9ucykge1xuICAgIGVhY2goZXhwcmVzc2lvbnMsIGZ1bmN0aW9uIChleHByKSB7XG4gICAgICBpZiAoZXhwci51bm1vdW50KSB7IGV4cHIudW5tb3VudCh0cnVlKTsgfVxuICAgICAgZWxzZSBpZiAoZXhwci50YWdOYW1lKSB7IGV4cHIudGFnLnVubW91bnQodHJ1ZSk7IH1cbiAgICAgIGVsc2UgaWYgKGV4cHIudW5tb3VudCkgeyBleHByLnVubW91bnQoKTsgfVxuICAgIH0pO1xuICB9XG5cbiAgdmFyIElmRXhwciA9IHtcbiAgICBpbml0OiBmdW5jdGlvbiBpbml0KGRvbSwgdGFnLCBleHByKSB7XG4gICAgICByZW1vdmVBdHRyaWJ1dGUoZG9tLCBDT05ESVRJT05BTF9ESVJFQ1RJVkUpO1xuICAgICAgZXh0ZW5kKHRoaXMsIHsgdGFnOiB0YWcsIGV4cHI6IGV4cHIsIHN0dWI6IGNyZWF0ZURPTVBsYWNlaG9sZGVyKCksIHByaXN0aW5lOiBkb20gfSk7XG4gICAgICB2YXIgcCA9IGRvbS5wYXJlbnROb2RlO1xuICAgICAgcC5pbnNlcnRCZWZvcmUodGhpcy5zdHViLCBkb20pO1xuICAgICAgcC5yZW1vdmVDaGlsZChkb20pO1xuXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH0sXG4gICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUkJDEoKSB7XG4gICAgICB0aGlzLnZhbHVlID0gdG1wbCh0aGlzLmV4cHIsIHRoaXMudGFnKTtcblxuICAgICAgaWYgKCF0aGlzLnN0dWIucGFyZW50Tm9kZSkgeyByZXR1cm4gfVxuXG4gICAgICBpZiAodGhpcy52YWx1ZSAmJiAhdGhpcy5jdXJyZW50KSB7IC8vIGluc2VydFxuICAgICAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLnByaXN0aW5lLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgdGhpcy5zdHViLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuY3VycmVudCwgdGhpcy5zdHViKTtcbiAgICAgICAgdGhpcy5leHByZXNzaW9ucyA9IHBhcnNlRXhwcmVzc2lvbnMuYXBwbHkodGhpcy50YWcsIFt0aGlzLmN1cnJlbnQsIHRydWVdKTtcbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMudmFsdWUgJiYgdGhpcy5jdXJyZW50KSB7IC8vIHJlbW92ZVxuICAgICAgICB0aGlzLnVubW91bnQoKTtcbiAgICAgICAgdGhpcy5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5leHByZXNzaW9ucyA9IFtdO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy52YWx1ZSkgeyB1cGRhdGUuY2FsbCh0aGlzLnRhZywgdGhpcy5leHByZXNzaW9ucyk7IH1cbiAgICB9LFxuICAgIHVubW91bnQ6IGZ1bmN0aW9uIHVubW91bnQoKSB7XG4gICAgICBpZiAodGhpcy5jdXJyZW50KSB7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnQuX3RhZykge1xuICAgICAgICAgIHRoaXMuY3VycmVudC5fdGFnLnVubW91bnQoKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmN1cnJlbnQucGFyZW50Tm9kZSkge1xuICAgICAgICAgIHRoaXMuY3VycmVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuY3VycmVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdW5tb3VudEFsbCh0aGlzLmV4cHJlc3Npb25zIHx8IFtdKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBpZiBkaXJlY3RpdmVcbiAgICogQHBhcmFtICAgeyBIVE1MRWxlbWVudCB9IGRvbSAtIGlmIHJvb3QgZG9tIG5vZGVcbiAgICogQHBhcmFtICAgeyBUYWcgfSBjb250ZXh0IC0gdGFnIGluc3RhbmNlIHdoZXJlIHRoZSBET00gbm9kZSBpcyBsb2NhdGVkXG4gICAqIEBwYXJhbSAgIHsgU3RyaW5nIH0gYXR0ciAtIGlmIGV4cHJlc3Npb25cbiAgICogQHJldHVybnMgeyBJRkV4cHIgfSBhIG5ldyBJZkV4cHIgb2JqZWN0XG4gICAqL1xuICBmdW5jdGlvbiBjcmVhdGVJZkRpcmVjdGl2ZShkb20sIHRhZywgYXR0cikge1xuICAgIHJldHVybiBjcmVhdGUoSWZFeHByKS5pbml0KGRvbSwgdGFnLCBhdHRyKVxuICB9XG5cbiAgLyoqXG4gICAqIFdhbGsgdGhlIHRhZyBET00gdG8gZGV0ZWN0IHRoZSBleHByZXNzaW9ucyB0byBldmFsdWF0ZVxuICAgKiBAdGhpcyBUYWdcbiAgICogQHBhcmFtICAgeyBIVE1MRWxlbWVudCB9IHJvb3QgLSByb290IHRhZyB3aGVyZSB3ZSB3aWxsIHN0YXJ0IGRpZ2dpbmcgdGhlIGV4cHJlc3Npb25zXG4gICAqIEBwYXJhbSAgIHsgQm9vbGVhbiB9IG11c3RJbmNsdWRlUm9vdCAtIGZsYWcgdG8gZGVjaWRlIHdoZXRoZXIgdGhlIHJvb3QgbXVzdCBiZSBwYXJzZWQgYXMgd2VsbFxuICAgKiBAcmV0dXJucyB7IEFycmF5IH0gYWxsIHRoZSBleHByZXNzaW9ucyBmb3VuZFxuICAgKi9cbiAgZnVuY3Rpb24gcGFyc2VFeHByZXNzaW9ucyhyb290LCBtdXN0SW5jbHVkZVJvb3QpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIHZhciBleHByZXNzaW9ucyA9IFtdO1xuXG4gICAgd2Fsa05vZGVzKHJvb3QsIGZ1bmN0aW9uIChkb20pIHtcbiAgICAgIHZhciB0eXBlID0gZG9tLm5vZGVUeXBlO1xuICAgICAgdmFyIGF0dHI7XG4gICAgICB2YXIgdGFnSW1wbDtcblxuICAgICAgaWYgKCFtdXN0SW5jbHVkZVJvb3QgJiYgZG9tID09PSByb290KSB7IHJldHVybiB9XG5cbiAgICAgIC8vIHRleHQgbm9kZVxuICAgICAgaWYgKHR5cGUgPT09IDMgJiYgZG9tLnBhcmVudE5vZGUudGFnTmFtZSAhPT0gJ1NUWUxFJyAmJiB0bXBsLmhhc0V4cHIoZG9tLm5vZGVWYWx1ZSkpXG4gICAgICAgIHsgZXhwcmVzc2lvbnMucHVzaCh7ZG9tOiBkb20sIGV4cHI6IGRvbS5ub2RlVmFsdWV9KTsgfVxuXG4gICAgICBpZiAodHlwZSAhPT0gMSkgeyByZXR1cm4gfVxuXG4gICAgICB2YXIgaXNWaXJ0dWFsID0gZG9tLnRhZ05hbWUgPT09ICdWSVJUVUFMJztcblxuICAgICAgLy8gbG9vcC4gZWFjaCBkb2VzIGl0J3Mgb3duIHRoaW5nIChmb3Igbm93KVxuICAgICAgaWYgKGF0dHIgPSBnZXRBdHRyaWJ1dGUoZG9tLCBMT09QX0RJUkVDVElWRSkpIHtcbiAgICAgICAgaWYoaXNWaXJ0dWFsKSB7IHNldEF0dHJpYnV0ZShkb20sICdsb29wVmlydHVhbCcsIHRydWUpOyB9IC8vIGlnbm9yZSBoZXJlLCBoYW5kbGVkIGluIF9lYWNoXG4gICAgICAgIGV4cHJlc3Npb25zLnB1c2goX2VhY2goZG9tLCB0aGlzJDEsIGF0dHIpKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG5cbiAgICAgIC8vIGlmLWF0dHJzIGJlY29tZSB0aGUgbmV3IHBhcmVudC4gQW55IGZvbGxvd2luZyBleHByZXNzaW9ucyAoZWl0aGVyIG9uIHRoZSBjdXJyZW50XG4gICAgICAvLyBlbGVtZW50LCBvciBiZWxvdyBpdCkgYmVjb21lIGNoaWxkcmVuIG9mIHRoaXMgZXhwcmVzc2lvbi5cbiAgICAgIGlmIChhdHRyID0gZ2V0QXR0cmlidXRlKGRvbSwgQ09ORElUSU9OQUxfRElSRUNUSVZFKSkge1xuICAgICAgICBleHByZXNzaW9ucy5wdXNoKGNyZWF0ZUlmRGlyZWN0aXZlKGRvbSwgdGhpcyQxLCBhdHRyKSk7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuXG4gICAgICBpZiAoYXR0ciA9IGdldEF0dHJpYnV0ZShkb20sIElTX0RJUkVDVElWRSkpIHtcbiAgICAgICAgaWYgKHRtcGwuaGFzRXhwcihhdHRyKSkge1xuICAgICAgICAgIGV4cHJlc3Npb25zLnB1c2goe1xuICAgICAgICAgICAgaXNSdGFnOiB0cnVlLFxuICAgICAgICAgICAgZXhwcjogYXR0cixcbiAgICAgICAgICAgIGRvbTogZG9tLFxuICAgICAgICAgICAgYXR0cnM6IFtdLnNsaWNlLmNhbGwoZG9tLmF0dHJpYnV0ZXMpXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBpZiB0aGlzIGlzIGEgdGFnLCBzdG9wIHRyYXZlcnNpbmcgaGVyZS5cbiAgICAgIC8vIHdlIGlnbm9yZSB0aGUgcm9vdCwgc2luY2UgcGFyc2VFeHByZXNzaW9ucyBpcyBjYWxsZWQgd2hpbGUgd2UncmUgbW91bnRpbmcgdGhhdCByb290XG4gICAgICB0YWdJbXBsID0gZ2V0KGRvbSk7XG5cbiAgICAgIGlmKGlzVmlydHVhbCkge1xuICAgICAgICBpZihnZXRBdHRyaWJ1dGUoZG9tLCAndmlydHVhbGl6ZWQnKSkge2RvbS5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGRvbSk7IH0gLy8gdGFnIGNyZWF0ZWQsIHJlbW92ZSBmcm9tIGRvbVxuICAgICAgICBpZighdGFnSW1wbCAmJiAhZ2V0QXR0cmlidXRlKGRvbSwgJ3ZpcnR1YWxpemVkJykgJiYgIWdldEF0dHJpYnV0ZShkb20sICdsb29wVmlydHVhbCcpKSAgLy8gb2sgdG8gY3JlYXRlIHZpcnR1YWwgdGFnXG4gICAgICAgICAgeyB0YWdJbXBsID0geyB0bXBsOiBkb20ub3V0ZXJIVE1MIH07IH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRhZ0ltcGwgJiYgKGRvbSAhPT0gcm9vdCB8fCBtdXN0SW5jbHVkZVJvb3QpKSB7XG4gICAgICAgIHZhciBoYXNJc0RpcmVjdGl2ZSA9IGdldEF0dHJpYnV0ZShkb20sIElTX0RJUkVDVElWRSk7XG4gICAgICAgIGlmKGlzVmlydHVhbCAmJiAhaGFzSXNEaXJlY3RpdmUpIHsgLy8gaGFuZGxlZCBpbiB1cGRhdGVcbiAgICAgICAgICAvLyBjYW4gbm90IHJlbW92ZSBhdHRyaWJ1dGUgbGlrZSBkaXJlY3RpdmVzXG4gICAgICAgICAgLy8gc28gZmxhZyBmb3IgcmVtb3ZhbCBhZnRlciBjcmVhdGlvbiB0byBwcmV2ZW50IG1heGltdW0gc3RhY2sgZXJyb3JcbiAgICAgICAgICBzZXRBdHRyaWJ1dGUoZG9tLCAndmlydHVhbGl6ZWQnLCB0cnVlKTtcbiAgICAgICAgICB2YXIgdGFnID0gY3JlYXRlVGFnKFxuICAgICAgICAgICAge3RtcGw6IGRvbS5vdXRlckhUTUx9LFxuICAgICAgICAgICAge3Jvb3Q6IGRvbSwgcGFyZW50OiB0aGlzJDF9LFxuICAgICAgICAgICAgZG9tLmlubmVySFRNTFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBleHByZXNzaW9ucy5wdXNoKHRhZyk7IC8vIG5vIHJldHVybiwgYW5vbnltb3VzIHRhZywga2VlcCBwYXJzaW5nXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGhhc0lzRGlyZWN0aXZlICYmIGlzVmlydHVhbClcbiAgICAgICAgICAgIHsgd2FybigoXCJWaXJ0dWFsIHRhZ3Mgc2hvdWxkbid0IGJlIHVzZWQgdG9nZXRoZXIgd2l0aCB0aGUgXFxcIlwiICsgSVNfRElSRUNUSVZFICsgXCJcXFwiIGF0dHJpYnV0ZSAtIGh0dHBzOi8vZ2l0aHViLmNvbS9yaW90L3Jpb3QvaXNzdWVzLzI1MTFcIikpOyB9XG5cbiAgICAgICAgICBleHByZXNzaW9ucy5wdXNoKFxuICAgICAgICAgICAgaW5pdENoaWxkKFxuICAgICAgICAgICAgICB0YWdJbXBsLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcm9vdDogZG9tLFxuICAgICAgICAgICAgICAgIHBhcmVudDogdGhpcyQxXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGRvbS5pbm5lckhUTUwsXG4gICAgICAgICAgICAgIHRoaXMkMVxuICAgICAgICAgICAgKVxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gYXR0cmlidXRlIGV4cHJlc3Npb25zXG4gICAgICBwYXJzZUF0dHJpYnV0ZXMuYXBwbHkodGhpcyQxLCBbZG9tLCBkb20uYXR0cmlidXRlcywgZnVuY3Rpb24gKGF0dHIsIGV4cHIpIHtcbiAgICAgICAgaWYgKCFleHByKSB7IHJldHVybiB9XG4gICAgICAgIGV4cHJlc3Npb25zLnB1c2goZXhwcik7XG4gICAgICB9XSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZXhwcmVzc2lvbnNcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxscyBgZm5gIGZvciBldmVyeSBhdHRyaWJ1dGUgb24gYW4gZWxlbWVudC4gSWYgdGhhdCBhdHRyIGhhcyBhbiBleHByZXNzaW9uLFxuICAgKiBpdCBpcyBhbHNvIHBhc3NlZCB0byBmbi5cbiAgICogQHRoaXMgVGFnXG4gICAqIEBwYXJhbSAgIHsgSFRNTEVsZW1lbnQgfSBkb20gLSBkb20gbm9kZSB0byBwYXJzZVxuICAgKiBAcGFyYW0gICB7IEFycmF5IH0gYXR0cnMgLSBhcnJheSBvZiBhdHRyaWJ1dGVzXG4gICAqIEBwYXJhbSAgIHsgRnVuY3Rpb24gfSBmbiAtIGNhbGxiYWNrIHRvIGV4ZWMgb24gYW55IGl0ZXJhdGlvblxuICAgKi9cbiAgZnVuY3Rpb24gcGFyc2VBdHRyaWJ1dGVzKGRvbSwgYXR0cnMsIGZuKSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICBlYWNoKGF0dHJzLCBmdW5jdGlvbiAoYXR0cikge1xuICAgICAgaWYgKCFhdHRyKSB7IHJldHVybiBmYWxzZSB9XG5cbiAgICAgIHZhciBuYW1lID0gYXR0ci5uYW1lO1xuICAgICAgdmFyIGJvb2wgPSBpc0Jvb2xBdHRyKG5hbWUpO1xuICAgICAgdmFyIGV4cHI7XG5cbiAgICAgIGlmIChjb250YWlucyhSRUZfRElSRUNUSVZFUywgbmFtZSkgJiYgZG9tLnRhZ05hbWUudG9Mb3dlckNhc2UoKSAhPT0gWUlFTERfVEFHKSB7XG4gICAgICAgIGV4cHIgPSAgY3JlYXRlUmVmRGlyZWN0aXZlKGRvbSwgdGhpcyQxLCBuYW1lLCBhdHRyLnZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAodG1wbC5oYXNFeHByKGF0dHIudmFsdWUpKSB7XG4gICAgICAgIGV4cHIgPSB7ZG9tOiBkb20sIGV4cHI6IGF0dHIudmFsdWUsIGF0dHI6IG5hbWUsIGJvb2w6IGJvb2x9O1xuICAgICAgfVxuXG4gICAgICBmbihhdHRyLCBleHByKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYW5hZ2UgdGhlIG1vdW50IHN0YXRlIG9mIGEgdGFnIHRyaWdnZXJpbmcgYWxzbyB0aGUgb2JzZXJ2YWJsZSBldmVudHNcbiAgICogQHRoaXMgVGFnXG4gICAqIEBwYXJhbSB7IEJvb2xlYW4gfSB2YWx1ZSAtIC4ub2YgdGhlIGlzTW91bnRlZCBmbGFnXG4gICAqL1xuICBmdW5jdGlvbiBzZXRNb3VudFN0YXRlKHZhbHVlKSB7XG4gICAgdmFyIHJlZiA9IHRoaXMuX187XG4gICAgdmFyIGlzQW5vbnltb3VzID0gcmVmLmlzQW5vbnltb3VzO1xuICAgIHZhciBza2lwQW5vbnltb3VzID0gcmVmLnNraXBBbm9ueW1vdXM7XG5cbiAgICBkZWZpbmUodGhpcywgJ2lzTW91bnRlZCcsIHZhbHVlKTtcblxuICAgIGlmICghaXNBbm9ueW1vdXMgfHwgIXNraXBBbm9ueW1vdXMpIHtcbiAgICAgIGlmICh2YWx1ZSkgeyB0aGlzLnRyaWdnZXIoJ21vdW50Jyk7IH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ3VubW91bnQnKTtcbiAgICAgICAgdGhpcy5vZmYoJyonKTtcbiAgICAgICAgdGhpcy5fXy53YXNDcmVhdGVkID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE1vdW50IHRoZSBjdXJyZW50IHRhZyBpbnN0YW5jZVxuICAgKiBAcmV0dXJucyB7IFRhZyB9IHRoZSBjdXJyZW50IHRhZyBpbnN0YW5jZVxuICAgKi9cbiAgZnVuY3Rpb24gY29tcG9uZW50TW91bnQodGFnJCQxLCBkb20sIGV4cHJlc3Npb25zLCBvcHRzKSB7XG4gICAgdmFyIF9fID0gdGFnJCQxLl9fO1xuICAgIHZhciByb290ID0gX18ucm9vdDtcbiAgICByb290Ll90YWcgPSB0YWckJDE7IC8vIGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlIHRhZyBqdXN0IGNyZWF0ZWRcblxuICAgIC8vIFJlYWQgYWxsIHRoZSBhdHRycyBvbiB0aGlzIGluc3RhbmNlLiBUaGlzIGdpdmUgdXMgdGhlIGluZm8gd2UgbmVlZCBmb3IgdXBkYXRlT3B0c1xuICAgIHBhcnNlQXR0cmlidXRlcy5hcHBseShfXy5wYXJlbnQsIFtyb290LCByb290LmF0dHJpYnV0ZXMsIGZ1bmN0aW9uIChhdHRyLCBleHByKSB7XG4gICAgICBpZiAoIV9fLmlzQW5vbnltb3VzICYmIFJlZkV4cHIuaXNQcm90b3R5cGVPZihleHByKSkgeyBleHByLnRhZyA9IHRhZyQkMTsgfVxuICAgICAgYXR0ci5leHByID0gZXhwcjtcbiAgICAgIF9fLmluc3RBdHRycy5wdXNoKGF0dHIpO1xuICAgIH1dKTtcblxuICAgIC8vIHVwZGF0ZSB0aGUgcm9vdCBhZGRpbmcgY3VzdG9tIGF0dHJpYnV0ZXMgY29taW5nIGZyb20gdGhlIGNvbXBpbGVyXG4gICAgd2Fsa0F0dHJpYnV0ZXMoX18uaW1wbC5hdHRycywgZnVuY3Rpb24gKGssIHYpIHsgX18uaW1wbEF0dHJzLnB1c2goe25hbWU6IGssIHZhbHVlOiB2fSk7IH0pO1xuICAgIHBhcnNlQXR0cmlidXRlcy5hcHBseSh0YWckJDEsIFtyb290LCBfXy5pbXBsQXR0cnMsIGZ1bmN0aW9uIChhdHRyLCBleHByKSB7XG4gICAgICBpZiAoZXhwcikgeyBleHByZXNzaW9ucy5wdXNoKGV4cHIpOyB9XG4gICAgICBlbHNlIHsgc2V0QXR0cmlidXRlKHJvb3QsIGF0dHIubmFtZSwgYXR0ci52YWx1ZSk7IH1cbiAgICB9XSk7XG5cbiAgICAvLyBpbml0aWFsaWF0aW9uXG4gICAgdXBkYXRlT3B0cy5hcHBseSh0YWckJDEsIFtfXy5pc0xvb3AsIF9fLnBhcmVudCwgX18uaXNBbm9ueW1vdXMsIG9wdHMsIF9fLmluc3RBdHRyc10pO1xuXG4gICAgLy8gYWRkIGdsb2JhbCBtaXhpbnNcbiAgICB2YXIgZ2xvYmFsTWl4aW4gPSBtaXhpbihHTE9CQUxfTUlYSU4pO1xuXG4gICAgaWYgKGdsb2JhbE1peGluICYmICFfXy5za2lwQW5vbnltb3VzKSB7XG4gICAgICBmb3IgKHZhciBpIGluIGdsb2JhbE1peGluKSB7XG4gICAgICAgIGlmIChnbG9iYWxNaXhpbi5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgIHRhZyQkMS5taXhpbihnbG9iYWxNaXhpbltpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoX18uaW1wbC5mbikgeyBfXy5pbXBsLmZuLmNhbGwodGFnJCQxLCBvcHRzKTsgfVxuXG4gICAgaWYgKCFfXy5za2lwQW5vbnltb3VzKSB7IHRhZyQkMS50cmlnZ2VyKCdiZWZvcmUtbW91bnQnKTsgfVxuXG4gICAgLy8gcGFyc2UgbGF5b3V0IGFmdGVyIGluaXQuIGZuIG1heSBjYWxjdWxhdGUgYXJncyBmb3IgbmVzdGVkIGN1c3RvbSB0YWdzXG4gICAgZWFjaChwYXJzZUV4cHJlc3Npb25zLmFwcGx5KHRhZyQkMSwgW2RvbSwgX18uaXNBbm9ueW1vdXNdKSwgZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGV4cHJlc3Npb25zLnB1c2goZSk7IH0pO1xuXG4gICAgdGFnJCQxLnVwZGF0ZShfXy5pdGVtKTtcblxuICAgIGlmICghX18uaXNBbm9ueW1vdXMgJiYgIV9fLmlzSW5saW5lKSB7XG4gICAgICB3aGlsZSAoZG9tLmZpcnN0Q2hpbGQpIHsgcm9vdC5hcHBlbmRDaGlsZChkb20uZmlyc3RDaGlsZCk7IH1cbiAgICB9XG5cbiAgICBkZWZpbmUodGFnJCQxLCAncm9vdCcsIHJvb3QpO1xuXG4gICAgLy8gaWYgd2UgbmVlZCB0byB3YWl0IHRoYXQgdGhlIHBhcmVudCBcIm1vdW50XCIgb3IgXCJ1cGRhdGVkXCIgZXZlbnQgZ2V0cyB0cmlnZ2VyZWRcbiAgICBpZiAoIV9fLnNraXBBbm9ueW1vdXMgJiYgdGFnJCQxLnBhcmVudCkge1xuICAgICAgdmFyIHAgPSBnZXRJbW1lZGlhdGVDdXN0b21QYXJlbnQodGFnJCQxLnBhcmVudCk7XG4gICAgICBwLm9uZSghcC5pc01vdW50ZWQgPyAnbW91bnQnIDogJ3VwZGF0ZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNldE1vdW50U3RhdGUuY2FsbCh0YWckJDEsIHRydWUpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG90aGVyd2lzZSBpdCdzIG5vdCBhIGNoaWxkIHRhZyB3ZSBjYW4gdHJpZ2dlciBpdHMgbW91bnQgZXZlbnRcbiAgICAgIHNldE1vdW50U3RhdGUuY2FsbCh0YWckJDEsIHRydWUpO1xuICAgIH1cblxuICAgIHRhZyQkMS5fXy53YXNDcmVhdGVkID0gdHJ1ZTtcblxuICAgIHJldHVybiB0YWckJDFcbiAgfVxuXG4gIC8qKlxuICAgKiBVbm1vdW50IHRoZSB0YWcgaW5zdGFuY2VcbiAgICogQHBhcmFtIHsgQm9vbGVhbiB9IG11c3RLZWVwUm9vdCAtIGlmIGl0J3MgdHJ1ZSB0aGUgcm9vdCBub2RlIHdpbGwgbm90IGJlIHJlbW92ZWRcbiAgICogQHJldHVybnMgeyBUYWcgfSB0aGUgY3VycmVudCB0YWcgaW5zdGFuY2VcbiAgICovXG4gIGZ1bmN0aW9uIHRhZ1VubW91bnQodGFnLCBtdXN0S2VlcFJvb3QsIGV4cHJlc3Npb25zKSB7XG4gICAgdmFyIF9fID0gdGFnLl9fO1xuICAgIHZhciByb290ID0gX18ucm9vdDtcbiAgICB2YXIgdGFnSW5kZXggPSBfX1RBR1NfQ0FDSEUuaW5kZXhPZih0YWcpO1xuICAgIHZhciBwID0gcm9vdC5wYXJlbnROb2RlO1xuXG4gICAgaWYgKCFfXy5za2lwQW5vbnltb3VzKSB7IHRhZy50cmlnZ2VyKCdiZWZvcmUtdW5tb3VudCcpOyB9XG5cbiAgICAvLyBjbGVhciBhbGwgYXR0cmlidXRlcyBjb21pbmcgZnJvbSB0aGUgbW91bnRlZCB0YWdcbiAgICB3YWxrQXR0cmlidXRlcyhfXy5pbXBsLmF0dHJzLCBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgaWYgKHN0YXJ0c1dpdGgobmFtZSwgQVRUUlNfUFJFRklYKSlcbiAgICAgICAgeyBuYW1lID0gbmFtZS5zbGljZShBVFRSU19QUkVGSVgubGVuZ3RoKTsgfVxuXG4gICAgICByZW1vdmVBdHRyaWJ1dGUocm9vdCwgbmFtZSk7XG4gICAgfSk7XG5cbiAgICAvLyByZW1vdmUgYWxsIHRoZSBldmVudCBsaXN0ZW5lcnNcbiAgICB0YWcuX18ubGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGRvbSkge1xuICAgICAgT2JqZWN0LmtleXMoZG9tW1JJT1RfRVZFTlRTX0tFWV0pLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50TmFtZSkge1xuICAgICAgICBkb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGRvbVtSSU9UX0VWRU5UU19LRVldW2V2ZW50TmFtZV0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyByZW1vdmUgdGFnIGluc3RhbmNlIGZyb20gdGhlIGdsb2JhbCB0YWdzIGNhY2hlIGNvbGxlY3Rpb25cbiAgICBpZiAodGFnSW5kZXggIT09IC0xKSB7IF9fVEFHU19DQUNIRS5zcGxpY2UodGFnSW5kZXgsIDEpOyB9XG5cbiAgICAvLyBjbGVhbiB1cCB0aGUgcGFyZW50IHRhZ3Mgb2JqZWN0XG4gICAgaWYgKF9fLnBhcmVudCAmJiAhX18uaXNBbm9ueW1vdXMpIHtcbiAgICAgIHZhciBwdGFnID0gZ2V0SW1tZWRpYXRlQ3VzdG9tUGFyZW50KF9fLnBhcmVudCk7XG5cbiAgICAgIGlmIChfXy5pc1ZpcnR1YWwpIHtcbiAgICAgICAgT2JqZWN0XG4gICAgICAgICAgLmtleXModGFnLnRhZ3MpXG4gICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24gKHRhZ05hbWUpIHsgcmV0dXJuIGFycmF5aXNoUmVtb3ZlKHB0YWcudGFncywgdGFnTmFtZSwgdGFnLnRhZ3NbdGFnTmFtZV0pOyB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFycmF5aXNoUmVtb3ZlKHB0YWcudGFncywgX18udGFnTmFtZSwgdGFnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyB1bm1vdW50IGFsbCB0aGUgdmlydHVhbCBkaXJlY3RpdmVzXG4gICAgaWYgKHRhZy5fXy52aXJ0cykge1xuICAgICAgZWFjaCh0YWcuX18udmlydHMsIGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIGlmICh2LnBhcmVudE5vZGUpIHsgdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHYpOyB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBhbGxvdyBleHByZXNzaW9ucyB0byB1bm1vdW50IHRoZW1zZWx2ZXNcbiAgICB1bm1vdW50QWxsKGV4cHJlc3Npb25zKTtcbiAgICBlYWNoKF9fLmluc3RBdHRycywgZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGEuZXhwciAmJiBhLmV4cHIudW5tb3VudCAmJiBhLmV4cHIudW5tb3VudCgpOyB9KTtcblxuICAgIC8vIGNsZWFyIHRoZSB0YWcgaHRtbCBpZiBpdCdzIG5lY2Vzc2FyeVxuICAgIGlmIChtdXN0S2VlcFJvb3QpIHsgc2V0SW5uZXJIVE1MKHJvb3QsICcnKTsgfVxuICAgIC8vIG90aGVyd2lzZSBkZXRhY2ggdGhlIHJvb3QgdGFnIGZyb20gdGhlIERPTVxuICAgIGVsc2UgaWYgKHApIHsgcC5yZW1vdmVDaGlsZChyb290KTsgfVxuXG4gICAgLy8gY3VzdG9tIGludGVybmFsIHVubW91bnQgZnVuY3Rpb24gdG8gYXZvaWQgcmVseWluZyBvbiB0aGUgb2JzZXJ2YWJsZVxuICAgIGlmIChfXy5vblVubW91bnQpIHsgX18ub25Vbm1vdW50KCk7IH1cblxuICAgIC8vIHdlaXJkIGZpeCBmb3IgYSB3ZWlyZCBlZGdlIGNhc2UgIzI0MDkgYW5kICMyNDM2XG4gICAgLy8gc29tZSB1c2VycyBtaWdodCB1c2UgeW91ciBzb2Z0d2FyZSBub3QgYXMgeW91J3ZlIGV4cGVjdGVkXG4gICAgLy8gc28gSSBuZWVkIHRvIGFkZCB0aGVzZSBkaXJ0eSBoYWNrcyB0byBtaXRpZ2F0ZSB1bmV4cGVjdGVkIGlzc3Vlc1xuICAgIGlmICghdGFnLmlzTW91bnRlZCkgeyBzZXRNb3VudFN0YXRlLmNhbGwodGFnLCB0cnVlKTsgfVxuXG4gICAgc2V0TW91bnRTdGF0ZS5jYWxsKHRhZywgZmFsc2UpO1xuXG4gICAgZGVsZXRlIHJvb3QuX3RhZztcblxuICAgIHJldHVybiB0YWdcbiAgfVxuXG4gIC8qKlxuICAgKiBUYWcgY3JlYXRpb24gZmFjdG9yeSBmdW5jdGlvblxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHsgT2JqZWN0IH0gaW1wbCAtIGl0IGNvbnRhaW5zIHRoZSB0YWcgdGVtcGxhdGUsIGFuZCBsb2dpY1xuICAgKiBAcGFyYW0geyBPYmplY3QgfSBjb25mIC0gdGFnIG9wdGlvbnNcbiAgICogQHBhcmFtIHsgU3RyaW5nIH0gaW5uZXJIVE1MIC0gaHRtbCB0aGF0IGV2ZW50dWFsbHkgd2UgbmVlZCB0byBpbmplY3QgaW4gdGhlIHRhZ1xuICAgKi9cbiAgZnVuY3Rpb24gY3JlYXRlVGFnKGltcGwsIGNvbmYsIGlubmVySFRNTCkge1xuICAgIGlmICggaW1wbCA9PT0gdm9pZCAwICkgaW1wbCA9IHt9O1xuICAgIGlmICggY29uZiA9PT0gdm9pZCAwICkgY29uZiA9IHt9O1xuXG4gICAgdmFyIHRhZyA9IGNvbmYuY29udGV4dCB8fCB7fTtcbiAgICB2YXIgb3B0cyA9IGNvbmYub3B0cyB8fCB7fTtcbiAgICB2YXIgcGFyZW50ID0gY29uZi5wYXJlbnQ7XG4gICAgdmFyIGlzTG9vcCA9IGNvbmYuaXNMb29wO1xuICAgIHZhciBpc0Fub255bW91cyA9ICEhY29uZi5pc0Fub255bW91cztcbiAgICB2YXIgc2tpcEFub255bW91cyA9IHNldHRpbmdzLnNraXBBbm9ueW1vdXNUYWdzICYmIGlzQW5vbnltb3VzO1xuICAgIHZhciBpdGVtID0gY29uZi5pdGVtO1xuICAgIC8vIGF2YWlsYWJsZSBvbmx5IGZvciB0aGUgbG9vcGVkIG5vZGVzXG4gICAgdmFyIGluZGV4ID0gY29uZi5pbmRleDtcbiAgICAvLyBBbGwgYXR0cmlidXRlcyBvbiB0aGUgVGFnIHdoZW4gaXQncyBmaXJzdCBwYXJzZWRcbiAgICB2YXIgaW5zdEF0dHJzID0gW107XG4gICAgLy8gZXhwcmVzc2lvbnMgb24gdGhpcyB0eXBlIG9mIFRhZ1xuICAgIHZhciBpbXBsQXR0cnMgPSBbXTtcbiAgICB2YXIgdG1wbCA9IGltcGwudG1wbDtcbiAgICB2YXIgZXhwcmVzc2lvbnMgPSBbXTtcbiAgICB2YXIgcm9vdCA9IGNvbmYucm9vdDtcbiAgICB2YXIgdGFnTmFtZSA9IGNvbmYudGFnTmFtZSB8fCBnZXROYW1lKHJvb3QpO1xuICAgIHZhciBpc1ZpcnR1YWwgPSB0YWdOYW1lID09PSAndmlydHVhbCc7XG4gICAgdmFyIGlzSW5saW5lID0gIWlzVmlydHVhbCAmJiAhdG1wbDtcbiAgICB2YXIgZG9tO1xuXG4gICAgaWYgKGlzSW5saW5lIHx8IGlzTG9vcCAmJiBpc0Fub255bW91cykge1xuICAgICAgZG9tID0gcm9vdDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCFpc1ZpcnR1YWwpIHsgcm9vdC5pbm5lckhUTUwgPSAnJzsgfVxuICAgICAgZG9tID0gbWtkb20odG1wbCwgaW5uZXJIVE1MLCBpc1N2Zyhyb290KSk7XG4gICAgfVxuXG4gICAgLy8gbWFrZSB0aGlzIHRhZyBvYnNlcnZhYmxlXG4gICAgaWYgKCFza2lwQW5vbnltb3VzKSB7IG9ic2VydmFibGUodGFnKTsgfVxuXG4gICAgLy8gb25seSBjYWxsIHVubW91bnQgaWYgd2UgaGF2ZSBhIHZhbGlkIF9fVEFHX0lNUEwgKGhhcyBuYW1lIHByb3BlcnR5KVxuICAgIGlmIChpbXBsLm5hbWUgJiYgcm9vdC5fdGFnKSB7IHJvb3QuX3RhZy51bm1vdW50KHRydWUpOyB9XG5cbiAgICBkZWZpbmUodGFnLCAnX18nLCB7XG4gICAgICBpbXBsOiBpbXBsLFxuICAgICAgcm9vdDogcm9vdCxcbiAgICAgIHNraXBBbm9ueW1vdXM6IHNraXBBbm9ueW1vdXMsXG4gICAgICBpbXBsQXR0cnM6IGltcGxBdHRycyxcbiAgICAgIGlzQW5vbnltb3VzOiBpc0Fub255bW91cyxcbiAgICAgIGluc3RBdHRyczogaW5zdEF0dHJzLFxuICAgICAgaW5uZXJIVE1MOiBpbm5lckhUTUwsXG4gICAgICB0YWdOYW1lOiB0YWdOYW1lLFxuICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgaXNMb29wOiBpc0xvb3AsXG4gICAgICBpc0lubGluZTogaXNJbmxpbmUsXG4gICAgICBpdGVtOiBpdGVtLFxuICAgICAgcGFyZW50OiBwYXJlbnQsXG4gICAgICAvLyB0YWdzIGhhdmluZyBldmVudCBsaXN0ZW5lcnNcbiAgICAgIC8vIGl0IHdvdWxkIGJlIGJldHRlciB0byB1c2Ugd2VhayBtYXBzIGhlcmUgYnV0IHdlIGNhbiBub3QgaW50cm9kdWNlIGJyZWFraW5nIGNoYW5nZXMgbm93XG4gICAgICBsaXN0ZW5lcnM6IFtdLFxuICAgICAgLy8gdGhlc2UgdmFycyB3aWxsIGJlIG5lZWRlZCBvbmx5IGZvciB0aGUgdmlydHVhbCB0YWdzXG4gICAgICB2aXJ0czogW10sXG4gICAgICB3YXNDcmVhdGVkOiBmYWxzZSxcbiAgICAgIHRhaWw6IG51bGwsXG4gICAgICBoZWFkOiBudWxsXG4gICAgfSk7XG5cbiAgICAvLyB0YWcgcHJvdGVjdGVkIHByb3BlcnRpZXNcbiAgICByZXR1cm4gW1xuICAgICAgWydpc01vdW50ZWQnLCBmYWxzZV0sXG4gICAgICAvLyBjcmVhdGUgYSB1bmlxdWUgaWQgdG8gdGhpcyB0YWdcbiAgICAgIC8vIGl0IGNvdWxkIGJlIGhhbmR5IHRvIHVzZSBpdCBhbHNvIHRvIGltcHJvdmUgdGhlIHZpcnR1YWwgZG9tIHJlbmRlcmluZyBzcGVlZFxuICAgICAgWydfcmlvdF9pZCcsIHVpZCgpXSxcbiAgICAgIFsncm9vdCcsIHJvb3RdLFxuICAgICAgWydvcHRzJywgb3B0cywgeyB3cml0YWJsZTogdHJ1ZSwgZW51bWVyYWJsZTogdHJ1ZSB9XSxcbiAgICAgIFsncGFyZW50JywgcGFyZW50IHx8IG51bGxdLFxuICAgICAgLy8gcHJvdGVjdCB0aGUgXCJ0YWdzXCIgYW5kIFwicmVmc1wiIHByb3BlcnR5IGZyb20gYmVpbmcgb3ZlcnJpZGRlblxuICAgICAgWyd0YWdzJywge31dLFxuICAgICAgWydyZWZzJywge31dLFxuICAgICAgWyd1cGRhdGUnLCBmdW5jdGlvbiAoZGF0YSkgeyByZXR1cm4gY29tcG9uZW50VXBkYXRlKHRhZywgZGF0YSwgZXhwcmVzc2lvbnMpOyB9XSxcbiAgICAgIFsnbWl4aW4nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBtaXhpbnMgPSBbXSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKCBsZW4tLSApIG1peGluc1sgbGVuIF0gPSBhcmd1bWVudHNbIGxlbiBdO1xuXG4gICAgICAgIHJldHVybiBjb21wb25lbnRNaXhpbi5hcHBseSh2b2lkIDAsIFsgdGFnIF0uY29uY2F0KCBtaXhpbnMgKSk7XG4gICAgfV0sXG4gICAgICBbJ21vdW50JywgZnVuY3Rpb24gKCkgeyByZXR1cm4gY29tcG9uZW50TW91bnQodGFnLCBkb20sIGV4cHJlc3Npb25zLCBvcHRzKTsgfV0sXG4gICAgICBbJ3VubW91bnQnLCBmdW5jdGlvbiAobXVzdEtlZXBSb290KSB7IHJldHVybiB0YWdVbm1vdW50KHRhZywgbXVzdEtlZXBSb290LCBleHByZXNzaW9ucyk7IH1dXG4gICAgXS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgcmVmKSB7XG4gICAgICB2YXIga2V5ID0gcmVmWzBdO1xuICAgICAgdmFyIHZhbHVlID0gcmVmWzFdO1xuICAgICAgdmFyIG9wdHMgPSByZWZbMl07XG5cbiAgICAgIGRlZmluZSh0YWcsIGtleSwgdmFsdWUsIG9wdHMpO1xuICAgICAgcmV0dXJuIGFjY1xuICAgIH0sIGV4dGVuZCh0YWcsIGl0ZW0pKVxuICB9XG5cbiAgLyoqXG4gICAqIE1vdW50IGEgdGFnIGNyZWF0aW5nIG5ldyBUYWcgaW5zdGFuY2VcbiAgICogQHBhcmFtICAgeyBPYmplY3QgfSByb290IC0gZG9tIG5vZGUgd2hlcmUgdGhlIHRhZyB3aWxsIGJlIG1vdW50ZWRcbiAgICogQHBhcmFtICAgeyBTdHJpbmcgfSB0YWdOYW1lIC0gbmFtZSBvZiB0aGUgcmlvdCB0YWcgd2Ugd2FudCB0byBtb3VudFxuICAgKiBAcGFyYW0gICB7IE9iamVjdCB9IG9wdHMgLSBvcHRpb25zIHRvIHBhc3MgdG8gdGhlIFRhZyBpbnN0YW5jZVxuICAgKiBAcGFyYW0gICB7IE9iamVjdCB9IGN0eCAtIG9wdGlvbmFsIGNvbnRleHQgdGhhdCB3aWxsIGJlIHVzZWQgdG8gZXh0ZW5kIGFuIGV4aXN0aW5nIGNsYXNzICggdXNlZCBpbiByaW90LlRhZyApXG4gICAqIEByZXR1cm5zIHsgVGFnIH0gYSBuZXcgVGFnIGluc3RhbmNlXG4gICAqL1xuICBmdW5jdGlvbiBtb3VudCQxKHJvb3QsIHRhZ05hbWUsIG9wdHMsIGN0eCkge1xuICAgIHZhciBpbXBsID0gX19UQUdfSU1QTFt0YWdOYW1lXTtcbiAgICB2YXIgaW1wbENsYXNzID0gX19UQUdfSU1QTFt0YWdOYW1lXS5jbGFzcztcbiAgICB2YXIgY29udGV4dCA9IGN0eCB8fCAoaW1wbENsYXNzID8gY3JlYXRlKGltcGxDbGFzcy5wcm90b3R5cGUpIDoge30pO1xuICAgIC8vIGNhY2hlIHRoZSBpbm5lciBIVE1MIHRvIGZpeCAjODU1XG4gICAgdmFyIGlubmVySFRNTCA9IHJvb3QuX2lubmVySFRNTCA9IHJvb3QuX2lubmVySFRNTCB8fCByb290LmlubmVySFRNTDtcbiAgICB2YXIgY29uZiA9IGV4dGVuZCh7IHJvb3Q6IHJvb3QsIG9wdHM6IG9wdHMsIGNvbnRleHQ6IGNvbnRleHQgfSwgeyBwYXJlbnQ6IG9wdHMgPyBvcHRzLnBhcmVudCA6IG51bGwgfSk7XG4gICAgdmFyIHRhZztcblxuICAgIGlmIChpbXBsICYmIHJvb3QpIHsgdGFnID0gY3JlYXRlVGFnKGltcGwsIGNvbmYsIGlubmVySFRNTCk7IH1cblxuICAgIGlmICh0YWcgJiYgdGFnLm1vdW50KSB7XG4gICAgICB0YWcubW91bnQodHJ1ZSk7XG4gICAgICAvLyBhZGQgdGhpcyB0YWcgdG8gdGhlIHZpcnR1YWxEb20gdmFyaWFibGVcbiAgICAgIGlmICghY29udGFpbnMoX19UQUdTX0NBQ0hFLCB0YWcpKSB7IF9fVEFHU19DQUNIRS5wdXNoKHRhZyk7IH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGFnXG4gIH1cblxuXG5cbiAgdmFyIHRhZ3MgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gICAgYXJyYXlpc2hBZGQ6IGFycmF5aXNoQWRkLFxuICAgIGdldFRhZ05hbWU6IGdldE5hbWUsXG4gICAgaW5oZXJpdFBhcmVudFByb3BzOiBpbmhlcml0UGFyZW50UHJvcHMsXG4gICAgbW91bnRUbzogbW91bnQkMSxcbiAgICBzZWxlY3RUYWdzOiBxdWVyeSxcbiAgICBhcnJheWlzaFJlbW92ZTogYXJyYXlpc2hSZW1vdmUsXG4gICAgZ2V0VGFnOiBnZXQsXG4gICAgaW5pdENoaWxkVGFnOiBpbml0Q2hpbGQsXG4gICAgbW92ZUNoaWxkVGFnOiBtb3ZlQ2hpbGQsXG4gICAgbWFrZVJlcGxhY2VWaXJ0dWFsOiBtYWtlUmVwbGFjZVZpcnR1YWwsXG4gICAgZ2V0SW1tZWRpYXRlQ3VzdG9tUGFyZW50VGFnOiBnZXRJbW1lZGlhdGVDdXN0b21QYXJlbnQsXG4gICAgbWFrZVZpcnR1YWw6IG1ha2VWaXJ0dWFsLFxuICAgIG1vdmVWaXJ0dWFsOiBtb3ZlVmlydHVhbCxcbiAgICB1bm1vdW50QWxsOiB1bm1vdW50QWxsLFxuICAgIGNyZWF0ZUlmRGlyZWN0aXZlOiBjcmVhdGVJZkRpcmVjdGl2ZSxcbiAgICBjcmVhdGVSZWZEaXJlY3RpdmU6IGNyZWF0ZVJlZkRpcmVjdGl2ZVxuICB9KTtcblxuICAvKipcbiAgICogUmlvdCBwdWJsaWMgYXBpXG4gICAqL1xuICB2YXIgc2V0dGluZ3MkMSA9IHNldHRpbmdzO1xuICB2YXIgdXRpbCA9IHtcbiAgICB0bXBsOiB0bXBsLFxuICAgIGJyYWNrZXRzOiBicmFja2V0cyxcbiAgICBzdHlsZU1hbmFnZXI6IHN0eWxlTWFuYWdlcixcbiAgICB2ZG9tOiBfX1RBR1NfQ0FDSEUsXG4gICAgc3R5bGVOb2RlOiBzdHlsZU1hbmFnZXIuc3R5bGVOb2RlLFxuICAgIC8vIGV4cG9ydCB0aGUgcmlvdCBpbnRlcm5hbCB1dGlscyBhcyB3ZWxsXG4gICAgZG9tOiBkb20sXG4gICAgY2hlY2s6IGNoZWNrLFxuICAgIG1pc2M6IG1pc2MsXG4gICAgdGFnczogdGFnc1xuICB9O1xuXG4gIC8vIGV4cG9ydCB0aGUgY29yZSBwcm9wcy9tZXRob2RzXG4gIHZhciBUYWckMSA9IFRhZztcbiAgdmFyIHRhZyQxID0gdGFnO1xuICB2YXIgdGFnMiQxID0gdGFnMjtcbiAgdmFyIG1vdW50JDIgPSBtb3VudDtcbiAgdmFyIG1peGluJDEgPSBtaXhpbjtcbiAgdmFyIHVwZGF0ZSQyID0gdXBkYXRlJDE7XG4gIHZhciB1bnJlZ2lzdGVyJDEgPSB1bnJlZ2lzdGVyO1xuICB2YXIgdmVyc2lvbiQxID0gdmVyc2lvbjtcbiAgdmFyIG9ic2VydmFibGUkMSA9IG9ic2VydmFibGU7XG5cbiAgdmFyIHJpb3QkMSA9IGV4dGVuZCh7fSwgY29yZSwge1xuICAgIG9ic2VydmFibGU6IG9ic2VydmFibGUsXG4gICAgc2V0dGluZ3M6IHNldHRpbmdzJDEsXG4gICAgdXRpbDogdXRpbCxcbiAgfSk7XG5cbiAgZXhwb3J0cy5zZXR0aW5ncyA9IHNldHRpbmdzJDE7XG4gIGV4cG9ydHMudXRpbCA9IHV0aWw7XG4gIGV4cG9ydHMuVGFnID0gVGFnJDE7XG4gIGV4cG9ydHMudGFnID0gdGFnJDE7XG4gIGV4cG9ydHMudGFnMiA9IHRhZzIkMTtcbiAgZXhwb3J0cy5tb3VudCA9IG1vdW50JDI7XG4gIGV4cG9ydHMubWl4aW4gPSBtaXhpbiQxO1xuICBleHBvcnRzLnVwZGF0ZSA9IHVwZGF0ZSQyO1xuICBleHBvcnRzLnVucmVnaXN0ZXIgPSB1bnJlZ2lzdGVyJDE7XG4gIGV4cG9ydHMudmVyc2lvbiA9IHZlcnNpb24kMTtcbiAgZXhwb3J0cy5vYnNlcnZhYmxlID0gb2JzZXJ2YWJsZSQxO1xuICBleHBvcnRzLmRlZmF1bHQgPSByaW90JDE7XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxufSkpKTtcbiIsImltcG9ydCByaW90IGZyb20gJ3Jpb3QnO1xyXG5pbXBvcnQgJ3Jpb3QtaG90LXJlbG9hZCc7XHJcbmltcG9ydCAnLi90YWdzL2FwcC5wdWcnO1xyXG5pbXBvcnQgJy4vdGFncy9pbnB1dC1mb3JtLnB1Zyc7XHJcbmltcG9ydCAnLi90YWdzL2l0ZW0tbGlzdC5wdWcnO1xyXG5cclxubGV0IHV0aWxzID0ge1xyXG4gICAgaW5pdDogZnVuY3Rpb24ob3B0cykge30sXHJcbiAgICBnZXRJbmRleEZyb21FdmVudDogZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgbGV0IGxpID0gZS50YXJnZXQuY2xvc2VzdCgnbGknKTtcclxuICAgICAgICBsZXQgbm9kZXMgPSBBcnJheS5mcm9tKCBsaS5jbG9zZXN0KCd1bCcpLmNoaWxkcmVuICk7XHJcbiAgICAgICAgcmV0dXJuIG5vZGVzLmluZGV4T2YoIGxpICk7XHJcbiAgICB9LFxyXG4gICAgICAvL1NpbXVsYXRlIGNsaWNrIGV2ZW50cyB0byBzdXBwb3J0IGpRdWFyeSBzb3J0YWJsZVxyXG4gICAgdG91Y2hIYW5kbGVyOiBmdW5jdGlvbiAoZXZlbnQpXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIHRvdWNoZXMgPSBldmVudC5jaGFuZ2VkVG91Y2hlcyxcclxuICAgICAgICAgICAgZmlyc3QgPSB0b3VjaGVzWzBdLFxyXG4gICAgICAgICAgICB0eXBlID0gXCJcIjtcclxuICAgICAgICBzd2l0Y2goZXZlbnQudHlwZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJ0b3VjaHN0YXJ0XCI6IHR5cGUgPSBcIm1vdXNlZG93blwiOyBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInRvdWNobW92ZVwiOiAgdHlwZSA9IFwibW91c2Vtb3ZlXCI7IGJyZWFrOyAgICAgICAgXHJcbiAgICAgICAgICAgIGNhc2UgXCJ0b3VjaGVuZFwiOiAgIHR5cGUgPSBcIm1vdXNldXBcIjsgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDogICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBzaW11bGF0ZWRFdmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiTW91c2VFdmVudFwiKTtcclxuICAgICAgICBzaW11bGF0ZWRFdmVudC5pbml0TW91c2VFdmVudCh0eXBlLCB0cnVlLCB0cnVlLCB3aW5kb3csIDEsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdC5zY3JlZW5YLCBmaXJzdC5zY3JlZW5ZLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3QuY2xpZW50WCwgZmlyc3QuY2xpZW50WSwgZmFsc2UsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZSwgZmFsc2UsIGZhbHNlLCAwLypsZWZ0Ki8sIG51bGwpO1xyXG5cclxuICAgICAgICBmaXJzdC50YXJnZXQuZGlzcGF0Y2hFdmVudChzaW11bGF0ZWRFdmVudCk7XHJcbiAgICAgICAgLy9ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB9XHJcbn1cclxuXHJcbnJpb3QubWl4aW4oXCJ1dGlsc1wiLCB1dGlscyk7XHJcblxyXG5cclxuXHJcbnJpb3QubW91bnQoJ2FwcCcpOyIsIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IGZhY3RvcnkoZXhwb3J0cywgcmVxdWlyZSgncmlvdCcpKSA6XG5cdHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbJ2V4cG9ydHMnLCAncmlvdCddLCBmYWN0b3J5KSA6XG5cdChmYWN0b3J5KChnbG9iYWwucmlvdEhvdFJlbG9hZCA9IGdsb2JhbC5yaW90SG90UmVsb2FkIHx8IHt9KSxnbG9iYWwucmlvdCkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKGV4cG9ydHMscmlvdCkgeyAndXNlIHN0cmljdCc7XG5cbnZhciBub25TdGF0ZSA9ICdpc01vdW50ZWQgb3B0cycuc3BsaXQoJyAnKTtcblxuZnVuY3Rpb24gcmVsb2FkKG5hbWUpIHtcbiAgcmlvdC51dGlsLnN0eWxlTWFuYWdlci5pbmplY3QoKTtcblxuICB2YXIgZWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKChuYW1lICsgXCIsIFtkYXRhLWlzPVwiICsgbmFtZSArIFwiXVwiKSk7XG4gIHZhciB0YWdzID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBlbCA9IGVsZW1zW2ldLCBvbGRUYWcgPSBlbC5fdGFnLCB2O1xuICAgIHJlbG9hZC50cmlnZ2VyKCdiZWZvcmUtdW5tb3VudCcsIG9sZFRhZyk7XG4gICAgb2xkVGFnLnVubW91bnQodHJ1ZSk7IC8vIGRldGFjaCB0aGUgb2xkIHRhZ1xuXG4gICAgLy8gcmVzZXQgdGhlIGlubmVySFRNTCBhbmQgYXR0cmlidXRlcyB0byBob3cgdGhleSB3ZXJlIGJlZm9yZSBtb3VudFxuICAgIGVsLmlubmVySFRNTCA9IG9sZFRhZy5fXy5pbm5lckhUTUw7XG4gICAgKG9sZFRhZy5fXy5pbnN0QXR0cnMgfHwgW10pLm1hcChmdW5jdGlvbihhdHRyKSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoYXR0ci5uYW1lLCBhdHRyLnZhbHVlKTtcbiAgICB9KTtcblxuICAgIC8vIGNvcHkgb3B0aW9ucyBmb3IgY3JlYXRpbmcgdGhlIG5ldyB0YWdcbiAgICB2YXIgbmV3T3B0cyA9IHt9O1xuICAgIGZvcihrZXkgaW4gb2xkVGFnLm9wdHMpIHtcbiAgICAgIG5ld09wdHNba2V5XSA9IG9sZFRhZy5vcHRzW2tleV07XG4gICAgfVxuICAgIG5ld09wdHMucGFyZW50ID0gb2xkVGFnLnBhcmVudDtcblxuICAgIC8vIGNyZWF0ZSB0aGUgbmV3IHRhZ1xuICAgIHJlbG9hZC50cmlnZ2VyKCdiZWZvcmUtbW91bnQnLCBuZXdPcHRzLCBvbGRUYWcpO1xuICAgIHZhciBuZXdUYWcgPSByaW90Lm1vdW50KGVsLCBuZXdPcHRzKVswXTtcblxuICAgIC8vIGNvcHkgc3RhdGUgZnJvbSB0aGUgb2xkIHRvIG5ldyB0YWdcbiAgICBmb3IodmFyIGtleSBpbiBvbGRUYWcpIHtcbiAgICAgIHYgPSBvbGRUYWdba2V5XTtcbiAgICAgIGlmICh+bm9uU3RhdGUuaW5kZXhPZihrZXkpKSB7IGNvbnRpbnVlIH1cbiAgICAgIG5ld1RhZ1trZXldID0gdjtcbiAgICB9XG4gICAgbmV3VGFnLnVwZGF0ZSgpO1xuICAgIHRhZ3MucHVzaChuZXdUYWcpO1xuICAgIHJlbG9hZC50cmlnZ2VyKCdhZnRlci1tb3VudCcsIG5ld1RhZywgb2xkVGFnKTtcbiAgfVxuXG4gIHJldHVybiB0YWdzXG59XG5cbnJpb3Qub2JzZXJ2YWJsZShyZWxvYWQpO1xucmlvdC5yZWxvYWQgPSByZWxvYWQ7XG5pZiAocmlvdC5kZWZhdWx0KSB7IHJpb3QuZGVmYXVsdC5yZWxvYWQgPSByZWxvYWQ7IH1cblxuZXhwb3J0cy5yZWxvYWQgPSByZWxvYWQ7XG5leHBvcnRzWydkZWZhdWx0J10gPSByZWxvYWQ7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbn0pKSk7XG4iLCJhcHBcclxuICBoZWFkZXIuei1kZXB0aC0xXHJcbiAgICBpbnB1dC1mb3JtKFxyXG4gICAgICB2aXNpYmxlPVwie3RydWV9XCJcclxuICAgICAgb25sb3N0Zm9jdXM9XCJ7dG9kby5yZW1vdmV9XCJcclxuICAgICAgc2F2ZV9jYj1cInt0b2RvLmFkZH1cIikuXHJcblxyXG4gICAgLnN3aXRjaFxyXG4gICAgICBsYWJlbCBcclxuICAgICAgICB8IEVkaXQgICAgICAgIFxyXG4gICAgICAgIGlucHV0KHR5cGU9XCJjaGVja2JveFwiLCBvbmNsaWNrPVwie3RvZG8udG9nZ2xlRWRpdH1cIiBjaGVja2VkPVwie3RoaXMuc3RhdGUuZWRpdE1vZGV9XCIpXHJcbiAgICAgICAgc3Bhbi5sZXZlclxyXG5cclxuICAgIC5zd2l0Y2hcclxuICAgICAgbGFiZWwgXHJcbiAgICAgICAgfCBTaG93IGZpbmlzaGVkICAgICAgICBcclxuICAgICAgICBpbnB1dCh0eXBlPVwiY2hlY2tib3hcIiwgb25jbGljaz1cInt0b2RvLnRvZ2dsZVNob3dDb21wbGV0ZWR9XCIgY2hlY2tlZD1cInt0aGlzLnN0YXRlLnNob3dDb21wbGV0ZWR9XCIpXHJcbiAgICAgICAgc3Bhbi5sZXZlclxyXG4gIFxyXG4gIG1haW5cclxuICAgIGl0ZW0tbGlzdChcclxuICAgICAgaXRlbXM9XCJ7c3RhdGUuaXRlbXN9XCJcclxuICAgICAgdG9nZ2xlX2NvbXBsZXRlX2NiPVwie3RvZG8udG9nZ2xlQ29tcGxldGV9XCJcclxuICAgICAgcmVtb3ZlX2l0ZW1fY2I9XCJ7dG9kby5yZW1vdmV9XCJcclxuICAgICAgbW92ZV9pdGVtX2NiPVwie3RvZG8ubW92ZX1cIlxyXG4gICAgICB1cGRhdGVfaXRlbV9jYj1cInt0b2RvLnVwZGF0ZX1cIlxyXG4gICAgICBlZGl0X21vZGU9XCJ7dGhpcy5zdGF0ZS5lZGl0TW9kZX1cIlxyXG4gICAgICBzaG93X2NvbXBsZXRlZD1cInt0aGlzLnN0YXRlLnNob3dDb21wbGV0ZWR9XCIpLlxyXG5cclxuICBzdHlsZS5cclxuICAgIC5zd2l0Y2h7XHJcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgICAgbWFyZ2luLWxlZnQ6IDFlbTtcclxuICAgICAgcGFkZGluZy1ib3R0b206IDAuNWVtO1xyXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICAgIH1cclxuICAgIC5zd2l0Y2ggbGFiZWwgLmxldmVyIHtcclxuICAgICAgICAgIG1hcmdpbi1sZWZ0OiAzcHg7XHJcbiAgICB9XHJcbiAgICBoZWFkZXJ7XHJcbiAgICAgIHotaW5kZXg6IDEwMDtcclxuICAgICAgd2lkdGg6IDEwMHZ3O1xyXG4gICAgICBoZWlnaHQ6IDE4dmg7XHJcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG4gICAgfVxyXG4gICAgbWFpbiB7XHJcbiAgICAgIGhlaWdodDogODJ2aDtcclxuICAgICAgb3ZlcmZsb3c6IHNjcm9sbDtcclxuICAgICAgLXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6IHRvdWNoOyAgICBcclxuICAgIH1cclxuICAgIGZvb3Rlci5wYWdlLWZvdGVyIHtcclxuICAgICAgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7XHJcbiAgICB9XHJcblxyXG4gIHNjcmlwdC5cclxuICAgIHRoaXMubWl4aW4oJ3V0aWxzJyk7IFxyXG5cclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGl0ZW1zOiBbXSxcclxuICAgICAgZWRpdE1vZGU6IGZhbHNlLFxyXG4gICAgICBzaG93Q29tcGxldGVkOiB0cnVlXHJcbiAgICB9XHJcblxyXG4gICAgLy8vLy8vLy8vLyBTdGF0ZSBoYW5kbGluZyBmdW5jdGlvbiBcclxuICAgdGhpcy5yZXN0b3JlU3RhdGUgPSAoKSA9PiB7XHJcbiAgICAgIGxldCBzdGF0ZSA9IEpTT04ucGFyc2Uod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwicmlvdFRvRG9cIikpO1xyXG4gICAgICBpZihzdGF0ZSl7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5wZXJzaXN0U3RhdGUgPSAoKSA9PiB7XHJcbiAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInJpb3RUb0RvXCIsIEpTT04uc3RyaW5naWZ5KHRoaXMuc3RhdGUgKSlcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm9uKFwiYmVmb3JlLW1vdW50XCIsIHRoaXMucmVzdG9yZVN0YXRlKTtcclxuIFxyXG4gIFxyXG4gICAgLy8vLy8vLy8vLyBMaXN0IGNvbnRyb2xlciBcclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIHRvZG9Db250cm9sZXIgPSB7XHJcbiAgICAgIHRvZ2dsZUVkaXQ6ICgpID0+IHtcclxuICAgICAgICAgIHRoaXMuc3RhdGUuZWRpdE1vZGUgPSAhdGhpcy5zdGF0ZS5lZGl0TW9kZVxyXG4gICAgICAgICAgdGhpcy5wZXJzaXN0U3RhdGUoKTtcclxuICAgICAgICB9LFxyXG4gICAgICB0b2dnbGVTaG93Q29tcGxldGVkOiAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnN0YXRlLnNob3dDb21wbGV0ZWQgPSAhdGhpcy5zdGF0ZS5zaG93Q29tcGxldGVkO1xyXG4gICAgICAgICAgdGhpcy5wZXJzaXN0U3RhdGUoKTtcclxuICAgICAgfSxcclxuICAgICAgdG9nZ2xlQ29tcGxldGU6IChlKSA9PiB7XHJcbiAgICAgICAgLy9HZXQgaW5kZXggb2YgZWxlbWVudCB0aGF0IHdhcyBjbGlja2VkXHJcbiAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5nZXRJbmRleEZyb21FdmVudChlKTtcclxuICAgICAgICB0aGlzLnN0YXRlLml0ZW1zW2luZGV4XS5kb25lID0gIXRoaXMuc3RhdGUuaXRlbXNbaW5kZXhdLmRvbmVcclxuICAgICAgICB0aGlzLnBlcnNpc3RTdGF0ZSgpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICBhZGQ6ICh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnN0YXRlLml0ZW1zLnVuc2hpZnQoeyB0ZXh0OiB0ZXh0LCBkb25lOiBmYWxzZX0pO1xyXG4gICAgICAgICAgdGhpcy5wZXJzaXN0U3RhdGUoKTtcclxuICAgICAgICAgIHRoaXMudXBkYXRlKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgdXBkYXRlOiAodGV4dCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgIHRoaXMuc3RhdGUuaXRlbXNbaW5kZXhdLnRleHQgPSB0ZXh0O1xyXG4gICAgICAgICAgdGhpcy5wZXJzaXN0U3RhdGUoKTtcclxuICAgICAgICAgIHRoaXMudXBkYXRlKCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgIHJlbW92ZTogKGUpID0+IHtcclxuICAgICAgICAgIGxldCBsaSA9IGUudGFyZ2V0LmNsb3Nlc3QoJ2xpJyk7XHJcbiAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLmdldEluZGV4RnJvbUV2ZW50KGUpO1xyXG4gICAgICAgICAgbGkuY2xhc3NMaXN0LmFkZChcInNjYWxlLW91dFwiKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGxpLmNsYXNzTGlzdC5yZW1vdmUoXCJzY2FsZS1vdXRcIik7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuaXRlbXMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgdGhpcy5wZXJzaXN0U3RhdGUoKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICB9LCAyMDApXHJcbiAgXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgIG1vdmU6IChmcm9tLCB0bykgPT4ge1xyXG4gICAgICAgICAgdGhpcy5zdGF0ZS5pdGVtcy5zcGxpY2UodG8sIDAsIHRoaXMuc3RhdGUuaXRlbXMuc3BsaWNlKGZyb20sIDEpWzBdKTtcclxuICAgICAgICAgIHRoaXMucGVyc2lzdFN0YXRlKCk7XHJcbiAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnRvZG8gPSB0b2RvQ29udHJvbGVyO1xyXG5cclxuIiwiXHJcbmlucHV0LWZvcm0gXHJcbiAgZm9ybShvbnN1Ym1pdD1cInthZGR9XCIpLmN5YW4ubGlnaHRlbi01XHJcbiAgICAuaW5wdXRhcmVhXHJcbiAgICAgIC5pbnB1dC1maWVsZC5pbmxpbmVcclxuICAgICAgICBpbnB1dChyZWY9XCJpbnB1dEZpZWxkXCIsIGlkPVwibmV3SXRlbVwiLCB0eXBlPVwidGV4dFwiLCBvbmtleXVwPVwie2VkaXR9XCIpIFxyXG4gICAgICAgIGxhYmVsKGZvcj1cIm5ld0l0ZW1cIikgQWRkIG5ldyBJdGVtLi4uXHJcbiBcclxuICAgICAgYS5idG4tZmxvYXRpbmcoY2xhc3M9XCJ7ZGlzYWJsZWQ6ICF0aGlzLnRleHR9XCIgb25jbGljaz1cInthZGR9XCIpXHJcbiAgICAgICAgaS5tYXRlcmlhbC1pY29ucyBhZGRcclxuXHJcbiAgc3R5bGUuXHJcbiAgICBmb3Jte1xyXG4gICAgICBwYWRkaW5nLXRvcDogMWVtO1xyXG4gICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIH1cclxuICAgICNuZXdJdGVte1xyXG4gICAgICBmb250LXNpemU6IDEuNHJlbTtcclxuICAgICAgbWFyZ2luLXJpZ2h0OiAxZW07XHJcbiAgICAgIHdpZHRoOiA3MHZ3O1xyXG4gICAgfVxyXG5cclxuICBzY3JpcHQuXHJcbiAgICAgIHRoaXMudGV4dCA9IFwiXCI7XHJcbiAgICAgIHRoaXMuZWRpdCA9IChlKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnRleHQgPSBlLnRhcmdldC52YWx1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5hZGQgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgaWYodGhpcy50ZXh0KXtcclxuICAgICAgICAgICAgICB0aGlzLm9wdHMuc2F2ZV9jYih0aGlzLnRleHQpO1xyXG4gICAgICAgICAgICAgIHRoaXMudGV4dCA9ICcnO1xyXG4gICAgICAgICAgICAgIHRoaXMucmVmcy5pbnB1dEZpZWxkLnZhbHVlID0gJycgXHJcbiAgICAgICAgICAgICAgdGhpcy5yZWZzLmlucHV0RmllbGQuZm9jdXMoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgfSIsIml0ZW0tbGlzdC56LWRlcHRoLTFcbiAgLnRvZG9saXN0XG4gICAgdWwoaWQ9XCJ0b2RvbGlzdFwiKS5jb2xsZWN0aW9uXG4gICAgICBsaS5jb2xsZWN0aW9uLWl0ZW0uc2NhbGUtdHJhbnNpdGlvbihcbiAgICAgICAgZWFjaD1cIntpdGVtIGluIHRoaXMub3B0cy5pdGVtc31cIlxuICAgICAgICBpZj1cInt0aGlzLm9wdHMuc2hvd19jb21wbGV0ZWQgJiYgaXRlbS5kb25lIHx8ICFpdGVtLmRvbmV9XCIpXG4gICAgICAgIFxuICAgICAgICBsYWJlbFxuICAgICAgICAgIC8vTm9ybWFsIHZpZXcgbW9kZSwgYnJlYWsgb3V0IHRvIG93biB0YWdcbiAgICAgICAgICBkaXYoaWY9XCJ7IXRoaXMub3B0cy5lZGl0X21vZGV9XCIpXG4gICAgICAgICAgICBpbnB1dCh0eXBlPVwiY2hlY2tib3hcIiwgY2hlY2tlZD1cIntpdGVtLmRvbmV9XCIsIG9uY2xpY2s9XCJ7dGhpcy5vcHRzLnRvZ2dsZV9jb21wbGV0ZV9jYn1cIilcbiAgICAgICAgICAgIHNwYW4oY2xhc3M9XCJ7ZG9uZTogaXRlbS5kb25lfVwiLCBvbmNsaWNrPVwie2VkaXR9XCIpIHtpdGVtLnRleHR9XG5cbiAgICAgICAgICAvL0VkaXQgbW9kZSwgYnJlYWsgb3V0IHRvIG93biAgdGFnXG4gICAgICAgICAgZGl2KGlmPVwie3RoaXMub3B0cy5lZGl0X21vZGV9XCIpXG4gICAgICAgICAgICBhLndhdmVzLWVmZmVjdC53YXZlcy1saWdodC5idG4tZmxhdChvbmNsaWNrPVwie3RoaXMub3B0cy5yZW1vdmVfaXRlbV9jYn1cIilcbiAgICAgICAgICAgICAgaS5tYXRlcmlhbC1pY29ucyByZW1vdmVfY2lyY2xlXG4gICAgICAgICAgICBzcGFuKGNsYXNzPVwie2RvbmU6IGl0ZW0uZG9uZX1cIiwgb25jbGljaz1cIntlZGl0fVwiKSB7aXRlbS50ZXh0fVxuICAgICAgICAgICAgYS5zZWNvbmRhcnktY29udGVudC5kcmFnX2hhbmRsZVxuICAgICAgICAgICAgICBpLm1hdGVyaWFsLWljb25zIGRyYWdfaGFuZGxlXG4gICAgXG4gICAgLy9CcmVhayBvdXQgdG8gb3duIHRhZ1xuICAgIGRpdiNtb2RhbC5tb2RhbChyZWY9XCJtb2RhbFwiKVxuICAgICAgLm1vZGFsLWNvbnRlbnRcbiAgICAgICAgZm9ybShvbnN1Ym1pdD1cIntzYXZlRWRpdH1cIilcbiAgICAgICAgICAuaW5wdXQtZmllbGRcbiAgICAgICAgICAgIGlucHV0KHJlZj1cImVkaXRJbnB1dFwiLCB0eXBlPVwidGV4dFwiLCBpZD1cImVkaXRJdGVtXCIsIHZhbHVlPVwiVGV4dFwiKVxuICAgICAgICAgICAgbGFiZWwoZm9yPVwiZWRpdEl0ZW1cIikgRWRpdFxuXG4gICAgICAubW9kYWwtZm9vdGVyXG4gICAgICAgIGEubW9kYWwtY2xvc2Uud2F2ZXMtZWZmZWN0LndhdmVzLXJlZC5idG4tZmxhdCBDYW5jZWwgIFxuICAgICAgICBhLm1vZGFsLWNsb3NlLndhdmVzLWVmZmVjdC53YXZlcy1ncmVlbi5idG4tZmxhdCggb25jbGljaz1cIntzYXZlRWRpdH1cIikgU2F2ZSAgXG4gICAgXG4gICAgXG4gICAgc3R5bGUuXG4gICAgICB1bCB7XG4gICAgICAgIGhlaWdodDogMTAwJVxuICAgICAgfVxuICAgICAgLnRvZG9saXN0IFt0eXBlPVwiY2hlY2tib3hcIl0rc3Bhbi5kb25le1xuICAgICAgICB0ZXh0LWRlY29yYXRpb246IGxpbmUtdGhyb3VnaDtcbiAgICAgICAgY29sb3I6ICM5ZTllOWU7XG4gICAgICB9XG4gICAgICAudG9kb2xpc3Qgc3Bhbi5kb25le1xuICAgICAgICB0ZXh0LWRlY29yYXRpb246IGxpbmUtdGhyb3VnaDtcbiAgICAgICAgY29sb3I6ICM5ZTllOWU7XG4gICAgICB9XG4gICAgICAudG9kb2xpc3QgLmNvbGxlY3Rpb24gLmNvbGxlY3Rpb24taXRlbSB7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAyLjVyZW07XG4gICAgICB9IFxuICAgICAgLnRvZG9saXN0IFt0eXBlPVwiY2hlY2tib3hcIl0rc3BhbntcbiAgICAgICAgZm9udC1zaXplOiAxLjNyZW07XG4gICAgICAgIGNvbG9yOiBibGFjaztcbiAgICAgIH1cblxuICAgICAgLnRvZG9saXN0IHNwYW57XG4gICAgICAgIGZvbnQtc2l6ZTogMS4zcmVtO1xuICAgICAgICBjb2xvcjogYmxhY2s7XG4gICAgICB9XG4gICAgICAudG9kb2xpc3Qge1xuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgIH1cblxuICBzY3JpcHQuXG4gICAgdGhpcy5taXhpbihcInV0aWxzXCIpO1xuXG4gICAgdGhpcy5zZWxlY3RlZEl0ZW1JbmRleCA9IDA7XG4gICAgdGhpcy5zb3J0ID0ge1xuICAgICAgZnJvbTogMCxcbiAgICAgIHRvOiAwLFxuICAgIH07XG5cbiAgICB0aGlzLnVwZGF0ZUVkaXRNb2RlID0gKCkgPT4ge1xuICAgICAgaWYgKHRoaXMub3B0cy5lZGl0X21vZGUpIHtcbiAgICAgICAgJCggXCIjdG9kb2xpc3RcIiApLnNvcnRhYmxlKCBcImVuYWJsZVwiICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKCBcIiN0b2RvbGlzdFwiICkuc29ydGFibGUoIFwiZGlzYWJsZVwiICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5lZGl0ID0gKGUpID0+IHtcbiAgICAgIGlmICh0aGlzLm9wdHMuZWRpdF9tb2RlKSB7XG4gICAgICAgIHRoaXMubW9kYWwub3BlbigpO1xuICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbUluZGV4ID0gdGhpcy5nZXRJbmRleEZyb21FdmVudChldmVudCk7XG4gICAgICAgIHRoaXMucmVmcy5lZGl0SW5wdXQudmFsdWUgPSBlLnRhcmdldC5pbm5lckhUTUw7XG4gICAgICAgIHRoaXMucmVmcy5lZGl0SW5wdXQuZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnNhdmVFZGl0ID0gKGUpID0+IHtcbiAgICAgIHRoaXMubW9kYWwuY2xvc2UoKTtcbiAgICAgIHRoaXMub3B0cy51cGRhdGVfaXRlbV9jYih0aGlzLnJlZnMuZWRpdElucHV0LnZhbHVlLCB0aGlzLnNlbGVjdGVkSXRlbUluZGV4KVxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgfVxuXG4gICAgdGhpcy5vbihcIm1vdW50XCIsICgpID0+IHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIHRoaXMudG91Y2hIYW5kbGVyLCB0cnVlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgdGhpcy50b3VjaEhhbmRsZXIsIHRydWUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIHRoaXMudG91Y2hIYW5kbGVyLCB0cnVlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGNhbmNlbFwiLCB0aGlzLnRvdWNoSGFuZGxlciwgdHJ1ZSk7ICAgIFxuICAgICAgXG4gICAgICB0aGlzLm1vZGFsID0gIE0uTW9kYWwuaW5pdCh0aGlzLnJlZnMubW9kYWwsIHt9KTtcblxuICAgICAgJCggXCIjdG9kb2xpc3RcIiApLnNvcnRhYmxlKHtcbiAgICAgICAgaGFuZGxlOiAnLmRyYWdfaGFuZGxlJyxcbiAgICAgICAgYXhpczogXCJ5XCIsXG4gICAgICAgIHN0YXJ0OiAoIGV2ZW50LCB1aSApID0+IHtcbiAgICAgICAgICB0aGlzLnNvcnQuZnJvbSA9IHRoaXMuZ2V0SW5kZXhGcm9tRXZlbnQoZXZlbnQub3JpZ2luYWxFdmVudCk7ICAgIFxuICAgICAgICB9LFxuICAgICAgICBzdG9wOiAoIGV2ZW50LCB1aSApID0+IHtcbiAgICAgICAgICB0aGlzLnNvcnQudG8gPSB0aGlzLmdldEluZGV4RnJvbUV2ZW50KGV2ZW50Lm9yaWdpbmFsRXZlbnQpOyAgXG4gICAgICAgICAgdGhpcy5vcHRzLm1vdmVfaXRlbV9jYih0aGlzLnNvcnQuZnJvbSwgdGhpcy5zb3J0LnRvKTsgIFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgICQoIFwiI3RvZG9saXN0XCIgKS5kaXNhYmxlU2VsZWN0aW9uKCk7XG4gICAgICB0aGlzLnVwZGF0ZUVkaXRNb2RlKCk7XG4gICAgfSlcblxuICAgIHRoaXMub24oXCJ1cGRhdGVcIiwgKCkgPT4ge1xuICAgICAgdGhpcy51cGRhdGVFZGl0TW9kZSgpO1xuICAgIH0pXG4iXSwic291cmNlUm9vdCI6IiJ9